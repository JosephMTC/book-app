(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();function xS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lm={exports:{}},xu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE;function yI(){if(YE)return xu;YE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var h in a)h!=="key"&&(o[h]=a[h])}else o=a;return a=o.ref,{$$typeof:n,type:i,key:u,ref:a!==void 0?a:null,props:o}}return xu.Fragment=e,xu.jsx=t,xu.jsxs=t,xu}var KE;function vI(){return KE||(KE=1,Lm.exports=yI()),Lm.exports}var q=vI(),Vm={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QE;function EI(){if(QE)return Ie;QE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),v=Symbol.iterator;function E(O){return O===null||typeof O!="object"?null:(O=v&&O[v]||O["@@iterator"],typeof O=="function"?O:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,D={};function L(O,te,ae){this.props=O,this.context=te,this.refs=D,this.updater=ae||A}L.prototype.isReactComponent={},L.prototype.setState=function(O,te){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,te,"setState")},L.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function M(){}M.prototype=L.prototype;function H(O,te,ae){this.props=O,this.context=te,this.refs=D,this.updater=ae||A}var j=H.prototype=new M;j.constructor=H,S(j,L.prototype),j.isPureReactComponent=!0;var ee=Array.isArray,Z={H:null,A:null,T:null,S:null,V:null},ue=Object.prototype.hasOwnProperty;function P(O,te,ae,se,fe,xe){return ae=xe.ref,{$$typeof:n,type:O,key:te,ref:ae!==void 0?ae:null,props:xe}}function R(O,te){return P(O.type,te,void 0,void 0,void 0,O.props)}function I(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function x(O){var te={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ae){return te[ae]})}var k=/\/+/g;function U(O,te){return typeof O=="object"&&O!==null&&O.key!=null?x(""+O.key):te.toString(36)}function N(){}function $e(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(N,N):(O.status="pending",O.then(function(te){O.status==="pending"&&(O.status="fulfilled",O.value=te)},function(te){O.status==="pending"&&(O.status="rejected",O.reason=te)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Le(O,te,ae,se,fe){var xe=typeof O;(xe==="undefined"||xe==="boolean")&&(O=null);var we=!1;if(O===null)we=!0;else switch(xe){case"bigint":case"string":case"number":we=!0;break;case"object":switch(O.$$typeof){case n:case e:we=!0;break;case _:return we=O._init,Le(we(O._payload),te,ae,se,fe)}}if(we)return fe=fe(O),we=se===""?"."+U(O,0):se,ee(fe)?(ae="",we!=null&&(ae=we.replace(k,"$&/")+"/"),Le(fe,te,ae,"",function(ti){return ti})):fe!=null&&(I(fe)&&(fe=R(fe,ae+(fe.key==null||O&&O.key===fe.key?"":(""+fe.key).replace(k,"$&/")+"/")+we)),te.push(fe)),1;we=0;var St=se===""?".":se+":";if(ee(O))for(var Xe=0;Xe<O.length;Xe++)se=O[Xe],xe=St+U(se,Xe),we+=Le(se,te,ae,xe,fe);else if(Xe=E(O),typeof Xe=="function")for(O=Xe.call(O),Xe=0;!(se=O.next()).done;)se=se.value,xe=St+U(se,Xe++),we+=Le(se,te,ae,xe,fe);else if(xe==="object"){if(typeof O.then=="function")return Le($e(O),te,ae,se,fe);throw te=String(O),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return we}function $(O,te,ae){if(O==null)return O;var se=[],fe=0;return Le(O,se,"","",function(xe){return te.call(ae,xe,fe++)}),se}function oe(O){if(O._status===-1){var te=O._result;te=te(),te.then(function(ae){(O._status===0||O._status===-1)&&(O._status=1,O._result=ae)},function(ae){(O._status===0||O._status===-1)&&(O._status=2,O._result=ae)}),O._status===-1&&(O._status=0,O._result=te)}if(O._status===1)return O._result.default;throw O._result}var de=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function ge(){}return Ie.Children={map:$,forEach:function(O,te,ae){$(O,function(){te.apply(this,arguments)},ae)},count:function(O){var te=0;return $(O,function(){te++}),te},toArray:function(O){return $(O,function(te){return te})||[]},only:function(O){if(!I(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},Ie.Component=L,Ie.Fragment=t,Ie.Profiler=a,Ie.PureComponent=H,Ie.StrictMode=i,Ie.Suspense=f,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(O){return Z.H.useMemoCache(O)}},Ie.cache=function(O){return function(){return O.apply(null,arguments)}},Ie.cloneElement=function(O,te,ae){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var se=S({},O.props),fe=O.key,xe=void 0;if(te!=null)for(we in te.ref!==void 0&&(xe=void 0),te.key!==void 0&&(fe=""+te.key),te)!ue.call(te,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&te.ref===void 0||(se[we]=te[we]);var we=arguments.length-2;if(we===1)se.children=ae;else if(1<we){for(var St=Array(we),Xe=0;Xe<we;Xe++)St[Xe]=arguments[Xe+2];se.children=St}return P(O.type,fe,void 0,void 0,xe,se)},Ie.createContext=function(O){return O={$$typeof:u,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:o,_context:O},O},Ie.createElement=function(O,te,ae){var se,fe={},xe=null;if(te!=null)for(se in te.key!==void 0&&(xe=""+te.key),te)ue.call(te,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(fe[se]=te[se]);var we=arguments.length-2;if(we===1)fe.children=ae;else if(1<we){for(var St=Array(we),Xe=0;Xe<we;Xe++)St[Xe]=arguments[Xe+2];fe.children=St}if(O&&O.defaultProps)for(se in we=O.defaultProps,we)fe[se]===void 0&&(fe[se]=we[se]);return P(O,xe,void 0,void 0,null,fe)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(O){return{$$typeof:h,render:O}},Ie.isValidElement=I,Ie.lazy=function(O){return{$$typeof:_,_payload:{_status:-1,_result:O},_init:oe}},Ie.memo=function(O,te){return{$$typeof:m,type:O,compare:te===void 0?null:te}},Ie.startTransition=function(O){var te=Z.T,ae={};Z.T=ae;try{var se=O(),fe=Z.S;fe!==null&&fe(ae,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ge,de)}catch(xe){de(xe)}finally{Z.T=te}},Ie.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},Ie.use=function(O){return Z.H.use(O)},Ie.useActionState=function(O,te,ae){return Z.H.useActionState(O,te,ae)},Ie.useCallback=function(O,te){return Z.H.useCallback(O,te)},Ie.useContext=function(O){return Z.H.useContext(O)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(O,te){return Z.H.useDeferredValue(O,te)},Ie.useEffect=function(O,te,ae){var se=Z.H;if(typeof ae=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(O,te)},Ie.useId=function(){return Z.H.useId()},Ie.useImperativeHandle=function(O,te,ae){return Z.H.useImperativeHandle(O,te,ae)},Ie.useInsertionEffect=function(O,te){return Z.H.useInsertionEffect(O,te)},Ie.useLayoutEffect=function(O,te){return Z.H.useLayoutEffect(O,te)},Ie.useMemo=function(O,te){return Z.H.useMemo(O,te)},Ie.useOptimistic=function(O,te){return Z.H.useOptimistic(O,te)},Ie.useReducer=function(O,te,ae){return Z.H.useReducer(O,te,ae)},Ie.useRef=function(O){return Z.H.useRef(O)},Ie.useState=function(O){return Z.H.useState(O)},Ie.useSyncExternalStore=function(O,te,ae){return Z.H.useSyncExternalStore(O,te,ae)},Ie.useTransition=function(){return Z.H.useTransition()},Ie.version="19.1.0",Ie}var WE;function o_(){return WE||(WE=1,Vm.exports=EI()),Vm.exports}var B=o_();const kt=xS(B);var Um={exports:{}},Nu={},zm={exports:{}},Bm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XE;function TI(){return XE||(XE=1,function(n){function e($,oe){var de=$.length;$.push(oe);e:for(;0<de;){var ge=de-1>>>1,O=$[ge];if(0<a(O,oe))$[ge]=oe,$[de]=O,de=ge;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var oe=$[0],de=$.pop();if(de!==oe){$[0]=de;e:for(var ge=0,O=$.length,te=O>>>1;ge<te;){var ae=2*(ge+1)-1,se=$[ae],fe=ae+1,xe=$[fe];if(0>a(se,de))fe<O&&0>a(xe,se)?($[ge]=xe,$[fe]=de,ge=fe):($[ge]=se,$[ae]=de,ge=ae);else if(fe<O&&0>a(xe,de))$[ge]=xe,$[fe]=de,ge=fe;else break e}}return oe}function a($,oe){var de=$.sortIndex-oe.sortIndex;return de!==0?de:$.id-oe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var f=[],m=[],_=1,v=null,E=3,A=!1,S=!1,D=!1,L=!1,M=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function ee($){for(var oe=t(m);oe!==null;){if(oe.callback===null)i(m);else if(oe.startTime<=$)i(m),oe.sortIndex=oe.expirationTime,e(f,oe);else break;oe=t(m)}}function Z($){if(D=!1,ee($),!S)if(t(f)!==null)S=!0,ue||(ue=!0,U());else{var oe=t(m);oe!==null&&Le(Z,oe.startTime-$)}}var ue=!1,P=-1,R=5,I=-1;function x(){return L?!0:!(n.unstable_now()-I<R)}function k(){if(L=!1,ue){var $=n.unstable_now();I=$;var oe=!0;try{e:{S=!1,D&&(D=!1,H(P),P=-1),A=!0;var de=E;try{t:{for(ee($),v=t(f);v!==null&&!(v.expirationTime>$&&x());){var ge=v.callback;if(typeof ge=="function"){v.callback=null,E=v.priorityLevel;var O=ge(v.expirationTime<=$);if($=n.unstable_now(),typeof O=="function"){v.callback=O,ee($),oe=!0;break t}v===t(f)&&i(f),ee($)}else i(f);v=t(f)}if(v!==null)oe=!0;else{var te=t(m);te!==null&&Le(Z,te.startTime-$),oe=!1}}break e}finally{v=null,E=de,A=!1}oe=void 0}}finally{oe?U():ue=!1}}}var U;if(typeof j=="function")U=function(){j(k)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,$e=N.port2;N.port1.onmessage=k,U=function(){$e.postMessage(null)}}else U=function(){M(k,0)};function Le($,oe){P=M(function(){$(n.unstable_now())},oe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function($){switch(E){case 1:case 2:case 3:var oe=3;break;default:oe=E}var de=E;E=oe;try{return $()}finally{E=de}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function($,oe){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var de=E;E=$;try{return oe()}finally{E=de}},n.unstable_scheduleCallback=function($,oe,de){var ge=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?ge+de:ge):de=ge,$){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=de+O,$={id:_++,callback:oe,priorityLevel:$,startTime:de,expirationTime:O,sortIndex:-1},de>ge?($.sortIndex=de,e(m,$),t(f)===null&&$===t(m)&&(D?(H(P),P=-1):D=!0,Le(Z,de-ge))):($.sortIndex=O,e(f,$),S||A||(S=!0,ue||(ue=!0,U()))),$},n.unstable_shouldYield=x,n.unstable_wrapCallback=function($){var oe=E;return function(){var de=E;E=oe;try{return $.apply(this,arguments)}finally{E=de}}}}(Bm)),Bm}var ZE;function wI(){return ZE||(ZE=1,zm.exports=TI()),zm.exports}var jm={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JE;function SI(){if(JE)return an;JE=1;var n=o_();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(f,m,_){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:f,containerInfo:m,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,an.createPortal=function(f,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return o(f,m,null,_)},an.flushSync=function(f){var m=u.T,_=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=m,i.p=_,i.d.f()}},an.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(f,m))},an.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},an.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin),E=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?i.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:A}):_==="script"&&i.d.X(f,{crossOrigin:v,integrity:E,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},an.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=h(m.as,m.crossOrigin);i.d.M(f,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(f)},an.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,v=h(_,m.crossOrigin);i.d.L(f,_,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},an.preloadModule=function(f,m){if(typeof f=="string")if(m){var _=h(m.as,m.crossOrigin);i.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(f)},an.requestFormReset=function(f){i.d.r(f)},an.unstable_batchedUpdates=function(f,m){return f(m)},an.useFormState=function(f,m,_){return u.H.useFormState(f,m,_)},an.useFormStatus=function(){return u.H.useHostTransitionStatus()},an.version="19.1.0",an}var eT;function bI(){if(eT)return jm.exports;eT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),jm.exports=SI(),jm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tT;function AI(){if(tT)return Nu;tT=1;var n=wI(),e=o_(),t=bI();function i(r){var s="https://react.dev/errors/"+r;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)s+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function o(r){var s=r,l=r;if(r.alternate)for(;s.return;)s=s.return;else{r=s;do s=r,(s.flags&4098)!==0&&(l=s.return),r=s.return;while(r)}return s.tag===3?l:null}function u(r){if(r.tag===13){var s=r.memoizedState;if(s===null&&(r=r.alternate,r!==null&&(s=r.memoizedState)),s!==null)return s.dehydrated}return null}function h(r){if(o(r)!==r)throw Error(i(188))}function f(r){var s=r.alternate;if(!s){if(s=o(r),s===null)throw Error(i(188));return s!==r?null:r}for(var l=r,c=s;;){var p=l.return;if(p===null)break;var g=p.alternate;if(g===null){if(c=p.return,c!==null){l=c;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===l)return h(p),r;if(g===c)return h(p),s;g=g.sibling}throw Error(i(188))}if(l.return!==c.return)l=p,c=g;else{for(var w=!1,b=p.child;b;){if(b===l){w=!0,l=p,c=g;break}if(b===c){w=!0,c=p,l=g;break}b=b.sibling}if(!w){for(b=g.child;b;){if(b===l){w=!0,l=g,c=p;break}if(b===c){w=!0,c=g,l=p;break}b=b.sibling}if(!w)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:s}function m(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r;for(r=r.child;r!==null;){if(s=m(r),s!==null)return s;r=r.sibling}return null}var _=Object.assign,v=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),L=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),H=Symbol.for("react.consumer"),j=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function U(r){return r===null||typeof r!="object"?null:(r=k&&r[k]||r["@@iterator"],typeof r=="function"?r:null)}var N=Symbol.for("react.client.reference");function $e(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===N?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case S:return"Fragment";case L:return"Profiler";case D:return"StrictMode";case Z:return"Suspense";case ue:return"SuspenseList";case I:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case A:return"Portal";case j:return(r.displayName||"Context")+".Provider";case H:return(r._context.displayName||"Context")+".Consumer";case ee:var s=r.render;return r=r.displayName,r||(r=s.displayName||s.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case P:return s=r.displayName||null,s!==null?s:$e(r.type)||"Memo";case R:s=r._payload,r=r._init;try{return $e(r(s))}catch{}}return null}var Le=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},ge=[],O=-1;function te(r){return{current:r}}function ae(r){0>O||(r.current=ge[O],ge[O]=null,O--)}function se(r,s){O++,ge[O]=r.current,r.current=s}var fe=te(null),xe=te(null),we=te(null),St=te(null);function Xe(r,s){switch(se(we,s),se(xe,r),se(fe,null),s.nodeType){case 9:case 11:r=(r=s.documentElement)&&(r=r.namespaceURI)?TE(r):0;break;default:if(r=s.tagName,s=s.namespaceURI)s=TE(s),r=wE(s,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ae(fe),se(fe,r)}function ti(){ae(fe),ae(xe),ae(we)}function $i(r){r.memoizedState!==null&&se(St,r);var s=fe.current,l=wE(s,r.type);s!==l&&(se(xe,r),se(fe,l))}function zn(r){xe.current===r&&(ae(fe),ae(xe)),St.current===r&&(ae(St),bu._currentValue=de)}var ni=Object.prototype.hasOwnProperty,gi=n.unstable_scheduleCallback,Ls=n.unstable_cancelCallback,Tl=n.unstable_shouldYield,xc=n.unstable_requestPaint,Bn=n.unstable_now,Lf=n.unstable_getCurrentPriorityLevel,wl=n.unstable_ImmediatePriority,Ba=n.unstable_UserBlockingPriority,Vs=n.unstable_NormalPriority,Vf=n.unstable_LowPriority,ja=n.unstable_IdlePriority,Sl=n.log,Nc=n.unstable_setDisableYieldValue,mt=null,Ze=null;function An(r){if(typeof Sl=="function"&&Nc(r),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(mt,r)}catch{}}var rn=Math.clz32?Math.clz32:Us,Oc=Math.log,Uf=Math.LN2;function Us(r){return r>>>=0,r===0?32:31-(Oc(r)/Uf|0)|0}var zs=256,Bs=4194304;function ii(r){var s=r&42;if(s!==0)return s;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Fa(r,s,l){var c=r.pendingLanes;if(c===0)return 0;var p=0,g=r.suspendedLanes,w=r.pingedLanes;r=r.warmLanes;var b=c&134217727;return b!==0?(c=b&~g,c!==0?p=ii(c):(w&=b,w!==0?p=ii(w):l||(l=b&~r,l!==0&&(p=ii(l))))):(b=c&~g,b!==0?p=ii(b):w!==0?p=ii(w):l||(l=c&~r,l!==0&&(p=ii(l)))),p===0?0:s!==0&&s!==p&&(s&g)===0&&(g=p&-p,l=s&-s,g>=l||g===32&&(l&4194048)!==0)?s:p}function js(r,s){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&s)===0}function bl(r,s){switch(r){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Al(){var r=zs;return zs<<=1,(zs&4194048)===0&&(zs=256),r}function Cl(){var r=Bs;return Bs<<=1,(Bs&62914560)===0&&(Bs=4194304),r}function Yi(r){for(var s=[],l=0;31>l;l++)s.push(r);return s}function Ki(r,s){r.pendingLanes|=s,s!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Rl(r,s,l,c,p,g){var w=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var b=r.entanglements,V=r.expirationTimes,K=r.hiddenUpdates;for(l=w&~l;0<l;){var J=31-rn(l),ie=1<<J;b[J]=0,V[J]=-1;var Q=K[J];if(Q!==null)for(K[J]=null,J=0;J<Q.length;J++){var W=Q[J];W!==null&&(W.lane&=-536870913)}l&=~ie}c!==0&&_i(r,c,0),g!==0&&p===0&&r.tag!==0&&(r.suspendedLanes|=g&~(w&~s))}function _i(r,s,l){r.pendingLanes|=s,r.suspendedLanes&=~s;var c=31-rn(s);r.entangledLanes|=s,r.entanglements[c]=r.entanglements[c]|1073741824|l&4194090}function Il(r,s){var l=r.entangledLanes|=s;for(r=r.entanglements;l;){var c=31-rn(l),p=1<<c;p&s|r[c]&s&&(r[c]|=s),l&=~p}}function Vr(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Ha(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Ur(){var r=oe.p;return r!==0?r:(r=window.event,r===void 0?32:jE(r.type))}function Dc(r,s){var l=oe.p;try{return oe.p=r,s()}finally{oe.p=l}}var ht=Math.random().toString(36).slice(2),Nt="__reactFiber$"+ht,bt="__reactProps$"+ht,jn="__reactContainer$"+ht,xl="__reactEvents$"+ht,zf="__reactListeners$"+ht,zr="__reactHandles$"+ht,Mc="__reactResources$"+ht,Fs="__reactMarker$"+ht;function Br(r){delete r[Nt],delete r[bt],delete r[xl],delete r[zf],delete r[zr]}function Qi(r){var s=r[Nt];if(s)return s;for(var l=r.parentNode;l;){if(s=l[jn]||l[Nt]){if(l=s.alternate,s.child!==null||l!==null&&l.child!==null)for(r=CE(r);r!==null;){if(l=r[Nt])return l;r=CE(r)}return s}r=l,l=r.parentNode}return null}function yi(r){if(r=r[Nt]||r[jn]){var s=r.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return r}return null}function vi(r){var s=r.tag;if(s===5||s===26||s===27||s===6)return r.stateNode;throw Error(i(33))}function pn(r){var s=r[Mc];return s||(s=r[Mc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function vt(r){r[Fs]=!0}var Nl=new Set,qa={};function ri(r,s){Wi(r,s),Wi(r+"Capture",s)}function Wi(r,s){for(qa[r]=s,r=0;r<s.length;r++)Nl.add(s[r])}var Pc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kc={},Hs={};function Lc(r){return ni.call(Hs,r)?!0:ni.call(kc,r)?!1:Pc.test(r)?Hs[r]=!0:(kc[r]=!0,!1)}function jr(r,s,l){if(Lc(s))if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(s);return}}r.setAttribute(s,""+l)}}function Ei(r,s,l){if(l===null)r.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(s);return}r.setAttribute(s,""+l)}}function Qt(r,s,l,c){if(c===null)r.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(s,l,""+c)}}var qs,Vc;function Xi(r){if(qs===void 0)try{throw Error()}catch(l){var s=l.stack.trim().match(/\n( *(at )?)/);qs=s&&s[1]||"",Vc=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qs+r+Vc}var Ga=!1;function $a(r,s){if(!r||Ga)return"";Ga=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(W){var Q=W}Reflect.construct(r,[],ie)}else{try{ie.call()}catch(W){Q=W}r.call(ie.prototype)}}else{try{throw Error()}catch(W){Q=W}(ie=r())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(W){if(W&&Q&&typeof W.stack=="string")return[W.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),w=g[0],b=g[1];if(w&&b){var V=w.split(`
`),K=b.split(`
`);for(p=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;p<K.length&&!K[p].includes("DetermineComponentFrameRoot");)p++;if(c===V.length||p===K.length)for(c=V.length-1,p=K.length-1;1<=c&&0<=p&&V[c]!==K[p];)p--;for(;1<=c&&0<=p;c--,p--)if(V[c]!==K[p]){if(c!==1||p!==1)do if(c--,p--,0>p||V[c]!==K[p]){var J=`
`+V[c].replace(" at new "," at ");return r.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",r.displayName)),J}while(1<=c&&0<=p);break}}}finally{Ga=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Xi(l):""}function Ol(r){switch(r.tag){case 26:case 27:case 5:return Xi(r.type);case 16:return Xi("Lazy");case 13:return Xi("Suspense");case 19:return Xi("SuspenseList");case 0:case 15:return $a(r.type,!1);case 11:return $a(r.type.render,!1);case 1:return $a(r.type,!0);case 31:return Xi("Activity");default:return""}}function Ya(r){try{var s="";do s+=Ol(r),r=r.return;while(r);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function mn(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Dl(r){var s=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Bf(r){var s=Dl(r)?"checked":"value",l=Object.getOwnPropertyDescriptor(r.constructor.prototype,s),c=""+r[s];if(!r.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,g=l.set;return Object.defineProperty(r,s,{configurable:!0,get:function(){return p.call(this)},set:function(w){c=""+w,g.call(this,w)}}),Object.defineProperty(r,s,{enumerable:l.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){r._valueTracker=null,delete r[s]}}}}function Ka(r){r._valueTracker||(r._valueTracker=Bf(r))}function Ml(r){if(!r)return!1;var s=r._valueTracker;if(!s)return!0;var l=s.getValue(),c="";return r&&(c=Dl(r)?r.checked?"true":"false":r.value),r=c,r!==l?(s.setValue(r),!0):!1}function Gs(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var jf=/[\n"\\]/g;function At(r){return r.replace(jf,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Cn(r,s,l,c,p,g,w,b){r.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.type=w:r.removeAttribute("type"),s!=null?w==="number"?(s===0&&r.value===""||r.value!=s)&&(r.value=""+mn(s)):r.value!==""+mn(s)&&(r.value=""+mn(s)):w!=="submit"&&w!=="reset"||r.removeAttribute("value"),s!=null?Fr(r,w,mn(s)):l!=null?Fr(r,w,mn(l)):c!=null&&r.removeAttribute("value"),p==null&&g!=null&&(r.defaultChecked=!!g),p!=null&&(r.checked=p&&typeof p!="function"&&typeof p!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?r.name=""+mn(b):r.removeAttribute("name")}function $s(r,s,l,c,p,g,w,b){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),s!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;l=l!=null?""+mn(l):"",s=s!=null?""+mn(s):l,b||s===r.value||(r.value=s),r.defaultValue=s}c=c??p,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=b?r.checked:!!c,r.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(r.name=w)}function Fr(r,s,l){s==="number"&&Gs(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Zi(r,s,l,c){if(r=r.options,s){s={};for(var p=0;p<l.length;p++)s["$"+l[p]]=!0;for(l=0;l<r.length;l++)p=s.hasOwnProperty("$"+r[l].value),r[l].selected!==p&&(r[l].selected=p),p&&c&&(r[l].defaultSelected=!0)}else{for(l=""+mn(l),s=null,p=0;p<r.length;p++){if(r[p].value===l){r[p].selected=!0,c&&(r[p].defaultSelected=!0);return}s!==null||r[p].disabled||(s=r[p])}s!==null&&(s.selected=!0)}}function tt(r,s,l){if(s!=null&&(s=""+mn(s),s!==r.value&&(r.value=s),l==null)){r.defaultValue!==s&&(r.defaultValue=s);return}r.defaultValue=l!=null?""+mn(l):""}function Ys(r,s,l,c){if(s==null){if(c!=null){if(l!=null)throw Error(i(92));if(Le(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),s=l}l=mn(s),r.defaultValue=l,c=r.textContent,c===l&&c!==""&&c!==null&&(r.value=c)}function Fn(r,s){if(s){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=s;return}}r.textContent=s}var Ks=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uc(r,s,l){var c=s.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?r.setProperty(s,""):s==="float"?r.cssFloat="":r[s]="":c?r.setProperty(s,l):typeof l!="number"||l===0||Ks.has(s)?s==="float"?r.cssFloat=l:r[s]=(""+l).trim():r[s]=l+"px"}function Pl(r,s,l){if(s!=null&&typeof s!="object")throw Error(i(62));if(r=r.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var p in s)c=s[p],s.hasOwnProperty(p)&&l[p]!==c&&Uc(r,p,c)}else for(var g in s)s.hasOwnProperty(g)&&Uc(r,g,s[g])}function kl(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ff=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qa(r){return Hf.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}var Ji=null;function Hn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var er=null,tr=null;function Ll(r){var s=yi(r);if(s&&(r=s.stateNode)){var l=r[bt]||null;e:switch(r=s.stateNode,s.type){case"input":if(Cn(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),s=l.name,l.type==="radio"&&s!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+At(""+s)+'"][type="radio"]'),s=0;s<l.length;s++){var c=l[s];if(c!==r&&c.form===r.form){var p=c[bt]||null;if(!p)throw Error(i(90));Cn(c,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<l.length;s++)c=l[s],c.form===r.form&&Ml(c)}break e;case"textarea":tt(r,l.value,l.defaultValue);break e;case"select":s=l.value,s!=null&&Zi(r,!!l.multiple,s,!1)}}}var Ti=!1;function zc(r,s,l){if(Ti)return r(s,l);Ti=!0;try{var c=r(s);return c}finally{if(Ti=!1,(er!==null||tr!==null)&&(Dh(),er&&(s=er,r=tr,tr=er=null,Ll(s),r)))for(s=0;s<r.length;s++)Ll(r[s])}}function Qs(r,s){var l=r.stateNode;if(l===null)return null;var c=l[bt]||null;if(c===null)return null;l=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,s,typeof l));return l}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qn=!1;if(si)try{var Ws={};Object.defineProperty(Ws,"passive",{get:function(){qn=!0}}),window.addEventListener("test",Ws,Ws),window.removeEventListener("test",Ws,Ws)}catch{qn=!1}var wi=null,Hr=null,nr=null;function Vl(){if(nr)return nr;var r,s=Hr,l=s.length,c,p="value"in wi?wi.value:wi.textContent,g=p.length;for(r=0;r<l&&s[r]===p[r];r++);var w=l-r;for(c=1;c<=w&&s[l-c]===p[g-c];c++);return nr=p.slice(r,1<c?1-c:void 0)}function Si(r){var s=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&s===13&&(r=13)):r=s,r===10&&(r=13),32<=r||r===13?r:0}function bi(){return!0}function Ul(){return!1}function Bt(r){function s(l,c,p,g,w){this._reactName=l,this._targetInst=p,this.type=c,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var b in r)r.hasOwnProperty(b)&&(l=r[b],this[b]=l?l(g):g[b]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?bi:Ul,this.isPropagationStopped=Ul,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),s}var Ke={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wa=Bt(Ke),Xs=_({},Ke,{view:0,detail:0}),Bc=Bt(Xs),Xa,Za,Ai,Zs=_({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ta,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Ai&&(Ai&&r.type==="mousemove"?(Xa=r.screenX-Ai.screenX,Za=r.screenY-Ai.screenY):Za=Xa=0,Ai=r),Xa)},movementY:function(r){return"movementY"in r?r.movementY:Za}}),Gn=Bt(Zs),jc=_({},Zs,{dataTransfer:0}),qf=Bt(jc),Js=_({},Xs,{relatedTarget:0}),Ja=Bt(Js),zl=_({},Ke,{animationName:0,elapsedTime:0,pseudoElement:0}),eo=Bt(zl),Fc=_({},Ke,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),to=Bt(Fc),Gf=_({},Ke,{data:0}),Bl=Bt(Gf),ea={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jl(r){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(r):(r=qc[r])?!!s[r]:!1}function ta(){return jl}var Gc=_({},Xs,{key:function(r){if(r.key){var s=ea[r.key]||r.key;if(s!=="Unidentified")return s}return r.type==="keypress"?(r=Si(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Hc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ta,charCode:function(r){return r.type==="keypress"?Si(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Si(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),no=Bt(Gc),$c=_({},Zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fl=Bt($c),ir=_({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ta}),Yc=Bt(ir),Kc=_({},Ke,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qc=Bt(Kc),Wc=_({},Zs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),io=Bt(Wc),gn=_({},Ke,{newState:0,oldState:0}),Xc=Bt(gn),Zc=[9,13,27,32],Ci=si&&"CompositionEvent"in window,d=null;si&&"documentMode"in document&&(d=document.documentMode);var y=si&&"TextEvent"in window&&!d,T=si&&(!Ci||d&&8<d&&11>=d),C=" ",G=!1;function X(r,s){switch(r){case"keyup":return Zc.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ce(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ze=!1;function Ot(r,s){switch(r){case"compositionend":return ce(s);case"keypress":return s.which!==32?null:(G=!0,C);case"textInput":return r=s.data,r===C&&G?null:r;default:return null}}function Be(r,s){if(ze)return r==="compositionend"||!Ci&&X(r,s)?(r=Vl(),nr=Hr=wi=null,ze=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return T&&s.locale!=="ko"?null:s.data;default:return null}}var jt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dt(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s==="input"?!!jt[r.type]:s==="textarea"}function rr(r,s,l,c){er?tr?tr.push(c):tr=[c]:er=c,s=Uh(s,"onChange"),0<s.length&&(l=new Wa("onChange","change",null,l,c),r.push({event:l,listeners:s}))}var Wt=null,Ri=null;function Hl(r){gE(r,0)}function Jc(r){var s=vi(r);if(Ml(s))return r}function Vy(r,s){if(r==="change")return s}var Uy=!1;if(si){var $f;if(si){var Yf="oninput"in document;if(!Yf){var zy=document.createElement("div");zy.setAttribute("oninput","return;"),Yf=typeof zy.oninput=="function"}$f=Yf}else $f=!1;Uy=$f&&(!document.documentMode||9<document.documentMode)}function By(){Wt&&(Wt.detachEvent("onpropertychange",jy),Ri=Wt=null)}function jy(r){if(r.propertyName==="value"&&Jc(Ri)){var s=[];rr(s,Ri,r,Hn(r)),zc(Hl,s)}}function K1(r,s,l){r==="focusin"?(By(),Wt=s,Ri=l,Wt.attachEvent("onpropertychange",jy)):r==="focusout"&&By()}function Q1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Jc(Ri)}function W1(r,s){if(r==="click")return Jc(s)}function X1(r,s){if(r==="input"||r==="change")return Jc(s)}function Z1(r,s){return r===s&&(r!==0||1/r===1/s)||r!==r&&s!==s}var Rn=typeof Object.is=="function"?Object.is:Z1;function ql(r,s){if(Rn(r,s))return!0;if(typeof r!="object"||r===null||typeof s!="object"||s===null)return!1;var l=Object.keys(r),c=Object.keys(s);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var p=l[c];if(!ni.call(s,p)||!Rn(r[p],s[p]))return!1}return!0}function Fy(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Hy(r,s){var l=Fy(r);r=0;for(var c;l;){if(l.nodeType===3){if(c=r+l.textContent.length,r<=s&&c>=s)return{node:l,offset:s-r};r=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Fy(l)}}function qy(r,s){return r&&s?r===s?!0:r&&r.nodeType===3?!1:s&&s.nodeType===3?qy(r,s.parentNode):"contains"in r?r.contains(s):r.compareDocumentPosition?!!(r.compareDocumentPosition(s)&16):!1:!1}function Gy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var s=Gs(r.document);s instanceof r.HTMLIFrameElement;){try{var l=typeof s.contentWindow.location.href=="string"}catch{l=!1}if(l)r=s.contentWindow;else break;s=Gs(r.document)}return s}function Kf(r){var s=r&&r.nodeName&&r.nodeName.toLowerCase();return s&&(s==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||s==="textarea"||r.contentEditable==="true")}var J1=si&&"documentMode"in document&&11>=document.documentMode,ro=null,Qf=null,Gl=null,Wf=!1;function $y(r,s,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Wf||ro==null||ro!==Gs(c)||(c=ro,"selectionStart"in c&&Kf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Gl&&ql(Gl,c)||(Gl=c,c=Uh(Qf,"onSelect"),0<c.length&&(s=new Wa("onSelect","select",null,s,l),r.push({event:s,listeners:c}),s.target=ro)))}function na(r,s){var l={};return l[r.toLowerCase()]=s.toLowerCase(),l["Webkit"+r]="webkit"+s,l["Moz"+r]="moz"+s,l}var so={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionrun:na("Transition","TransitionRun"),transitionstart:na("Transition","TransitionStart"),transitioncancel:na("Transition","TransitionCancel"),transitionend:na("Transition","TransitionEnd")},Xf={},Yy={};si&&(Yy=document.createElement("div").style,"AnimationEvent"in window||(delete so.animationend.animation,delete so.animationiteration.animation,delete so.animationstart.animation),"TransitionEvent"in window||delete so.transitionend.transition);function ia(r){if(Xf[r])return Xf[r];if(!so[r])return r;var s=so[r],l;for(l in s)if(s.hasOwnProperty(l)&&l in Yy)return Xf[r]=s[l];return r}var Ky=ia("animationend"),Qy=ia("animationiteration"),Wy=ia("animationstart"),eR=ia("transitionrun"),tR=ia("transitionstart"),nR=ia("transitioncancel"),Xy=ia("transitionend"),Zy=new Map,Zf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zf.push("scrollEnd");function ai(r,s){Zy.set(r,s),ri(s,[r])}var Jy=new WeakMap;function $n(r,s){if(typeof r=="object"&&r!==null){var l=Jy.get(r);return l!==void 0?l:(s={value:r,source:s,stack:Ya(s)},Jy.set(r,s),s)}return{value:r,source:s,stack:Ya(s)}}var Yn=[],ao=0,Jf=0;function eh(){for(var r=ao,s=Jf=ao=0;s<r;){var l=Yn[s];Yn[s++]=null;var c=Yn[s];Yn[s++]=null;var p=Yn[s];Yn[s++]=null;var g=Yn[s];if(Yn[s++]=null,c!==null&&p!==null){var w=c.pending;w===null?p.next=p:(p.next=w.next,w.next=p),c.pending=p}g!==0&&ev(l,p,g)}}function th(r,s,l,c){Yn[ao++]=r,Yn[ao++]=s,Yn[ao++]=l,Yn[ao++]=c,Jf|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function ep(r,s,l,c){return th(r,s,l,c),nh(r)}function oo(r,s){return th(r,null,null,s),nh(r)}function ev(r,s,l){r.lanes|=l;var c=r.alternate;c!==null&&(c.lanes|=l);for(var p=!1,g=r.return;g!==null;)g.childLanes|=l,c=g.alternate,c!==null&&(c.childLanes|=l),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(p=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,p&&s!==null&&(p=31-rn(l),r=g.hiddenUpdates,c=r[p],c===null?r[p]=[s]:c.push(s),s.lane=l|536870912),g):null}function nh(r){if(50<gu)throw gu=0,am=null,Error(i(185));for(var s=r.return;s!==null;)r=s,s=r.return;return r.tag===3?r.stateNode:null}var lo={};function iR(r,s,l,c){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(r,s,l,c){return new iR(r,s,l,c)}function tp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function sr(r,s){var l=r.alternate;return l===null?(l=In(r.tag,s,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=s,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,s=r.dependencies,l.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function tv(r,s){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=s,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,s=l.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),r}function ih(r,s,l,c,p,g){var w=0;if(c=r,typeof r=="function")tp(r)&&(w=1);else if(typeof r=="string")w=sI(r,l,fe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case I:return r=In(31,l,s,p),r.elementType=I,r.lanes=g,r;case S:return ra(l.children,p,g,s);case D:w=8,p|=24;break;case L:return r=In(12,l,s,p|2),r.elementType=L,r.lanes=g,r;case Z:return r=In(13,l,s,p),r.elementType=Z,r.lanes=g,r;case ue:return r=In(19,l,s,p),r.elementType=ue,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case M:case j:w=10;break e;case H:w=9;break e;case ee:w=11;break e;case P:w=14;break e;case R:w=16,c=null;break e}w=29,l=Error(i(130,r===null?"null":typeof r,"")),c=null}return s=In(w,l,s,p),s.elementType=r,s.type=c,s.lanes=g,s}function ra(r,s,l,c){return r=In(7,r,c,s),r.lanes=l,r}function np(r,s,l){return r=In(6,r,null,s),r.lanes=l,r}function ip(r,s,l){return s=In(4,r.children!==null?r.children:[],r.key,s),s.lanes=l,s.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},s}var uo=[],co=0,rh=null,sh=0,Kn=[],Qn=0,sa=null,ar=1,or="";function aa(r,s){uo[co++]=sh,uo[co++]=rh,rh=r,sh=s}function nv(r,s,l){Kn[Qn++]=ar,Kn[Qn++]=or,Kn[Qn++]=sa,sa=r;var c=ar;r=or;var p=32-rn(c)-1;c&=~(1<<p),l+=1;var g=32-rn(s)+p;if(30<g){var w=p-p%5;g=(c&(1<<w)-1).toString(32),c>>=w,p-=w,ar=1<<32-rn(s)+p|l<<p|c,or=g+r}else ar=1<<g|l<<p|c,or=r}function rp(r){r.return!==null&&(aa(r,1),nv(r,1,0))}function sp(r){for(;r===rh;)rh=uo[--co],uo[co]=null,sh=uo[--co],uo[co]=null;for(;r===sa;)sa=Kn[--Qn],Kn[Qn]=null,or=Kn[--Qn],Kn[Qn]=null,ar=Kn[--Qn],Kn[Qn]=null}var _n=null,gt=null,Ye=!1,oa=null,Ii=!1,ap=Error(i(519));function la(r){var s=Error(i(418,""));throw Kl($n(s,r)),ap}function iv(r){var s=r.stateNode,l=r.type,c=r.memoizedProps;switch(s[Nt]=r,s[bt]=c,l){case"dialog":Pe("cancel",s),Pe("close",s);break;case"iframe":case"object":case"embed":Pe("load",s);break;case"video":case"audio":for(l=0;l<yu.length;l++)Pe(yu[l],s);break;case"source":Pe("error",s);break;case"img":case"image":case"link":Pe("error",s),Pe("load",s);break;case"details":Pe("toggle",s);break;case"input":Pe("invalid",s),$s(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Ka(s);break;case"select":Pe("invalid",s);break;case"textarea":Pe("invalid",s),Ys(s,c.value,c.defaultValue,c.children),Ka(s)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||s.textContent===""+l||c.suppressHydrationWarning===!0||EE(s.textContent,l)?(c.popover!=null&&(Pe("beforetoggle",s),Pe("toggle",s)),c.onScroll!=null&&Pe("scroll",s),c.onScrollEnd!=null&&Pe("scrollend",s),c.onClick!=null&&(s.onclick=zh),s=!0):s=!1,s||la(r)}function rv(r){for(_n=r.return;_n;)switch(_n.tag){case 5:case 13:Ii=!1;return;case 27:case 3:Ii=!0;return;default:_n=_n.return}}function $l(r){if(r!==_n)return!1;if(!Ye)return rv(r),Ye=!0,!1;var s=r.tag,l;if((l=s!==3&&s!==27)&&((l=s===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||wm(r.type,r.memoizedProps)),l=!l),l&&gt&&la(r),rv(r),s===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));e:{for(r=r.nextSibling,s=0;r;){if(r.nodeType===8)if(l=r.data,l==="/$"){if(s===0){gt=li(r.nextSibling);break e}s--}else l!=="$"&&l!=="$!"&&l!=="$?"||s++;r=r.nextSibling}gt=null}}else s===27?(s=gt,ss(r.type)?(r=Cm,Cm=null,gt=r):gt=s):gt=_n?li(r.stateNode.nextSibling):null;return!0}function Yl(){gt=_n=null,Ye=!1}function sv(){var r=oa;return r!==null&&(Tn===null?Tn=r:Tn.push.apply(Tn,r),oa=null),r}function Kl(r){oa===null?oa=[r]:oa.push(r)}var op=te(null),ua=null,lr=null;function qr(r,s,l){se(op,s._currentValue),s._currentValue=l}function ur(r){r._currentValue=op.current,ae(op)}function lp(r,s,l){for(;r!==null;){var c=r.alternate;if((r.childLanes&s)!==s?(r.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),r===l)break;r=r.return}}function up(r,s,l,c){var p=r.child;for(p!==null&&(p.return=r);p!==null;){var g=p.dependencies;if(g!==null){var w=p.child;g=g.firstContext;e:for(;g!==null;){var b=g;g=p;for(var V=0;V<s.length;V++)if(b.context===s[V]){g.lanes|=l,b=g.alternate,b!==null&&(b.lanes|=l),lp(g.return,l,r),c||(w=null);break e}g=b.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(i(341));w.lanes|=l,g=w.alternate,g!==null&&(g.lanes|=l),lp(w,l,r),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===r){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function Ql(r,s,l,c){r=null;for(var p=s,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var b=p.type;Rn(p.pendingProps.value,w.value)||(r!==null?r.push(b):r=[b])}}else if(p===St.current){if(w=p.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(r!==null?r.push(bu):r=[bu])}p=p.return}r!==null&&up(s,r,l,c),s.flags|=262144}function ah(r){for(r=r.firstContext;r!==null;){if(!Rn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function ca(r){ua=r,lr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function sn(r){return av(ua,r)}function oh(r,s){return ua===null&&ca(r),av(r,s)}function av(r,s){var l=s._currentValue;if(s={context:s,memoizedValue:l,next:null},lr===null){if(r===null)throw Error(i(308));lr=s,r.dependencies={lanes:0,firstContext:s},r.flags|=524288}else lr=lr.next=s;return l}var rR=typeof AbortController<"u"?AbortController:function(){var r=[],s=this.signal={aborted:!1,addEventListener:function(l,c){r.push(c)}};this.abort=function(){s.aborted=!0,r.forEach(function(l){return l()})}},sR=n.unstable_scheduleCallback,aR=n.unstable_NormalPriority,Mt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cp(){return{controller:new rR,data:new Map,refCount:0}}function Wl(r){r.refCount--,r.refCount===0&&sR(aR,function(){r.controller.abort()})}var Xl=null,hp=0,ho=0,fo=null;function oR(r,s){if(Xl===null){var l=Xl=[];hp=0,ho=fm(),fo={status:"pending",value:void 0,then:function(c){l.push(c)}}}return hp++,s.then(ov,ov),s}function ov(){if(--hp===0&&Xl!==null){fo!==null&&(fo.status="fulfilled");var r=Xl;Xl=null,ho=0,fo=null;for(var s=0;s<r.length;s++)(0,r[s])()}}function lR(r,s){var l=[],c={status:"pending",value:null,reason:null,then:function(p){l.push(p)}};return r.then(function(){c.status="fulfilled",c.value=s;for(var p=0;p<l.length;p++)(0,l[p])(s)},function(p){for(c.status="rejected",c.reason=p,p=0;p<l.length;p++)(0,l[p])(void 0)}),c}var lv=$.S;$.S=function(r,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&oR(r,s),lv!==null&&lv(r,s)};var ha=te(null);function dp(){var r=ha.current;return r!==null?r:ot.pooledCache}function lh(r,s){s===null?se(ha,ha.current):se(ha,s.pool)}function uv(){var r=dp();return r===null?null:{parent:Mt._currentValue,pool:r}}var Zl=Error(i(460)),cv=Error(i(474)),uh=Error(i(542)),fp={then:function(){}};function hv(r){return r=r.status,r==="fulfilled"||r==="rejected"}function ch(){}function dv(r,s,l){switch(l=r[l],l===void 0?r.push(s):l!==s&&(s.then(ch,ch),s=l),s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,pv(r),r;default:if(typeof s.status=="string")s.then(ch,ch);else{if(r=ot,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=s,r.status="pending",r.then(function(c){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=c}},function(c){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw r=s.reason,pv(r),r}throw Jl=s,Zl}}var Jl=null;function fv(){if(Jl===null)throw Error(i(459));var r=Jl;return Jl=null,r}function pv(r){if(r===Zl||r===uh)throw Error(i(483))}var Gr=!1;function pp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mp(r,s){r=r.updateQueue,s.updateQueue===r&&(s.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function $r(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Yr(r,s,l){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Je&2)!==0){var p=c.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),c.pending=s,s=nh(r),ev(r,null,l),s}return th(r,c,s,l),nh(r)}function eu(r,s,l){if(s=s.updateQueue,s!==null&&(s=s.shared,(l&4194048)!==0)){var c=s.lanes;c&=r.pendingLanes,l|=c,s.lanes=l,Il(r,l)}}function gp(r,s){var l=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var p=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var w={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?p=g=w:g=g.next=w,l=l.next}while(l!==null);g===null?p=g=s:g=g.next=s}else p=g=s;l={baseState:c.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=s:r.next=s,l.lastBaseUpdate=s}var _p=!1;function tu(){if(_p){var r=fo;if(r!==null)throw r}}function nu(r,s,l,c){_p=!1;var p=r.updateQueue;Gr=!1;var g=p.firstBaseUpdate,w=p.lastBaseUpdate,b=p.shared.pending;if(b!==null){p.shared.pending=null;var V=b,K=V.next;V.next=null,w===null?g=K:w.next=K,w=V;var J=r.alternate;J!==null&&(J=J.updateQueue,b=J.lastBaseUpdate,b!==w&&(b===null?J.firstBaseUpdate=K:b.next=K,J.lastBaseUpdate=V))}if(g!==null){var ie=p.baseState;w=0,J=K=V=null,b=g;do{var Q=b.lane&-536870913,W=Q!==b.lane;if(W?(je&Q)===Q:(c&Q)===Q){Q!==0&&Q===ho&&(_p=!0),J!==null&&(J=J.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var be=r,ve=b;Q=s;var rt=l;switch(ve.tag){case 1:if(be=ve.payload,typeof be=="function"){ie=be.call(rt,ie,Q);break e}ie=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=ve.payload,Q=typeof be=="function"?be.call(rt,ie,Q):be,Q==null)break e;ie=_({},ie,Q);break e;case 2:Gr=!0}}Q=b.callback,Q!==null&&(r.flags|=64,W&&(r.flags|=8192),W=p.callbacks,W===null?p.callbacks=[Q]:W.push(Q))}else W={lane:Q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},J===null?(K=J=W,V=ie):J=J.next=W,w|=Q;if(b=b.next,b===null){if(b=p.shared.pending,b===null)break;W=b,b=W.next,W.next=null,p.lastBaseUpdate=W,p.shared.pending=null}}while(!0);J===null&&(V=ie),p.baseState=V,p.firstBaseUpdate=K,p.lastBaseUpdate=J,g===null&&(p.shared.lanes=0),ts|=w,r.lanes=w,r.memoizedState=ie}}function mv(r,s){if(typeof r!="function")throw Error(i(191,r));r.call(s)}function gv(r,s){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)mv(l[r],s)}var po=te(null),hh=te(0);function _v(r,s){r=gr,se(hh,r),se(po,s),gr=r|s.baseLanes}function yp(){se(hh,gr),se(po,po.current)}function vp(){gr=hh.current,ae(po),ae(hh)}var Kr=0,Ne=null,nt=null,Ct=null,dh=!1,mo=!1,da=!1,fh=0,iu=0,go=null,uR=0;function Et(){throw Error(i(321))}function Ep(r,s){if(s===null)return!1;for(var l=0;l<s.length&&l<r.length;l++)if(!Rn(r[l],s[l]))return!1;return!0}function Tp(r,s,l,c,p,g){return Kr=g,Ne=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=r===null||r.memoizedState===null?e0:t0,da=!1,g=l(c,p),da=!1,mo&&(g=vv(s,l,c,p)),yv(r),g}function yv(r){$.H=vh;var s=nt!==null&&nt.next!==null;if(Kr=0,Ct=nt=Ne=null,dh=!1,iu=0,go=null,s)throw Error(i(300));r===null||Ft||(r=r.dependencies,r!==null&&ah(r)&&(Ft=!0))}function vv(r,s,l,c){Ne=r;var p=0;do{if(mo&&(go=null),iu=0,mo=!1,25<=p)throw Error(i(301));if(p+=1,Ct=nt=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}$.H=gR,g=s(l,c)}while(mo);return g}function cR(){var r=$.H,s=r.useState()[0];return s=typeof s.then=="function"?ru(s):s,r=r.useState()[0],(nt!==null?nt.memoizedState:null)!==r&&(Ne.flags|=1024),s}function wp(){var r=fh!==0;return fh=0,r}function Sp(r,s,l){s.updateQueue=r.updateQueue,s.flags&=-2053,r.lanes&=~l}function bp(r){if(dh){for(r=r.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}dh=!1}Kr=0,Ct=nt=Ne=null,mo=!1,iu=fh=0,go=null}function vn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Ne.memoizedState=Ct=r:Ct=Ct.next=r,Ct}function Rt(){if(nt===null){var r=Ne.alternate;r=r!==null?r.memoizedState:null}else r=nt.next;var s=Ct===null?Ne.memoizedState:Ct.next;if(s!==null)Ct=s,nt=r;else{if(r===null)throw Ne.alternate===null?Error(i(467)):Error(i(310));nt=r,r={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Ct===null?Ne.memoizedState=Ct=r:Ct=Ct.next=r}return Ct}function Ap(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ru(r){var s=iu;return iu+=1,go===null&&(go=[]),r=dv(go,r,s),s=Ne,(Ct===null?s.memoizedState:Ct.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?e0:t0),r}function ph(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ru(r);if(r.$$typeof===j)return sn(r)}throw Error(i(438,String(r)))}function Cp(r){var s=null,l=Ne.updateQueue;if(l!==null&&(s=l.memoCache),s==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),l===null&&(l=Ap(),Ne.updateQueue=l),l.memoCache=s,l=s.data[s.index],l===void 0)for(l=s.data[s.index]=Array(r),c=0;c<r;c++)l[c]=x;return s.index++,l}function cr(r,s){return typeof s=="function"?s(r):s}function mh(r){var s=Rt();return Rp(s,nt,r)}function Rp(r,s,l){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var p=r.baseQueue,g=c.pending;if(g!==null){if(p!==null){var w=p.next;p.next=g.next,g.next=w}s.baseQueue=p=g,c.pending=null}if(g=r.baseState,p===null)r.memoizedState=g;else{s=p.next;var b=w=null,V=null,K=s,J=!1;do{var ie=K.lane&-536870913;if(ie!==K.lane?(je&ie)===ie:(Kr&ie)===ie){var Q=K.revertLane;if(Q===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),ie===ho&&(J=!0);else if((Kr&Q)===Q){K=K.next,Q===ho&&(J=!0);continue}else ie={lane:0,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},V===null?(b=V=ie,w=g):V=V.next=ie,Ne.lanes|=Q,ts|=Q;ie=K.action,da&&l(g,ie),g=K.hasEagerState?K.eagerState:l(g,ie)}else Q={lane:ie,revertLane:K.revertLane,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},V===null?(b=V=Q,w=g):V=V.next=Q,Ne.lanes|=ie,ts|=ie;K=K.next}while(K!==null&&K!==s);if(V===null?w=g:V.next=b,!Rn(g,r.memoizedState)&&(Ft=!0,J&&(l=fo,l!==null)))throw l;r.memoizedState=g,r.baseState=w,r.baseQueue=V,c.lastRenderedState=g}return p===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function Ip(r){var s=Rt(),l=s.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var c=l.dispatch,p=l.pending,g=s.memoizedState;if(p!==null){l.pending=null;var w=p=p.next;do g=r(g,w.action),w=w.next;while(w!==p);Rn(g,s.memoizedState)||(Ft=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),l.lastRenderedState=g}return[g,c]}function Ev(r,s,l){var c=Ne,p=Rt(),g=Ye;if(g){if(l===void 0)throw Error(i(407));l=l()}else l=s();var w=!Rn((nt||p).memoizedState,l);w&&(p.memoizedState=l,Ft=!0),p=p.queue;var b=Sv.bind(null,c,p,r);if(su(2048,8,b,[r]),p.getSnapshot!==s||w||Ct!==null&&Ct.memoizedState.tag&1){if(c.flags|=2048,_o(9,gh(),wv.bind(null,c,p,l,s),null),ot===null)throw Error(i(349));g||(Kr&124)!==0||Tv(c,s,l)}return l}function Tv(r,s,l){r.flags|=16384,r={getSnapshot:s,value:l},s=Ne.updateQueue,s===null?(s=Ap(),Ne.updateQueue=s,s.stores=[r]):(l=s.stores,l===null?s.stores=[r]:l.push(r))}function wv(r,s,l,c){s.value=l,s.getSnapshot=c,bv(s)&&Av(r)}function Sv(r,s,l){return l(function(){bv(s)&&Av(r)})}function bv(r){var s=r.getSnapshot;r=r.value;try{var l=s();return!Rn(r,l)}catch{return!0}}function Av(r){var s=oo(r,2);s!==null&&Mn(s,r,2)}function xp(r){var s=vn();if(typeof r=="function"){var l=r;if(r=l(),da){An(!0);try{l()}finally{An(!1)}}}return s.memoizedState=s.baseState=r,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:r},s}function Cv(r,s,l,c){return r.baseState=l,Rp(r,nt,typeof c=="function"?c:cr)}function hR(r,s,l,c,p){if(yh(r))throw Error(i(485));if(r=s.action,r!==null){var g={payload:p,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};$.T!==null?l(!0):g.isTransition=!1,c(g),l=s.pending,l===null?(g.next=s.pending=g,Rv(s,g)):(g.next=l.next,s.pending=l.next=g)}}function Rv(r,s){var l=s.action,c=s.payload,p=r.state;if(s.isTransition){var g=$.T,w={};$.T=w;try{var b=l(p,c),V=$.S;V!==null&&V(w,b),Iv(r,s,b)}catch(K){Np(r,s,K)}finally{$.T=g}}else try{g=l(p,c),Iv(r,s,g)}catch(K){Np(r,s,K)}}function Iv(r,s,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){xv(r,s,c)},function(c){return Np(r,s,c)}):xv(r,s,l)}function xv(r,s,l){s.status="fulfilled",s.value=l,Nv(s),r.state=l,s=r.pending,s!==null&&(l=s.next,l===s?r.pending=null:(l=l.next,s.next=l,Rv(r,l)))}function Np(r,s,l){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=l,Nv(s),s=s.next;while(s!==c)}r.action=null}function Nv(r){r=r.listeners;for(var s=0;s<r.length;s++)(0,r[s])()}function Ov(r,s){return s}function Dv(r,s){if(Ye){var l=ot.formState;if(l!==null){e:{var c=Ne;if(Ye){if(gt){t:{for(var p=gt,g=Ii;p.nodeType!==8;){if(!g){p=null;break t}if(p=li(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){gt=li(p.nextSibling),c=p.data==="F!";break e}}la(c)}c=!1}c&&(s=l[0])}}return l=vn(),l.memoizedState=l.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ov,lastRenderedState:s},l.queue=c,l=Xv.bind(null,Ne,c),c.dispatch=l,c=xp(!1),g=kp.bind(null,Ne,!1,c.queue),c=vn(),p={state:s,dispatch:null,action:r,pending:null},c.queue=p,l=hR.bind(null,Ne,p,g,l),p.dispatch=l,c.memoizedState=r,[s,l,!1]}function Mv(r){var s=Rt();return Pv(s,nt,r)}function Pv(r,s,l){if(s=Rp(r,s,Ov)[0],r=mh(cr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=ru(s)}catch(w){throw w===Zl?uh:w}else c=s;s=Rt();var p=s.queue,g=p.dispatch;return l!==s.memoizedState&&(Ne.flags|=2048,_o(9,gh(),dR.bind(null,p,l),null)),[c,g,r]}function dR(r,s){r.action=s}function kv(r){var s=Rt(),l=nt;if(l!==null)return Pv(s,l,r);Rt(),s=s.memoizedState,l=Rt();var c=l.queue.dispatch;return l.memoizedState=r,[s,c,!1]}function _o(r,s,l,c){return r={tag:r,create:l,deps:c,inst:s,next:null},s=Ne.updateQueue,s===null&&(s=Ap(),Ne.updateQueue=s),l=s.lastEffect,l===null?s.lastEffect=r.next=r:(c=l.next,l.next=r,r.next=c,s.lastEffect=r),r}function gh(){return{destroy:void 0,resource:void 0}}function Lv(){return Rt().memoizedState}function _h(r,s,l,c){var p=vn();c=c===void 0?null:c,Ne.flags|=r,p.memoizedState=_o(1|s,gh(),l,c)}function su(r,s,l,c){var p=Rt();c=c===void 0?null:c;var g=p.memoizedState.inst;nt!==null&&c!==null&&Ep(c,nt.memoizedState.deps)?p.memoizedState=_o(s,g,l,c):(Ne.flags|=r,p.memoizedState=_o(1|s,g,l,c))}function Vv(r,s){_h(8390656,8,r,s)}function Uv(r,s){su(2048,8,r,s)}function zv(r,s){return su(4,2,r,s)}function Bv(r,s){return su(4,4,r,s)}function jv(r,s){if(typeof s=="function"){r=r();var l=s(r);return function(){typeof l=="function"?l():s(null)}}if(s!=null)return r=r(),s.current=r,function(){s.current=null}}function Fv(r,s,l){l=l!=null?l.concat([r]):null,su(4,4,jv.bind(null,s,r),l)}function Op(){}function Hv(r,s){var l=Rt();s=s===void 0?null:s;var c=l.memoizedState;return s!==null&&Ep(s,c[1])?c[0]:(l.memoizedState=[r,s],r)}function qv(r,s){var l=Rt();s=s===void 0?null:s;var c=l.memoizedState;if(s!==null&&Ep(s,c[1]))return c[0];if(c=r(),da){An(!0);try{r()}finally{An(!1)}}return l.memoizedState=[c,s],c}function Dp(r,s,l){return l===void 0||(Kr&1073741824)!==0?r.memoizedState=s:(r.memoizedState=l,r=Y0(),Ne.lanes|=r,ts|=r,l)}function Gv(r,s,l,c){return Rn(l,s)?l:po.current!==null?(r=Dp(r,l,c),Rn(r,s)||(Ft=!0),r):(Kr&42)===0?(Ft=!0,r.memoizedState=l):(r=Y0(),Ne.lanes|=r,ts|=r,s)}function $v(r,s,l,c,p){var g=oe.p;oe.p=g!==0&&8>g?g:8;var w=$.T,b={};$.T=b,kp(r,!1,s,l);try{var V=p(),K=$.S;if(K!==null&&K(b,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var J=lR(V,c);au(r,s,J,Dn(r))}else au(r,s,c,Dn(r))}catch(ie){au(r,s,{then:function(){},status:"rejected",reason:ie},Dn())}finally{oe.p=g,$.T=w}}function fR(){}function Mp(r,s,l,c){if(r.tag!==5)throw Error(i(476));var p=Yv(r).queue;$v(r,p,s,de,l===null?fR:function(){return Kv(r),l(c)})}function Yv(r){var s=r.memoizedState;if(s!==null)return s;s={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:de},next:null};var l={};return s.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:l},next:null},r.memoizedState=s,r=r.alternate,r!==null&&(r.memoizedState=s),s}function Kv(r){var s=Yv(r).next.queue;au(r,s,{},Dn())}function Pp(){return sn(bu)}function Qv(){return Rt().memoizedState}function Wv(){return Rt().memoizedState}function pR(r){for(var s=r.return;s!==null;){switch(s.tag){case 24:case 3:var l=Dn();r=$r(l);var c=Yr(s,r,l);c!==null&&(Mn(c,s,l),eu(c,s,l)),s={cache:cp()},r.payload=s;return}s=s.return}}function mR(r,s,l){var c=Dn();l={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},yh(r)?Zv(s,l):(l=ep(r,s,l,c),l!==null&&(Mn(l,r,c),Jv(l,s,c)))}function Xv(r,s,l){var c=Dn();au(r,s,l,c)}function au(r,s,l,c){var p={lane:c,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(yh(r))Zv(s,p);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,b=g(w,l);if(p.hasEagerState=!0,p.eagerState=b,Rn(b,w))return th(r,s,p,0),ot===null&&eh(),!1}catch{}finally{}if(l=ep(r,s,p,c),l!==null)return Mn(l,r,c),Jv(l,s,c),!0}return!1}function kp(r,s,l,c){if(c={lane:2,revertLane:fm(),action:c,hasEagerState:!1,eagerState:null,next:null},yh(r)){if(s)throw Error(i(479))}else s=ep(r,l,c,2),s!==null&&Mn(s,r,2)}function yh(r){var s=r.alternate;return r===Ne||s!==null&&s===Ne}function Zv(r,s){mo=dh=!0;var l=r.pending;l===null?s.next=s:(s.next=l.next,l.next=s),r.pending=s}function Jv(r,s,l){if((l&4194048)!==0){var c=s.lanes;c&=r.pendingLanes,l|=c,s.lanes=l,Il(r,l)}}var vh={readContext:sn,use:ph,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et},e0={readContext:sn,use:ph,useCallback:function(r,s){return vn().memoizedState=[r,s===void 0?null:s],r},useContext:sn,useEffect:Vv,useImperativeHandle:function(r,s,l){l=l!=null?l.concat([r]):null,_h(4194308,4,jv.bind(null,s,r),l)},useLayoutEffect:function(r,s){return _h(4194308,4,r,s)},useInsertionEffect:function(r,s){_h(4,2,r,s)},useMemo:function(r,s){var l=vn();s=s===void 0?null:s;var c=r();if(da){An(!0);try{r()}finally{An(!1)}}return l.memoizedState=[c,s],c},useReducer:function(r,s,l){var c=vn();if(l!==void 0){var p=l(s);if(da){An(!0);try{l(s)}finally{An(!1)}}}else p=s;return c.memoizedState=c.baseState=p,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:p},c.queue=r,r=r.dispatch=mR.bind(null,Ne,r),[c.memoizedState,r]},useRef:function(r){var s=vn();return r={current:r},s.memoizedState=r},useState:function(r){r=xp(r);var s=r.queue,l=Xv.bind(null,Ne,s);return s.dispatch=l,[r.memoizedState,l]},useDebugValue:Op,useDeferredValue:function(r,s){var l=vn();return Dp(l,r,s)},useTransition:function(){var r=xp(!1);return r=$v.bind(null,Ne,r.queue,!0,!1),vn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,s,l){var c=Ne,p=vn();if(Ye){if(l===void 0)throw Error(i(407));l=l()}else{if(l=s(),ot===null)throw Error(i(349));(je&124)!==0||Tv(c,s,l)}p.memoizedState=l;var g={value:l,getSnapshot:s};return p.queue=g,Vv(Sv.bind(null,c,g,r),[r]),c.flags|=2048,_o(9,gh(),wv.bind(null,c,g,l,s),null),l},useId:function(){var r=vn(),s=ot.identifierPrefix;if(Ye){var l=or,c=ar;l=(c&~(1<<32-rn(c)-1)).toString(32)+l,s=""+s+"R"+l,l=fh++,0<l&&(s+="H"+l.toString(32)),s+=""}else l=uR++,s=""+s+"r"+l.toString(32)+"";return r.memoizedState=s},useHostTransitionStatus:Pp,useFormState:Dv,useActionState:Dv,useOptimistic:function(r){var s=vn();s.memoizedState=s.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=l,s=kp.bind(null,Ne,!0,l),l.dispatch=s,[r,s]},useMemoCache:Cp,useCacheRefresh:function(){return vn().memoizedState=pR.bind(null,Ne)}},t0={readContext:sn,use:ph,useCallback:Hv,useContext:sn,useEffect:Uv,useImperativeHandle:Fv,useInsertionEffect:zv,useLayoutEffect:Bv,useMemo:qv,useReducer:mh,useRef:Lv,useState:function(){return mh(cr)},useDebugValue:Op,useDeferredValue:function(r,s){var l=Rt();return Gv(l,nt.memoizedState,r,s)},useTransition:function(){var r=mh(cr)[0],s=Rt().memoizedState;return[typeof r=="boolean"?r:ru(r),s]},useSyncExternalStore:Ev,useId:Qv,useHostTransitionStatus:Pp,useFormState:Mv,useActionState:Mv,useOptimistic:function(r,s){var l=Rt();return Cv(l,nt,r,s)},useMemoCache:Cp,useCacheRefresh:Wv},gR={readContext:sn,use:ph,useCallback:Hv,useContext:sn,useEffect:Uv,useImperativeHandle:Fv,useInsertionEffect:zv,useLayoutEffect:Bv,useMemo:qv,useReducer:Ip,useRef:Lv,useState:function(){return Ip(cr)},useDebugValue:Op,useDeferredValue:function(r,s){var l=Rt();return nt===null?Dp(l,r,s):Gv(l,nt.memoizedState,r,s)},useTransition:function(){var r=Ip(cr)[0],s=Rt().memoizedState;return[typeof r=="boolean"?r:ru(r),s]},useSyncExternalStore:Ev,useId:Qv,useHostTransitionStatus:Pp,useFormState:kv,useActionState:kv,useOptimistic:function(r,s){var l=Rt();return nt!==null?Cv(l,nt,r,s):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:Cp,useCacheRefresh:Wv},yo=null,ou=0;function Eh(r){var s=ou;return ou+=1,yo===null&&(yo=[]),dv(yo,r,s)}function lu(r,s){s=s.props.ref,r.ref=s!==void 0?s:null}function Th(r,s){throw s.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(s),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":r)))}function n0(r){var s=r._init;return s(r._payload)}function i0(r){function s(F,z){if(r){var Y=F.deletions;Y===null?(F.deletions=[z],F.flags|=16):Y.push(z)}}function l(F,z){if(!r)return null;for(;z!==null;)s(F,z),z=z.sibling;return null}function c(F){for(var z=new Map;F!==null;)F.key!==null?z.set(F.key,F):z.set(F.index,F),F=F.sibling;return z}function p(F,z){return F=sr(F,z),F.index=0,F.sibling=null,F}function g(F,z,Y){return F.index=Y,r?(Y=F.alternate,Y!==null?(Y=Y.index,Y<z?(F.flags|=67108866,z):Y):(F.flags|=67108866,z)):(F.flags|=1048576,z)}function w(F){return r&&F.alternate===null&&(F.flags|=67108866),F}function b(F,z,Y,ne){return z===null||z.tag!==6?(z=np(Y,F.mode,ne),z.return=F,z):(z=p(z,Y),z.return=F,z)}function V(F,z,Y,ne){var me=Y.type;return me===S?J(F,z,Y.props.children,ne,Y.key):z!==null&&(z.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&n0(me)===z.type)?(z=p(z,Y.props),lu(z,Y),z.return=F,z):(z=ih(Y.type,Y.key,Y.props,null,F.mode,ne),lu(z,Y),z.return=F,z)}function K(F,z,Y,ne){return z===null||z.tag!==4||z.stateNode.containerInfo!==Y.containerInfo||z.stateNode.implementation!==Y.implementation?(z=ip(Y,F.mode,ne),z.return=F,z):(z=p(z,Y.children||[]),z.return=F,z)}function J(F,z,Y,ne,me){return z===null||z.tag!==7?(z=ra(Y,F.mode,ne,me),z.return=F,z):(z=p(z,Y),z.return=F,z)}function ie(F,z,Y){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=np(""+z,F.mode,Y),z.return=F,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case E:return Y=ih(z.type,z.key,z.props,null,F.mode,Y),lu(Y,z),Y.return=F,Y;case A:return z=ip(z,F.mode,Y),z.return=F,z;case R:var ne=z._init;return z=ne(z._payload),ie(F,z,Y)}if(Le(z)||U(z))return z=ra(z,F.mode,Y,null),z.return=F,z;if(typeof z.then=="function")return ie(F,Eh(z),Y);if(z.$$typeof===j)return ie(F,oh(F,z),Y);Th(F,z)}return null}function Q(F,z,Y,ne){var me=z!==null?z.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return me!==null?null:b(F,z,""+Y,ne);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:return Y.key===me?V(F,z,Y,ne):null;case A:return Y.key===me?K(F,z,Y,ne):null;case R:return me=Y._init,Y=me(Y._payload),Q(F,z,Y,ne)}if(Le(Y)||U(Y))return me!==null?null:J(F,z,Y,ne,null);if(typeof Y.then=="function")return Q(F,z,Eh(Y),ne);if(Y.$$typeof===j)return Q(F,z,oh(F,Y),ne);Th(F,Y)}return null}function W(F,z,Y,ne,me){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return F=F.get(Y)||null,b(z,F,""+ne,me);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case E:return F=F.get(ne.key===null?Y:ne.key)||null,V(z,F,ne,me);case A:return F=F.get(ne.key===null?Y:ne.key)||null,K(z,F,ne,me);case R:var De=ne._init;return ne=De(ne._payload),W(F,z,Y,ne,me)}if(Le(ne)||U(ne))return F=F.get(Y)||null,J(z,F,ne,me,null);if(typeof ne.then=="function")return W(F,z,Y,Eh(ne),me);if(ne.$$typeof===j)return W(F,z,Y,oh(z,ne),me);Th(z,ne)}return null}function be(F,z,Y,ne){for(var me=null,De=null,_e=z,Te=z=0,qt=null;_e!==null&&Te<Y.length;Te++){_e.index>Te?(qt=_e,_e=null):qt=_e.sibling;var Ge=Q(F,_e,Y[Te],ne);if(Ge===null){_e===null&&(_e=qt);break}r&&_e&&Ge.alternate===null&&s(F,_e),z=g(Ge,z,Te),De===null?me=Ge:De.sibling=Ge,De=Ge,_e=qt}if(Te===Y.length)return l(F,_e),Ye&&aa(F,Te),me;if(_e===null){for(;Te<Y.length;Te++)_e=ie(F,Y[Te],ne),_e!==null&&(z=g(_e,z,Te),De===null?me=_e:De.sibling=_e,De=_e);return Ye&&aa(F,Te),me}for(_e=c(_e);Te<Y.length;Te++)qt=W(_e,F,Te,Y[Te],ne),qt!==null&&(r&&qt.alternate!==null&&_e.delete(qt.key===null?Te:qt.key),z=g(qt,z,Te),De===null?me=qt:De.sibling=qt,De=qt);return r&&_e.forEach(function(cs){return s(F,cs)}),Ye&&aa(F,Te),me}function ve(F,z,Y,ne){if(Y==null)throw Error(i(151));for(var me=null,De=null,_e=z,Te=z=0,qt=null,Ge=Y.next();_e!==null&&!Ge.done;Te++,Ge=Y.next()){_e.index>Te?(qt=_e,_e=null):qt=_e.sibling;var cs=Q(F,_e,Ge.value,ne);if(cs===null){_e===null&&(_e=qt);break}r&&_e&&cs.alternate===null&&s(F,_e),z=g(cs,z,Te),De===null?me=cs:De.sibling=cs,De=cs,_e=qt}if(Ge.done)return l(F,_e),Ye&&aa(F,Te),me;if(_e===null){for(;!Ge.done;Te++,Ge=Y.next())Ge=ie(F,Ge.value,ne),Ge!==null&&(z=g(Ge,z,Te),De===null?me=Ge:De.sibling=Ge,De=Ge);return Ye&&aa(F,Te),me}for(_e=c(_e);!Ge.done;Te++,Ge=Y.next())Ge=W(_e,F,Te,Ge.value,ne),Ge!==null&&(r&&Ge.alternate!==null&&_e.delete(Ge.key===null?Te:Ge.key),z=g(Ge,z,Te),De===null?me=Ge:De.sibling=Ge,De=Ge);return r&&_e.forEach(function(_I){return s(F,_I)}),Ye&&aa(F,Te),me}function rt(F,z,Y,ne){if(typeof Y=="object"&&Y!==null&&Y.type===S&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case E:e:{for(var me=Y.key;z!==null;){if(z.key===me){if(me=Y.type,me===S){if(z.tag===7){l(F,z.sibling),ne=p(z,Y.props.children),ne.return=F,F=ne;break e}}else if(z.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===R&&n0(me)===z.type){l(F,z.sibling),ne=p(z,Y.props),lu(ne,Y),ne.return=F,F=ne;break e}l(F,z);break}else s(F,z);z=z.sibling}Y.type===S?(ne=ra(Y.props.children,F.mode,ne,Y.key),ne.return=F,F=ne):(ne=ih(Y.type,Y.key,Y.props,null,F.mode,ne),lu(ne,Y),ne.return=F,F=ne)}return w(F);case A:e:{for(me=Y.key;z!==null;){if(z.key===me)if(z.tag===4&&z.stateNode.containerInfo===Y.containerInfo&&z.stateNode.implementation===Y.implementation){l(F,z.sibling),ne=p(z,Y.children||[]),ne.return=F,F=ne;break e}else{l(F,z);break}else s(F,z);z=z.sibling}ne=ip(Y,F.mode,ne),ne.return=F,F=ne}return w(F);case R:return me=Y._init,Y=me(Y._payload),rt(F,z,Y,ne)}if(Le(Y))return be(F,z,Y,ne);if(U(Y)){if(me=U(Y),typeof me!="function")throw Error(i(150));return Y=me.call(Y),ve(F,z,Y,ne)}if(typeof Y.then=="function")return rt(F,z,Eh(Y),ne);if(Y.$$typeof===j)return rt(F,z,oh(F,Y),ne);Th(F,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,z!==null&&z.tag===6?(l(F,z.sibling),ne=p(z,Y),ne.return=F,F=ne):(l(F,z),ne=np(Y,F.mode,ne),ne.return=F,F=ne),w(F)):l(F,z)}return function(F,z,Y,ne){try{ou=0;var me=rt(F,z,Y,ne);return yo=null,me}catch(_e){if(_e===Zl||_e===uh)throw _e;var De=In(29,_e,null,F.mode);return De.lanes=ne,De.return=F,De}finally{}}}var vo=i0(!0),r0=i0(!1),Wn=te(null),xi=null;function Qr(r){var s=r.alternate;se(Pt,Pt.current&1),se(Wn,r),xi===null&&(s===null||po.current!==null||s.memoizedState!==null)&&(xi=r)}function s0(r){if(r.tag===22){if(se(Pt,Pt.current),se(Wn,r),xi===null){var s=r.alternate;s!==null&&s.memoizedState!==null&&(xi=r)}}else Wr()}function Wr(){se(Pt,Pt.current),se(Wn,Wn.current)}function hr(r){ae(Wn),xi===r&&(xi=null),ae(Pt)}var Pt=te(0);function wh(r){for(var s=r;s!==null;){if(s.tag===13){var l=s.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Am(l)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Lp(r,s,l,c){s=r.memoizedState,l=l(c,s),l=l==null?s:_({},s,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var Vp={enqueueSetState:function(r,s,l){r=r._reactInternals;var c=Dn(),p=$r(c);p.payload=s,l!=null&&(p.callback=l),s=Yr(r,p,c),s!==null&&(Mn(s,r,c),eu(s,r,c))},enqueueReplaceState:function(r,s,l){r=r._reactInternals;var c=Dn(),p=$r(c);p.tag=1,p.payload=s,l!=null&&(p.callback=l),s=Yr(r,p,c),s!==null&&(Mn(s,r,c),eu(s,r,c))},enqueueForceUpdate:function(r,s){r=r._reactInternals;var l=Dn(),c=$r(l);c.tag=2,s!=null&&(c.callback=s),s=Yr(r,c,l),s!==null&&(Mn(s,r,l),eu(s,r,l))}};function a0(r,s,l,c,p,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,g,w):s.prototype&&s.prototype.isPureReactComponent?!ql(l,c)||!ql(p,g):!0}function o0(r,s,l,c){r=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(l,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(l,c),s.state!==r&&Vp.enqueueReplaceState(s,s.state,null)}function fa(r,s){var l=s;if("ref"in s){l={};for(var c in s)c!=="ref"&&(l[c]=s[c])}if(r=r.defaultProps){l===s&&(l=_({},l));for(var p in r)l[p]===void 0&&(l[p]=r[p])}return l}var Sh=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)};function l0(r){Sh(r)}function u0(r){console.error(r)}function c0(r){Sh(r)}function bh(r,s){try{var l=r.onUncaughtError;l(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function h0(r,s,l){try{var c=r.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function Up(r,s,l){return l=$r(l),l.tag=3,l.payload={element:null},l.callback=function(){bh(r,s)},l}function d0(r){return r=$r(r),r.tag=3,r}function f0(r,s,l,c){var p=l.type.getDerivedStateFromError;if(typeof p=="function"){var g=c.value;r.payload=function(){return p(g)},r.callback=function(){h0(s,l,c)}}var w=l.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(r.callback=function(){h0(s,l,c),typeof p!="function"&&(ns===null?ns=new Set([this]):ns.add(this));var b=c.stack;this.componentDidCatch(c.value,{componentStack:b!==null?b:""})})}function _R(r,s,l,c,p){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=l.alternate,s!==null&&Ql(s,l,p,!0),l=Wn.current,l!==null){switch(l.tag){case 13:return xi===null?lm():l.alternate===null&&_t===0&&(_t=3),l.flags&=-257,l.flags|=65536,l.lanes=p,c===fp?l.flags|=16384:(s=l.updateQueue,s===null?l.updateQueue=new Set([c]):s.add(c),cm(r,c,p)),!1;case 22:return l.flags|=65536,c===fp?l.flags|=16384:(s=l.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=s):(l=s.retryQueue,l===null?s.retryQueue=new Set([c]):l.add(c)),cm(r,c,p)),!1}throw Error(i(435,l.tag))}return cm(r,c,p),lm(),!1}if(Ye)return s=Wn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,c!==ap&&(r=Error(i(422),{cause:c}),Kl($n(r,l)))):(c!==ap&&(s=Error(i(423),{cause:c}),Kl($n(s,l))),r=r.current.alternate,r.flags|=65536,p&=-p,r.lanes|=p,c=$n(c,l),p=Up(r.stateNode,c,p),gp(r,p),_t!==4&&(_t=2)),!1;var g=Error(i(520),{cause:c});if(g=$n(g,l),mu===null?mu=[g]:mu.push(g),_t!==4&&(_t=2),s===null)return!0;c=$n(c,l),l=s;do{switch(l.tag){case 3:return l.flags|=65536,r=p&-p,l.lanes|=r,r=Up(l.stateNode,c,r),gp(l,r),!1;case 1:if(s=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ns===null||!ns.has(g))))return l.flags|=65536,p&=-p,l.lanes|=p,p=d0(p),f0(p,r,l,c),gp(l,p),!1}l=l.return}while(l!==null);return!1}var p0=Error(i(461)),Ft=!1;function Xt(r,s,l,c){s.child=r===null?r0(s,null,l,c):vo(s,r.child,l,c)}function m0(r,s,l,c,p){l=l.render;var g=s.ref;if("ref"in c){var w={};for(var b in c)b!=="ref"&&(w[b]=c[b])}else w=c;return ca(s),c=Tp(r,s,l,w,g,p),b=wp(),r!==null&&!Ft?(Sp(r,s,p),dr(r,s,p)):(Ye&&b&&rp(s),s.flags|=1,Xt(r,s,c,p),s.child)}function g0(r,s,l,c,p){if(r===null){var g=l.type;return typeof g=="function"&&!tp(g)&&g.defaultProps===void 0&&l.compare===null?(s.tag=15,s.type=g,_0(r,s,g,c,p)):(r=ih(l.type,null,c,s,s.mode,p),r.ref=s.ref,r.return=s,s.child=r)}if(g=r.child,!$p(r,p)){var w=g.memoizedProps;if(l=l.compare,l=l!==null?l:ql,l(w,c)&&r.ref===s.ref)return dr(r,s,p)}return s.flags|=1,r=sr(g,c),r.ref=s.ref,r.return=s,s.child=r}function _0(r,s,l,c,p){if(r!==null){var g=r.memoizedProps;if(ql(g,c)&&r.ref===s.ref)if(Ft=!1,s.pendingProps=c=g,$p(r,p))(r.flags&131072)!==0&&(Ft=!0);else return s.lanes=r.lanes,dr(r,s,p)}return zp(r,s,l,c,p)}function y0(r,s,l){var c=s.pendingProps,p=c.children,g=r!==null?r.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=g!==null?g.baseLanes|l:l,r!==null){for(p=s.child=r.child,g=0;p!==null;)g=g|p.lanes|p.childLanes,p=p.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return v0(r,s,c,l)}if((l&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},r!==null&&lh(s,g!==null?g.cachePool:null),g!==null?_v(s,g):yp(),s0(s);else return s.lanes=s.childLanes=536870912,v0(r,s,g!==null?g.baseLanes|l:l,l)}else g!==null?(lh(s,g.cachePool),_v(s,g),Wr(),s.memoizedState=null):(r!==null&&lh(s,null),yp(),Wr());return Xt(r,s,p,l),s.child}function v0(r,s,l,c){var p=dp();return p=p===null?null:{parent:Mt._currentValue,pool:p},s.memoizedState={baseLanes:l,cachePool:p},r!==null&&lh(s,null),yp(),s0(s),r!==null&&Ql(r,s,c,!0),null}function Ah(r,s){var l=s.ref;if(l===null)r!==null&&r.ref!==null&&(s.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(s.flags|=4194816)}}function zp(r,s,l,c,p){return ca(s),l=Tp(r,s,l,c,void 0,p),c=wp(),r!==null&&!Ft?(Sp(r,s,p),dr(r,s,p)):(Ye&&c&&rp(s),s.flags|=1,Xt(r,s,l,p),s.child)}function E0(r,s,l,c,p,g){return ca(s),s.updateQueue=null,l=vv(s,c,l,p),yv(r),c=wp(),r!==null&&!Ft?(Sp(r,s,g),dr(r,s,g)):(Ye&&c&&rp(s),s.flags|=1,Xt(r,s,l,g),s.child)}function T0(r,s,l,c,p){if(ca(s),s.stateNode===null){var g=lo,w=l.contextType;typeof w=="object"&&w!==null&&(g=sn(w)),g=new l(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Vp,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},pp(s),w=l.contextType,g.context=typeof w=="object"&&w!==null?sn(w):lo,g.state=s.memoizedState,w=l.getDerivedStateFromProps,typeof w=="function"&&(Lp(s,l,w,c),g.state=s.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&Vp.enqueueReplaceState(g,g.state,null),nu(s,c,g,p),tu(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(r===null){g=s.stateNode;var b=s.memoizedProps,V=fa(l,b);g.props=V;var K=g.context,J=l.contextType;w=lo,typeof J=="object"&&J!==null&&(w=sn(J));var ie=l.getDerivedStateFromProps;J=typeof ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",b=s.pendingProps!==b,J||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b||K!==w)&&o0(s,g,c,w),Gr=!1;var Q=s.memoizedState;g.state=Q,nu(s,c,g,p),tu(),K=s.memoizedState,b||Q!==K||Gr?(typeof ie=="function"&&(Lp(s,l,ie,c),K=s.memoizedState),(V=Gr||a0(s,l,V,c,Q,K,w))?(J||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=K),g.props=c,g.state=K,g.context=w,c=V):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,mp(r,s),w=s.memoizedProps,J=fa(l,w),g.props=J,ie=s.pendingProps,Q=g.context,K=l.contextType,V=lo,typeof K=="object"&&K!==null&&(V=sn(K)),b=l.getDerivedStateFromProps,(K=typeof b=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==ie||Q!==V)&&o0(s,g,c,V),Gr=!1,Q=s.memoizedState,g.state=Q,nu(s,c,g,p),tu();var W=s.memoizedState;w!==ie||Q!==W||Gr||r!==null&&r.dependencies!==null&&ah(r.dependencies)?(typeof b=="function"&&(Lp(s,l,b,c),W=s.memoizedState),(J=Gr||a0(s,l,J,c,Q,W,V)||r!==null&&r.dependencies!==null&&ah(r.dependencies))?(K||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,W,V),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,W,V)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&Q===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&Q===r.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=W),g.props=c,g.state=W,g.context=V,c=J):(typeof g.componentDidUpdate!="function"||w===r.memoizedProps&&Q===r.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===r.memoizedProps&&Q===r.memoizedState||(s.flags|=1024),c=!1)}return g=c,Ah(r,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,r!==null&&c?(s.child=vo(s,r.child,null,p),s.child=vo(s,null,l,p)):Xt(r,s,l,p),s.memoizedState=g.state,r=s.child):r=dr(r,s,p),r}function w0(r,s,l,c){return Yl(),s.flags|=256,Xt(r,s,l,c),s.child}var Bp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jp(r){return{baseLanes:r,cachePool:uv()}}function Fp(r,s,l){return r=r!==null?r.childLanes&~l:0,s&&(r|=Xn),r}function S0(r,s,l){var c=s.pendingProps,p=!1,g=(s.flags&128)!==0,w;if((w=g)||(w=r!==null&&r.memoizedState===null?!1:(Pt.current&2)!==0),w&&(p=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,r===null){if(Ye){if(p?Qr(s):Wr(),Ye){var b=gt,V;if(V=b){e:{for(V=b,b=Ii;V.nodeType!==8;){if(!b){b=null;break e}if(V=li(V.nextSibling),V===null){b=null;break e}}b=V}b!==null?(s.memoizedState={dehydrated:b,treeContext:sa!==null?{id:ar,overflow:or}:null,retryLane:536870912,hydrationErrors:null},V=In(18,null,null,0),V.stateNode=b,V.return=s,s.child=V,_n=s,gt=null,V=!0):V=!1}V||la(s)}if(b=s.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return Am(b)?s.lanes=32:s.lanes=536870912,null;hr(s)}return b=c.children,c=c.fallback,p?(Wr(),p=s.mode,b=Ch({mode:"hidden",children:b},p),c=ra(c,p,l,null),b.return=s,c.return=s,b.sibling=c,s.child=b,p=s.child,p.memoizedState=jp(l),p.childLanes=Fp(r,w,l),s.memoizedState=Bp,c):(Qr(s),Hp(s,b))}if(V=r.memoizedState,V!==null&&(b=V.dehydrated,b!==null)){if(g)s.flags&256?(Qr(s),s.flags&=-257,s=qp(r,s,l)):s.memoizedState!==null?(Wr(),s.child=r.child,s.flags|=128,s=null):(Wr(),p=c.fallback,b=s.mode,c=Ch({mode:"visible",children:c.children},b),p=ra(p,b,l,null),p.flags|=2,c.return=s,p.return=s,c.sibling=p,s.child=c,vo(s,r.child,null,l),c=s.child,c.memoizedState=jp(l),c.childLanes=Fp(r,w,l),s.memoizedState=Bp,s=p);else if(Qr(s),Am(b)){if(w=b.nextSibling&&b.nextSibling.dataset,w)var K=w.dgst;w=K,c=Error(i(419)),c.stack="",c.digest=w,Kl({value:c,source:null,stack:null}),s=qp(r,s,l)}else if(Ft||Ql(r,s,l,!1),w=(l&r.childLanes)!==0,Ft||w){if(w=ot,w!==null&&(c=l&-l,c=(c&42)!==0?1:Vr(c),c=(c&(w.suspendedLanes|l))!==0?0:c,c!==0&&c!==V.retryLane))throw V.retryLane=c,oo(r,c),Mn(w,r,c),p0;b.data==="$?"||lm(),s=qp(r,s,l)}else b.data==="$?"?(s.flags|=192,s.child=r.child,s=null):(r=V.treeContext,gt=li(b.nextSibling),_n=s,Ye=!0,oa=null,Ii=!1,r!==null&&(Kn[Qn++]=ar,Kn[Qn++]=or,Kn[Qn++]=sa,ar=r.id,or=r.overflow,sa=s),s=Hp(s,c.children),s.flags|=4096);return s}return p?(Wr(),p=c.fallback,b=s.mode,V=r.child,K=V.sibling,c=sr(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,K!==null?p=sr(K,p):(p=ra(p,b,l,null),p.flags|=2),p.return=s,c.return=s,c.sibling=p,s.child=c,c=p,p=s.child,b=r.child.memoizedState,b===null?b=jp(l):(V=b.cachePool,V!==null?(K=Mt._currentValue,V=V.parent!==K?{parent:K,pool:K}:V):V=uv(),b={baseLanes:b.baseLanes|l,cachePool:V}),p.memoizedState=b,p.childLanes=Fp(r,w,l),s.memoizedState=Bp,c):(Qr(s),l=r.child,r=l.sibling,l=sr(l,{mode:"visible",children:c.children}),l.return=s,l.sibling=null,r!==null&&(w=s.deletions,w===null?(s.deletions=[r],s.flags|=16):w.push(r)),s.child=l,s.memoizedState=null,l)}function Hp(r,s){return s=Ch({mode:"visible",children:s},r.mode),s.return=r,r.child=s}function Ch(r,s){return r=In(22,r,null,s),r.lanes=0,r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},r}function qp(r,s,l){return vo(s,r.child,null,l),r=Hp(s,s.pendingProps.children),r.flags|=2,s.memoizedState=null,r}function b0(r,s,l){r.lanes|=s;var c=r.alternate;c!==null&&(c.lanes|=s),lp(r.return,s,l)}function Gp(r,s,l,c,p){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:p}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=l,g.tailMode=p)}function A0(r,s,l){var c=s.pendingProps,p=c.revealOrder,g=c.tail;if(Xt(r,s,c.children,l),c=Pt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=s.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&b0(r,l,s);else if(r.tag===19)b0(r,l,s);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break e;for(;r.sibling===null;){if(r.return===null||r.return===s)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}c&=1}switch(se(Pt,c),p){case"forwards":for(l=s.child,p=null;l!==null;)r=l.alternate,r!==null&&wh(r)===null&&(p=l),l=l.sibling;l=p,l===null?(p=s.child,s.child=null):(p=l.sibling,l.sibling=null),Gp(s,!1,p,l,g);break;case"backwards":for(l=null,p=s.child,s.child=null;p!==null;){if(r=p.alternate,r!==null&&wh(r)===null){s.child=p;break}r=p.sibling,p.sibling=l,l=p,p=r}Gp(s,!0,l,null,g);break;case"together":Gp(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function dr(r,s,l){if(r!==null&&(s.dependencies=r.dependencies),ts|=s.lanes,(l&s.childLanes)===0)if(r!==null){if(Ql(r,s,l,!1),(l&s.childLanes)===0)return null}else return null;if(r!==null&&s.child!==r.child)throw Error(i(153));if(s.child!==null){for(r=s.child,l=sr(r,r.pendingProps),s.child=l,l.return=s;r.sibling!==null;)r=r.sibling,l=l.sibling=sr(r,r.pendingProps),l.return=s;l.sibling=null}return s.child}function $p(r,s){return(r.lanes&s)!==0?!0:(r=r.dependencies,!!(r!==null&&ah(r)))}function yR(r,s,l){switch(s.tag){case 3:Xe(s,s.stateNode.containerInfo),qr(s,Mt,r.memoizedState.cache),Yl();break;case 27:case 5:$i(s);break;case 4:Xe(s,s.stateNode.containerInfo);break;case 10:qr(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Qr(s),s.flags|=128,null):(l&s.child.childLanes)!==0?S0(r,s,l):(Qr(s),r=dr(r,s,l),r!==null?r.sibling:null);Qr(s);break;case 19:var p=(r.flags&128)!==0;if(c=(l&s.childLanes)!==0,c||(Ql(r,s,l,!1),c=(l&s.childLanes)!==0),p){if(c)return A0(r,s,l);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),se(Pt,Pt.current),c)break;return null;case 22:case 23:return s.lanes=0,y0(r,s,l);case 24:qr(s,Mt,r.memoizedState.cache)}return dr(r,s,l)}function C0(r,s,l){if(r!==null)if(r.memoizedProps!==s.pendingProps)Ft=!0;else{if(!$p(r,l)&&(s.flags&128)===0)return Ft=!1,yR(r,s,l);Ft=(r.flags&131072)!==0}else Ft=!1,Ye&&(s.flags&1048576)!==0&&nv(s,sh,s.index);switch(s.lanes=0,s.tag){case 16:e:{r=s.pendingProps;var c=s.elementType,p=c._init;if(c=p(c._payload),s.type=c,typeof c=="function")tp(c)?(r=fa(c,r),s.tag=1,s=T0(null,s,c,r,l)):(s.tag=0,s=zp(null,s,c,r,l));else{if(c!=null){if(p=c.$$typeof,p===ee){s.tag=11,s=m0(null,s,c,r,l);break e}else if(p===P){s.tag=14,s=g0(null,s,c,r,l);break e}}throw s=$e(c)||c,Error(i(306,s,""))}}return s;case 0:return zp(r,s,s.type,s.pendingProps,l);case 1:return c=s.type,p=fa(c,s.pendingProps),T0(r,s,c,p,l);case 3:e:{if(Xe(s,s.stateNode.containerInfo),r===null)throw Error(i(387));c=s.pendingProps;var g=s.memoizedState;p=g.element,mp(r,s),nu(s,c,null,l);var w=s.memoizedState;if(c=w.cache,qr(s,Mt,c),c!==g.cache&&up(s,[Mt],l,!0),tu(),c=w.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=w0(r,s,c,l);break e}else if(c!==p){p=$n(Error(i(424)),s),Kl(p),s=w0(r,s,c,l);break e}else{switch(r=s.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(gt=li(r.firstChild),_n=s,Ye=!0,oa=null,Ii=!0,l=r0(s,null,c,l),s.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(Yl(),c===p){s=dr(r,s,l);break e}Xt(r,s,c,l)}s=s.child}return s;case 26:return Ah(r,s),r===null?(l=NE(s.type,null,s.pendingProps,null))?s.memoizedState=l:Ye||(l=s.type,r=s.pendingProps,c=Bh(we.current).createElement(l),c[Nt]=s,c[bt]=r,Jt(c,l,r),vt(c),s.stateNode=c):s.memoizedState=NE(s.type,r.memoizedProps,s.pendingProps,r.memoizedState),null;case 27:return $i(s),r===null&&Ye&&(c=s.stateNode=RE(s.type,s.pendingProps,we.current),_n=s,Ii=!0,p=gt,ss(s.type)?(Cm=p,gt=li(c.firstChild)):gt=p),Xt(r,s,s.pendingProps.children,l),Ah(r,s),r===null&&(s.flags|=4194304),s.child;case 5:return r===null&&Ye&&((p=c=gt)&&(c=$R(c,s.type,s.pendingProps,Ii),c!==null?(s.stateNode=c,_n=s,gt=li(c.firstChild),Ii=!1,p=!0):p=!1),p||la(s)),$i(s),p=s.type,g=s.pendingProps,w=r!==null?r.memoizedProps:null,c=g.children,wm(p,g)?c=null:w!==null&&wm(p,w)&&(s.flags|=32),s.memoizedState!==null&&(p=Tp(r,s,cR,null,null,l),bu._currentValue=p),Ah(r,s),Xt(r,s,c,l),s.child;case 6:return r===null&&Ye&&((r=l=gt)&&(l=YR(l,s.pendingProps,Ii),l!==null?(s.stateNode=l,_n=s,gt=null,r=!0):r=!1),r||la(s)),null;case 13:return S0(r,s,l);case 4:return Xe(s,s.stateNode.containerInfo),c=s.pendingProps,r===null?s.child=vo(s,null,c,l):Xt(r,s,c,l),s.child;case 11:return m0(r,s,s.type,s.pendingProps,l);case 7:return Xt(r,s,s.pendingProps,l),s.child;case 8:return Xt(r,s,s.pendingProps.children,l),s.child;case 12:return Xt(r,s,s.pendingProps.children,l),s.child;case 10:return c=s.pendingProps,qr(s,s.type,c.value),Xt(r,s,c.children,l),s.child;case 9:return p=s.type._context,c=s.pendingProps.children,ca(s),p=sn(p),c=c(p),s.flags|=1,Xt(r,s,c,l),s.child;case 14:return g0(r,s,s.type,s.pendingProps,l);case 15:return _0(r,s,s.type,s.pendingProps,l);case 19:return A0(r,s,l);case 31:return c=s.pendingProps,l=s.mode,c={mode:c.mode,children:c.children},r===null?(l=Ch(c,l),l.ref=s.ref,s.child=l,l.return=s,s=l):(l=sr(r.child,c),l.ref=s.ref,s.child=l,l.return=s,s=l),s;case 22:return y0(r,s,l);case 24:return ca(s),c=sn(Mt),r===null?(p=dp(),p===null&&(p=ot,g=cp(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=l),p=g),s.memoizedState={parent:c,cache:p},pp(s),qr(s,Mt,p)):((r.lanes&l)!==0&&(mp(r,s),nu(s,null,null,l),tu()),p=r.memoizedState,g=s.memoizedState,p.parent!==c?(p={parent:c,cache:c},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),qr(s,Mt,c)):(c=g.cache,qr(s,Mt,c),c!==p.cache&&up(s,[Mt],l,!0))),Xt(r,s,s.pendingProps.children,l),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function fr(r){r.flags|=4}function R0(r,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!kE(s)){if(s=Wn.current,s!==null&&((je&4194048)===je?xi!==null:(je&62914560)!==je&&(je&536870912)===0||s!==xi))throw Jl=fp,cv;r.flags|=8192}}function Rh(r,s){s!==null&&(r.flags|=4),r.flags&16384&&(s=r.tag!==22?Cl():536870912,r.lanes|=s,So|=s)}function uu(r,s){if(!Ye)switch(r.tailMode){case"hidden":s=r.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?s||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function pt(r){var s=r.alternate!==null&&r.alternate.child===r.child,l=0,c=0;if(s)for(var p=r.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags&65011712,c|=p.flags&65011712,p.return=r,p=p.sibling;else for(p=r.child;p!==null;)l|=p.lanes|p.childLanes,c|=p.subtreeFlags,c|=p.flags,p.return=r,p=p.sibling;return r.subtreeFlags|=c,r.childLanes=l,s}function vR(r,s,l){var c=s.pendingProps;switch(sp(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(s),null;case 1:return pt(s),null;case 3:return l=s.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ur(Mt),ti(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&($l(s)?fr(s):r===null||r.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,sv())),pt(s),null;case 26:return l=s.memoizedState,r===null?(fr(s),l!==null?(pt(s),R0(s,l)):(pt(s),s.flags&=-16777217)):l?l!==r.memoizedState?(fr(s),pt(s),R0(s,l)):(pt(s),s.flags&=-16777217):(r.memoizedProps!==c&&fr(s),pt(s),s.flags&=-16777217),null;case 27:zn(s),l=we.current;var p=s.type;if(r!==null&&s.stateNode!=null)r.memoizedProps!==c&&fr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return pt(s),null}r=fe.current,$l(s)?iv(s):(r=RE(p,c,l),s.stateNode=r,fr(s))}return pt(s),null;case 5:if(zn(s),l=s.type,r!==null&&s.stateNode!=null)r.memoizedProps!==c&&fr(s);else{if(!c){if(s.stateNode===null)throw Error(i(166));return pt(s),null}if(r=fe.current,$l(s))iv(s);else{switch(p=Bh(we.current),r){case 1:r=p.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:r=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":r=p.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":r=p.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":r=p.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof c.is=="string"?p.createElement("select",{is:c.is}):p.createElement("select"),c.multiple?r.multiple=!0:c.size&&(r.size=c.size);break;default:r=typeof c.is=="string"?p.createElement(l,{is:c.is}):p.createElement(l)}}r[Nt]=s,r[bt]=c;e:for(p=s.child;p!==null;){if(p.tag===5||p.tag===6)r.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===s)break e;for(;p.sibling===null;){if(p.return===null||p.return===s)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}s.stateNode=r;e:switch(Jt(r,l,c),l){case"button":case"input":case"select":case"textarea":r=!!c.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&fr(s)}}return pt(s),s.flags&=-16777217,null;case 6:if(r&&s.stateNode!=null)r.memoizedProps!==c&&fr(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(i(166));if(r=we.current,$l(s)){if(r=s.stateNode,l=s.memoizedProps,c=null,p=_n,p!==null)switch(p.tag){case 27:case 5:c=p.memoizedProps}r[Nt]=s,r=!!(r.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||EE(r.nodeValue,l)),r||la(s)}else r=Bh(r).createTextNode(c),r[Nt]=s,s.stateNode=r}return pt(s),null;case 13:if(c=s.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(p=$l(s),c!==null&&c.dehydrated!==null){if(r===null){if(!p)throw Error(i(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(i(317));p[Nt]=s}else Yl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pt(s),p=!1}else p=sv(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(hr(s),s):(hr(s),null)}if(hr(s),(s.flags&128)!==0)return s.lanes=l,s;if(l=c!==null,r=r!==null&&r.memoizedState!==null,l){c=s.child,p=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(p=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==p&&(c.flags|=2048)}return l!==r&&l&&(s.child.flags|=8192),Rh(s,s.updateQueue),pt(s),null;case 4:return ti(),r===null&&_m(s.stateNode.containerInfo),pt(s),null;case 10:return ur(s.type),pt(s),null;case 19:if(ae(Pt),p=s.memoizedState,p===null)return pt(s),null;if(c=(s.flags&128)!==0,g=p.rendering,g===null)if(c)uu(p,!1);else{if(_t!==0||r!==null&&(r.flags&128)!==0)for(r=s.child;r!==null;){if(g=wh(r),g!==null){for(s.flags|=128,uu(p,!1),r=g.updateQueue,s.updateQueue=r,Rh(s,r),s.subtreeFlags=0,r=l,l=s.child;l!==null;)tv(l,r),l=l.sibling;return se(Pt,Pt.current&1|2),s.child}r=r.sibling}p.tail!==null&&Bn()>Nh&&(s.flags|=128,c=!0,uu(p,!1),s.lanes=4194304)}else{if(!c)if(r=wh(g),r!==null){if(s.flags|=128,c=!0,r=r.updateQueue,s.updateQueue=r,Rh(s,r),uu(p,!0),p.tail===null&&p.tailMode==="hidden"&&!g.alternate&&!Ye)return pt(s),null}else 2*Bn()-p.renderingStartTime>Nh&&l!==536870912&&(s.flags|=128,c=!0,uu(p,!1),s.lanes=4194304);p.isBackwards?(g.sibling=s.child,s.child=g):(r=p.last,r!==null?r.sibling=g:s.child=g,p.last=g)}return p.tail!==null?(s=p.tail,p.rendering=s,p.tail=s.sibling,p.renderingStartTime=Bn(),s.sibling=null,r=Pt.current,se(Pt,c?r&1|2:r&1),s):(pt(s),null);case 22:case 23:return hr(s),vp(),c=s.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(l&536870912)!==0&&(s.flags&128)===0&&(pt(s),s.subtreeFlags&6&&(s.flags|=8192)):pt(s),l=s.updateQueue,l!==null&&Rh(s,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==l&&(s.flags|=2048),r!==null&&ae(ha),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),ur(Mt),pt(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function ER(r,s){switch(sp(s),s.tag){case 1:return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 3:return ur(Mt),ti(),r=s.flags,(r&65536)!==0&&(r&128)===0?(s.flags=r&-65537|128,s):null;case 26:case 27:case 5:return zn(s),null;case 13:if(hr(s),r=s.memoizedState,r!==null&&r.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Yl()}return r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 19:return ae(Pt),null;case 4:return ti(),null;case 10:return ur(s.type),null;case 22:case 23:return hr(s),vp(),r!==null&&ae(ha),r=s.flags,r&65536?(s.flags=r&-65537|128,s):null;case 24:return ur(Mt),null;case 25:return null;default:return null}}function I0(r,s){switch(sp(s),s.tag){case 3:ur(Mt),ti();break;case 26:case 27:case 5:zn(s);break;case 4:ti();break;case 13:hr(s);break;case 19:ae(Pt);break;case 10:ur(s.type);break;case 22:case 23:hr(s),vp(),r!==null&&ae(ha);break;case 24:ur(Mt)}}function cu(r,s){try{var l=s.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var p=c.next;l=p;do{if((l.tag&r)===r){c=void 0;var g=l.create,w=l.inst;c=g(),w.destroy=c}l=l.next}while(l!==p)}}catch(b){at(s,s.return,b)}}function Xr(r,s,l){try{var c=s.updateQueue,p=c!==null?c.lastEffect:null;if(p!==null){var g=p.next;c=g;do{if((c.tag&r)===r){var w=c.inst,b=w.destroy;if(b!==void 0){w.destroy=void 0,p=s;var V=l,K=b;try{K()}catch(J){at(p,V,J)}}}c=c.next}while(c!==g)}}catch(J){at(s,s.return,J)}}function x0(r){var s=r.updateQueue;if(s!==null){var l=r.stateNode;try{gv(s,l)}catch(c){at(r,r.return,c)}}}function N0(r,s,l){l.props=fa(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(c){at(r,s,c)}}function hu(r,s){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof l=="function"?r.refCleanup=l(c):l.current=c}}catch(p){at(r,s,p)}}function Ni(r,s){var l=r.ref,c=r.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(p){at(r,s,p)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(p){at(r,s,p)}else l.current=null}function O0(r){var s=r.type,l=r.memoizedProps,c=r.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(p){at(r,r.return,p)}}function Yp(r,s,l){try{var c=r.stateNode;jR(c,r.type,l,s),c[bt]=s}catch(p){at(r,r.return,p)}}function D0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&ss(r.type)||r.tag===4}function Kp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||D0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&ss(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Qp(r,s,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,s):(s=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,s.appendChild(r),l=l._reactRootContainer,l!=null||s.onclick!==null||(s.onclick=zh));else if(c!==4&&(c===27&&ss(r.type)&&(l=r.stateNode,s=null),r=r.child,r!==null))for(Qp(r,s,l),r=r.sibling;r!==null;)Qp(r,s,l),r=r.sibling}function Ih(r,s,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,s?l.insertBefore(r,s):l.appendChild(r);else if(c!==4&&(c===27&&ss(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(Ih(r,s,l),r=r.sibling;r!==null;)Ih(r,s,l),r=r.sibling}function M0(r){var s=r.stateNode,l=r.memoizedProps;try{for(var c=r.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);Jt(s,c,l),s[Nt]=r,s[bt]=l}catch(g){at(r,r.return,g)}}var pr=!1,Tt=!1,Wp=!1,P0=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function TR(r,s){if(r=r.containerInfo,Em=$h,r=Gy(r),Kf(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var p=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var w=0,b=-1,V=-1,K=0,J=0,ie=r,Q=null;t:for(;;){for(var W;ie!==l||p!==0&&ie.nodeType!==3||(b=w+p),ie!==g||c!==0&&ie.nodeType!==3||(V=w+c),ie.nodeType===3&&(w+=ie.nodeValue.length),(W=ie.firstChild)!==null;)Q=ie,ie=W;for(;;){if(ie===r)break t;if(Q===l&&++K===p&&(b=w),Q===g&&++J===c&&(V=w),(W=ie.nextSibling)!==null)break;ie=Q,Q=ie.parentNode}ie=W}l=b===-1||V===-1?null:{start:b,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(Tm={focusedElem:r,selectionRange:l},$h=!1,Ht=s;Ht!==null;)if(s=Ht,r=s.child,(s.subtreeFlags&1024)!==0&&r!==null)r.return=s,Ht=r;else for(;Ht!==null;){switch(s=Ht,g=s.alternate,r=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,l=s,p=g.memoizedProps,g=g.memoizedState,c=l.stateNode;try{var be=fa(l.type,p,l.elementType===l.type);r=c.getSnapshotBeforeUpdate(be,g),c.__reactInternalSnapshotBeforeUpdate=r}catch(ve){at(l,l.return,ve)}}break;case 3:if((r&1024)!==0){if(r=s.stateNode.containerInfo,l=r.nodeType,l===9)bm(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":bm(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=s.sibling,r!==null){r.return=s.return,Ht=r;break}Ht=s.return}}function k0(r,s,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:Zr(r,l),c&4&&cu(5,l);break;case 1:if(Zr(r,l),c&4)if(r=l.stateNode,s===null)try{r.componentDidMount()}catch(w){at(l,l.return,w)}else{var p=fa(l.type,s.memoizedProps);s=s.memoizedState;try{r.componentDidUpdate(p,s,r.__reactInternalSnapshotBeforeUpdate)}catch(w){at(l,l.return,w)}}c&64&&x0(l),c&512&&hu(l,l.return);break;case 3:if(Zr(r,l),c&64&&(r=l.updateQueue,r!==null)){if(s=null,l.child!==null)switch(l.child.tag){case 27:case 5:s=l.child.stateNode;break;case 1:s=l.child.stateNode}try{gv(r,s)}catch(w){at(l,l.return,w)}}break;case 27:s===null&&c&4&&M0(l);case 26:case 5:Zr(r,l),s===null&&c&4&&O0(l),c&512&&hu(l,l.return);break;case 12:Zr(r,l);break;case 13:Zr(r,l),c&4&&U0(r,l),c&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=NR.bind(null,l),KR(r,l))));break;case 22:if(c=l.memoizedState!==null||pr,!c){s=s!==null&&s.memoizedState!==null||Tt,p=pr;var g=Tt;pr=c,(Tt=s)&&!g?Jr(r,l,(l.subtreeFlags&8772)!==0):Zr(r,l),pr=p,Tt=g}break;case 30:break;default:Zr(r,l)}}function L0(r){var s=r.alternate;s!==null&&(r.alternate=null,L0(s)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(s=r.stateNode,s!==null&&Br(s)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var dt=null,En=!1;function mr(r,s,l){for(l=l.child;l!==null;)V0(r,s,l),l=l.sibling}function V0(r,s,l){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(mt,l)}catch{}switch(l.tag){case 26:Tt||Ni(l,s),mr(r,s,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Tt||Ni(l,s);var c=dt,p=En;ss(l.type)&&(dt=l.stateNode,En=!1),mr(r,s,l),Eu(l.stateNode),dt=c,En=p;break;case 5:Tt||Ni(l,s);case 6:if(c=dt,p=En,dt=null,mr(r,s,l),dt=c,En=p,dt!==null)if(En)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(l.stateNode)}catch(g){at(l,s,g)}else try{dt.removeChild(l.stateNode)}catch(g){at(l,s,g)}break;case 18:dt!==null&&(En?(r=dt,AE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),Iu(r)):AE(dt,l.stateNode));break;case 4:c=dt,p=En,dt=l.stateNode.containerInfo,En=!0,mr(r,s,l),dt=c,En=p;break;case 0:case 11:case 14:case 15:Tt||Xr(2,l,s),Tt||Xr(4,l,s),mr(r,s,l);break;case 1:Tt||(Ni(l,s),c=l.stateNode,typeof c.componentWillUnmount=="function"&&N0(l,s,c)),mr(r,s,l);break;case 21:mr(r,s,l);break;case 22:Tt=(c=Tt)||l.memoizedState!==null,mr(r,s,l),Tt=c;break;default:mr(r,s,l)}}function U0(r,s){if(s.memoizedState===null&&(r=s.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Iu(r)}catch(l){at(s,s.return,l)}}function wR(r){switch(r.tag){case 13:case 19:var s=r.stateNode;return s===null&&(s=r.stateNode=new P0),s;case 22:return r=r.stateNode,s=r._retryCache,s===null&&(s=r._retryCache=new P0),s;default:throw Error(i(435,r.tag))}}function Xp(r,s){var l=wR(r);s.forEach(function(c){var p=OR.bind(null,r,c);l.has(c)||(l.add(c),c.then(p,p))})}function xn(r,s){var l=s.deletions;if(l!==null)for(var c=0;c<l.length;c++){var p=l[c],g=r,w=s,b=w;e:for(;b!==null;){switch(b.tag){case 27:if(ss(b.type)){dt=b.stateNode,En=!1;break e}break;case 5:dt=b.stateNode,En=!1;break e;case 3:case 4:dt=b.stateNode.containerInfo,En=!0;break e}b=b.return}if(dt===null)throw Error(i(160));V0(g,w,p),dt=null,En=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)z0(s,r),s=s.sibling}var oi=null;function z0(r,s){var l=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:xn(s,r),Nn(r),c&4&&(Xr(3,r,r.return),cu(3,r),Xr(5,r,r.return));break;case 1:xn(s,r),Nn(r),c&512&&(Tt||l===null||Ni(l,l.return)),c&64&&pr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var p=oi;if(xn(s,r),Nn(r),c&512&&(Tt||l===null||Ni(l,l.return)),c&4){var g=l!==null?l.memoizedState:null;if(c=r.memoizedState,l===null)if(c===null)if(r.stateNode===null){e:{c=r.type,l=r.memoizedProps,p=p.ownerDocument||p;t:switch(c){case"title":g=p.getElementsByTagName("title")[0],(!g||g[Fs]||g[Nt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(c),p.head.insertBefore(g,p.querySelector("head > title"))),Jt(g,c,l),g[Nt]=r,vt(g),c=g;break e;case"link":var w=ME("link","href",p).get(c+(l.href||""));if(w){for(var b=0;b<w.length;b++)if(g=w[b],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){w.splice(b,1);break t}}g=p.createElement(c),Jt(g,c,l),p.head.appendChild(g);break;case"meta":if(w=ME("meta","content",p).get(c+(l.content||""))){for(b=0;b<w.length;b++)if(g=w[b],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){w.splice(b,1);break t}}g=p.createElement(c),Jt(g,c,l),p.head.appendChild(g);break;default:throw Error(i(468,c))}g[Nt]=r,vt(g),c=g}r.stateNode=c}else PE(p,r.type,r.stateNode);else r.stateNode=DE(p,c,r.memoizedProps);else g!==c?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,c===null?PE(p,r.type,r.stateNode):DE(p,c,r.memoizedProps)):c===null&&r.stateNode!==null&&Yp(r,r.memoizedProps,l.memoizedProps)}break;case 27:xn(s,r),Nn(r),c&512&&(Tt||l===null||Ni(l,l.return)),l!==null&&c&4&&Yp(r,r.memoizedProps,l.memoizedProps);break;case 5:if(xn(s,r),Nn(r),c&512&&(Tt||l===null||Ni(l,l.return)),r.flags&32){p=r.stateNode;try{Fn(p,"")}catch(W){at(r,r.return,W)}}c&4&&r.stateNode!=null&&(p=r.memoizedProps,Yp(r,p,l!==null?l.memoizedProps:p)),c&1024&&(Wp=!0);break;case 6:if(xn(s,r),Nn(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,l=r.stateNode;try{l.nodeValue=c}catch(W){at(r,r.return,W)}}break;case 3:if(Hh=null,p=oi,oi=jh(s.containerInfo),xn(s,r),oi=p,Nn(r),c&4&&l!==null&&l.memoizedState.isDehydrated)try{Iu(s.containerInfo)}catch(W){at(r,r.return,W)}Wp&&(Wp=!1,B0(r));break;case 4:c=oi,oi=jh(r.stateNode.containerInfo),xn(s,r),Nn(r),oi=c;break;case 12:xn(s,r),Nn(r);break;case 13:xn(s,r),Nn(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(im=Bn()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Xp(r,c)));break;case 22:p=r.memoizedState!==null;var V=l!==null&&l.memoizedState!==null,K=pr,J=Tt;if(pr=K||p,Tt=J||V,xn(s,r),Tt=J,pr=K,Nn(r),c&8192)e:for(s=r.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(l===null||V||pr||Tt||pa(r)),l=null,s=r;;){if(s.tag===5||s.tag===26){if(l===null){V=l=s;try{if(g=V.stateNode,p)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{b=V.stateNode;var ie=V.memoizedProps.style,Q=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;b.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(W){at(V,V.return,W)}}}else if(s.tag===6){if(l===null){V=s;try{V.stateNode.nodeValue=p?"":V.memoizedProps}catch(W){at(V,V.return,W)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===r)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===r)break e;for(;s.sibling===null;){if(s.return===null||s.return===r)break e;l===s&&(l=null),s=s.return}l===s&&(l=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=r.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,Xp(r,l))));break;case 19:xn(s,r),Nn(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,Xp(r,c)));break;case 30:break;case 21:break;default:xn(s,r),Nn(r)}}function Nn(r){var s=r.flags;if(s&2){try{for(var l,c=r.return;c!==null;){if(D0(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var p=l.stateNode,g=Kp(r);Ih(r,g,p);break;case 5:var w=l.stateNode;l.flags&32&&(Fn(w,""),l.flags&=-33);var b=Kp(r);Ih(r,b,w);break;case 3:case 4:var V=l.stateNode.containerInfo,K=Kp(r);Qp(r,K,V);break;default:throw Error(i(161))}}catch(J){at(r,r.return,J)}r.flags&=-3}s&4096&&(r.flags&=-4097)}function B0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var s=r;B0(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),r=r.sibling}}function Zr(r,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)k0(r,s.alternate,s),s=s.sibling}function pa(r){for(r=r.child;r!==null;){var s=r;switch(s.tag){case 0:case 11:case 14:case 15:Xr(4,s,s.return),pa(s);break;case 1:Ni(s,s.return);var l=s.stateNode;typeof l.componentWillUnmount=="function"&&N0(s,s.return,l),pa(s);break;case 27:Eu(s.stateNode);case 26:case 5:Ni(s,s.return),pa(s);break;case 22:s.memoizedState===null&&pa(s);break;case 30:pa(s);break;default:pa(s)}r=r.sibling}}function Jr(r,s,l){for(l=l&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,p=r,g=s,w=g.flags;switch(g.tag){case 0:case 11:case 15:Jr(p,g,l),cu(4,g);break;case 1:if(Jr(p,g,l),c=g,p=c.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(K){at(c,c.return,K)}if(c=g,p=c.updateQueue,p!==null){var b=c.stateNode;try{var V=p.shared.hiddenCallbacks;if(V!==null)for(p.shared.hiddenCallbacks=null,p=0;p<V.length;p++)mv(V[p],b)}catch(K){at(c,c.return,K)}}l&&w&64&&x0(g),hu(g,g.return);break;case 27:M0(g);case 26:case 5:Jr(p,g,l),l&&c===null&&w&4&&O0(g),hu(g,g.return);break;case 12:Jr(p,g,l);break;case 13:Jr(p,g,l),l&&w&4&&U0(p,g);break;case 22:g.memoizedState===null&&Jr(p,g,l),hu(g,g.return);break;case 30:break;default:Jr(p,g,l)}s=s.sibling}}function Zp(r,s){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(r=s.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Wl(l))}function Jp(r,s){r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Wl(r))}function Oi(r,s,l,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)j0(r,s,l,c),s=s.sibling}function j0(r,s,l,c){var p=s.flags;switch(s.tag){case 0:case 11:case 15:Oi(r,s,l,c),p&2048&&cu(9,s);break;case 1:Oi(r,s,l,c);break;case 3:Oi(r,s,l,c),p&2048&&(r=null,s.alternate!==null&&(r=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==r&&(s.refCount++,r!=null&&Wl(r)));break;case 12:if(p&2048){Oi(r,s,l,c),r=s.stateNode;try{var g=s.memoizedProps,w=g.id,b=g.onPostCommit;typeof b=="function"&&b(w,s.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(V){at(s,s.return,V)}}else Oi(r,s,l,c);break;case 13:Oi(r,s,l,c);break;case 23:break;case 22:g=s.stateNode,w=s.alternate,s.memoizedState!==null?g._visibility&2?Oi(r,s,l,c):du(r,s):g._visibility&2?Oi(r,s,l,c):(g._visibility|=2,Eo(r,s,l,c,(s.subtreeFlags&10256)!==0)),p&2048&&Zp(w,s);break;case 24:Oi(r,s,l,c),p&2048&&Jp(s.alternate,s);break;default:Oi(r,s,l,c)}}function Eo(r,s,l,c,p){for(p=p&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=r,w=s,b=l,V=c,K=w.flags;switch(w.tag){case 0:case 11:case 15:Eo(g,w,b,V,p),cu(8,w);break;case 23:break;case 22:var J=w.stateNode;w.memoizedState!==null?J._visibility&2?Eo(g,w,b,V,p):du(g,w):(J._visibility|=2,Eo(g,w,b,V,p)),p&&K&2048&&Zp(w.alternate,w);break;case 24:Eo(g,w,b,V,p),p&&K&2048&&Jp(w.alternate,w);break;default:Eo(g,w,b,V,p)}s=s.sibling}}function du(r,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var l=r,c=s,p=c.flags;switch(c.tag){case 22:du(l,c),p&2048&&Zp(c.alternate,c);break;case 24:du(l,c),p&2048&&Jp(c.alternate,c);break;default:du(l,c)}s=s.sibling}}var fu=8192;function To(r){if(r.subtreeFlags&fu)for(r=r.child;r!==null;)F0(r),r=r.sibling}function F0(r){switch(r.tag){case 26:To(r),r.flags&fu&&r.memoizedState!==null&&oI(oi,r.memoizedState,r.memoizedProps);break;case 5:To(r);break;case 3:case 4:var s=oi;oi=jh(r.stateNode.containerInfo),To(r),oi=s;break;case 22:r.memoizedState===null&&(s=r.alternate,s!==null&&s.memoizedState!==null?(s=fu,fu=16777216,To(r),fu=s):To(r));break;default:To(r)}}function H0(r){var s=r.alternate;if(s!==null&&(r=s.child,r!==null)){s.child=null;do s=r.sibling,r.sibling=null,r=s;while(r!==null)}}function pu(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Ht=c,G0(c,r)}H0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)q0(r),r=r.sibling}function q0(r){switch(r.tag){case 0:case 11:case 15:pu(r),r.flags&2048&&Xr(9,r,r.return);break;case 3:pu(r);break;case 12:pu(r);break;case 22:var s=r.stateNode;r.memoizedState!==null&&s._visibility&2&&(r.return===null||r.return.tag!==13)?(s._visibility&=-3,xh(r)):pu(r);break;default:pu(r)}}function xh(r){var s=r.deletions;if((r.flags&16)!==0){if(s!==null)for(var l=0;l<s.length;l++){var c=s[l];Ht=c,G0(c,r)}H0(r)}for(r=r.child;r!==null;){switch(s=r,s.tag){case 0:case 11:case 15:Xr(8,s,s.return),xh(s);break;case 22:l=s.stateNode,l._visibility&2&&(l._visibility&=-3,xh(s));break;default:xh(s)}r=r.sibling}}function G0(r,s){for(;Ht!==null;){var l=Ht;switch(l.tag){case 0:case 11:case 15:Xr(8,l,s);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Wl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Ht=c;else e:for(l=r;Ht!==null;){c=Ht;var p=c.sibling,g=c.return;if(L0(c),c===l){Ht=null;break e}if(p!==null){p.return=g,Ht=p;break e}Ht=g}}}var SR={getCacheForType:function(r){var s=sn(Mt),l=s.data.get(r);return l===void 0&&(l=r(),s.data.set(r,l)),l}},bR=typeof WeakMap=="function"?WeakMap:Map,Je=0,ot=null,Me=null,je=0,et=0,On=null,es=!1,wo=!1,em=!1,gr=0,_t=0,ts=0,ma=0,tm=0,Xn=0,So=0,mu=null,Tn=null,nm=!1,im=0,Nh=1/0,Oh=null,ns=null,Zt=0,is=null,bo=null,Ao=0,rm=0,sm=null,$0=null,gu=0,am=null;function Dn(){if((Je&2)!==0&&je!==0)return je&-je;if($.T!==null){var r=ho;return r!==0?r:fm()}return Ur()}function Y0(){Xn===0&&(Xn=(je&536870912)===0||Ye?Al():536870912);var r=Wn.current;return r!==null&&(r.flags|=32),Xn}function Mn(r,s,l){(r===ot&&(et===2||et===9)||r.cancelPendingCommit!==null)&&(Co(r,0),rs(r,je,Xn,!1)),Ki(r,l),((Je&2)===0||r!==ot)&&(r===ot&&((Je&2)===0&&(ma|=l),_t===4&&rs(r,je,Xn,!1)),Di(r))}function K0(r,s,l){if((Je&6)!==0)throw Error(i(327));var c=!l&&(s&124)===0&&(s&r.expiredLanes)===0||js(r,s),p=c?RR(r,s):um(r,s,!0),g=c;do{if(p===0){wo&&!c&&rs(r,s,0,!1);break}else{if(l=r.current.alternate,g&&!AR(l)){p=um(r,s,!1),g=!1;continue}if(p===2){if(g=s,r.errorRecoveryDisabledLanes&g)var w=0;else w=r.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var b=r;p=mu;var V=b.current.memoizedState.isDehydrated;if(V&&(Co(b,w).flags|=256),w=um(b,w,!1),w!==2){if(em&&!V){b.errorRecoveryDisabledLanes|=g,ma|=g,p=4;break e}g=Tn,Tn=p,g!==null&&(Tn===null?Tn=g:Tn.push.apply(Tn,g))}p=w}if(g=!1,p!==2)continue}}if(p===1){Co(r,0),rs(r,s,0,!0);break}e:{switch(c=r,g=p,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:rs(c,s,Xn,!es);break e;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(p=im+300-Bn(),10<p)){if(rs(c,s,Xn,!es),Fa(c,0,!0)!==0)break e;c.timeoutHandle=SE(Q0.bind(null,c,l,Tn,Oh,nm,s,Xn,ma,So,es,g,2,-0,0),p);break e}Q0(c,l,Tn,Oh,nm,s,Xn,ma,So,es,g,0,-0,0)}}break}while(!0);Di(r)}function Q0(r,s,l,c,p,g,w,b,V,K,J,ie,Q,W){if(r.timeoutHandle=-1,ie=s.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(Su={stylesheets:null,count:0,unsuspend:aI},F0(s),ie=lI(),ie!==null)){r.cancelPendingCommit=ie(nE.bind(null,r,s,g,l,c,p,w,b,V,J,1,Q,W)),rs(r,g,w,!K);return}nE(r,s,g,l,c,p,w,b,V)}function AR(r){for(var s=r;;){var l=s.tag;if((l===0||l===11||l===15)&&s.flags&16384&&(l=s.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var p=l[c],g=p.getSnapshot;p=p.value;try{if(!Rn(g(),p))return!1}catch{return!1}}if(l=s.child,s.subtreeFlags&16384&&l!==null)l.return=s,s=l;else{if(s===r)break;for(;s.sibling===null;){if(s.return===null||s.return===r)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function rs(r,s,l,c){s&=~tm,s&=~ma,r.suspendedLanes|=s,r.pingedLanes&=~s,c&&(r.warmLanes|=s),c=r.expirationTimes;for(var p=s;0<p;){var g=31-rn(p),w=1<<g;c[g]=-1,p&=~w}l!==0&&_i(r,l,s)}function Dh(){return(Je&6)===0?(_u(0),!1):!0}function om(){if(Me!==null){if(et===0)var r=Me.return;else r=Me,lr=ua=null,bp(r),yo=null,ou=0,r=Me;for(;r!==null;)I0(r.alternate,r),r=r.return;Me=null}}function Co(r,s){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,HR(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),om(),ot=r,Me=l=sr(r.current,null),je=s,et=0,On=null,es=!1,wo=js(r,s),em=!1,So=Xn=tm=ma=ts=_t=0,Tn=mu=null,nm=!1,(s&8)!==0&&(s|=s&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=s;0<c;){var p=31-rn(c),g=1<<p;s|=r[p],c&=~g}return gr=s,eh(),l}function W0(r,s){Ne=null,$.H=vh,s===Zl||s===uh?(s=fv(),et=3):s===cv?(s=fv(),et=4):et=s===p0?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,On=s,Me===null&&(_t=1,bh(r,$n(s,r.current)))}function X0(){var r=$.H;return $.H=vh,r===null?vh:r}function Z0(){var r=$.A;return $.A=SR,r}function lm(){_t=4,es||(je&4194048)!==je&&Wn.current!==null||(wo=!0),(ts&134217727)===0&&(ma&134217727)===0||ot===null||rs(ot,je,Xn,!1)}function um(r,s,l){var c=Je;Je|=2;var p=X0(),g=Z0();(ot!==r||je!==s)&&(Oh=null,Co(r,s)),s=!1;var w=_t;e:do try{if(et!==0&&Me!==null){var b=Me,V=On;switch(et){case 8:om(),w=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(s=!0);var K=et;if(et=0,On=null,Ro(r,b,V,K),l&&wo){w=0;break e}break;default:K=et,et=0,On=null,Ro(r,b,V,K)}}CR(),w=_t;break}catch(J){W0(r,J)}while(!0);return s&&r.shellSuspendCounter++,lr=ua=null,Je=c,$.H=p,$.A=g,Me===null&&(ot=null,je=0,eh()),w}function CR(){for(;Me!==null;)J0(Me)}function RR(r,s){var l=Je;Je|=2;var c=X0(),p=Z0();ot!==r||je!==s?(Oh=null,Nh=Bn()+500,Co(r,s)):wo=js(r,s);e:do try{if(et!==0&&Me!==null){s=Me;var g=On;t:switch(et){case 1:et=0,On=null,Ro(r,s,g,1);break;case 2:case 9:if(hv(g)){et=0,On=null,eE(s);break}s=function(){et!==2&&et!==9||ot!==r||(et=7),Di(r)},g.then(s,s);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:hv(g)?(et=0,On=null,eE(s)):(et=0,On=null,Ro(r,s,g,7));break;case 5:var w=null;switch(Me.tag){case 26:w=Me.memoizedState;case 5:case 27:var b=Me;if(!w||kE(w)){et=0,On=null;var V=b.sibling;if(V!==null)Me=V;else{var K=b.return;K!==null?(Me=K,Mh(K)):Me=null}break t}}et=0,On=null,Ro(r,s,g,5);break;case 6:et=0,On=null,Ro(r,s,g,6);break;case 8:om(),_t=6;break e;default:throw Error(i(462))}}IR();break}catch(J){W0(r,J)}while(!0);return lr=ua=null,$.H=c,$.A=p,Je=l,Me!==null?0:(ot=null,je=0,eh(),_t)}function IR(){for(;Me!==null&&!Tl();)J0(Me)}function J0(r){var s=C0(r.alternate,r,gr);r.memoizedProps=r.pendingProps,s===null?Mh(r):Me=s}function eE(r){var s=r,l=s.alternate;switch(s.tag){case 15:case 0:s=E0(l,s,s.pendingProps,s.type,void 0,je);break;case 11:s=E0(l,s,s.pendingProps,s.type.render,s.ref,je);break;case 5:bp(s);default:I0(l,s),s=Me=tv(s,gr),s=C0(l,s,gr)}r.memoizedProps=r.pendingProps,s===null?Mh(r):Me=s}function Ro(r,s,l,c){lr=ua=null,bp(s),yo=null,ou=0;var p=s.return;try{if(_R(r,p,s,l,je)){_t=1,bh(r,$n(l,r.current)),Me=null;return}}catch(g){if(p!==null)throw Me=p,g;_t=1,bh(r,$n(l,r.current)),Me=null;return}s.flags&32768?(Ye||c===1?r=!0:wo||(je&536870912)!==0?r=!1:(es=r=!0,(c===2||c===9||c===3||c===6)&&(c=Wn.current,c!==null&&c.tag===13&&(c.flags|=16384))),tE(s,r)):Mh(s)}function Mh(r){var s=r;do{if((s.flags&32768)!==0){tE(s,es);return}r=s.return;var l=vR(s.alternate,s,gr);if(l!==null){Me=l;return}if(s=s.sibling,s!==null){Me=s;return}Me=s=r}while(s!==null);_t===0&&(_t=5)}function tE(r,s){do{var l=ER(r.alternate,r);if(l!==null){l.flags&=32767,Me=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!s&&(r=r.sibling,r!==null)){Me=r;return}Me=r=l}while(r!==null);_t=6,Me=null}function nE(r,s,l,c,p,g,w,b,V){r.cancelPendingCommit=null;do Ph();while(Zt!==0);if((Je&6)!==0)throw Error(i(327));if(s!==null){if(s===r.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=Jf,Rl(r,l,g,w,b,V),r===ot&&(Me=ot=null,je=0),bo=s,is=r,Ao=l,rm=g,sm=p,$0=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,DR(Vs,function(){return oE(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=$.T,$.T=null,p=oe.p,oe.p=2,w=Je,Je|=4;try{TR(r,s,l)}finally{Je=w,oe.p=p,$.T=c}}Zt=1,iE(),rE(),sE()}}function iE(){if(Zt===1){Zt=0;var r=is,s=bo,l=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||l){l=$.T,$.T=null;var c=oe.p;oe.p=2;var p=Je;Je|=4;try{z0(s,r);var g=Tm,w=Gy(r.containerInfo),b=g.focusedElem,V=g.selectionRange;if(w!==b&&b&&b.ownerDocument&&qy(b.ownerDocument.documentElement,b)){if(V!==null&&Kf(b)){var K=V.start,J=V.end;if(J===void 0&&(J=K),"selectionStart"in b)b.selectionStart=K,b.selectionEnd=Math.min(J,b.value.length);else{var ie=b.ownerDocument||document,Q=ie&&ie.defaultView||window;if(Q.getSelection){var W=Q.getSelection(),be=b.textContent.length,ve=Math.min(V.start,be),rt=V.end===void 0?ve:Math.min(V.end,be);!W.extend&&ve>rt&&(w=rt,rt=ve,ve=w);var F=Hy(b,ve),z=Hy(b,rt);if(F&&z&&(W.rangeCount!==1||W.anchorNode!==F.node||W.anchorOffset!==F.offset||W.focusNode!==z.node||W.focusOffset!==z.offset)){var Y=ie.createRange();Y.setStart(F.node,F.offset),W.removeAllRanges(),ve>rt?(W.addRange(Y),W.extend(z.node,z.offset)):(Y.setEnd(z.node,z.offset),W.addRange(Y))}}}}for(ie=[],W=b;W=W.parentNode;)W.nodeType===1&&ie.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ie.length;b++){var ne=ie[b];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}$h=!!Em,Tm=Em=null}finally{Je=p,oe.p=c,$.T=l}}r.current=s,Zt=2}}function rE(){if(Zt===2){Zt=0;var r=is,s=bo,l=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||l){l=$.T,$.T=null;var c=oe.p;oe.p=2;var p=Je;Je|=4;try{k0(r,s.alternate,s)}finally{Je=p,oe.p=c,$.T=l}}Zt=3}}function sE(){if(Zt===4||Zt===3){Zt=0,xc();var r=is,s=bo,l=Ao,c=$0;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Zt=5:(Zt=0,bo=is=null,aE(r,r.pendingLanes));var p=r.pendingLanes;if(p===0&&(ns=null),Ha(l),s=s.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(mt,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=$.T,p=oe.p,oe.p=2,$.T=null;try{for(var g=r.onRecoverableError,w=0;w<c.length;w++){var b=c[w];g(b.value,{componentStack:b.stack})}}finally{$.T=s,oe.p=p}}(Ao&3)!==0&&Ph(),Di(r),p=r.pendingLanes,(l&4194090)!==0&&(p&42)!==0?r===am?gu++:(gu=0,am=r):gu=0,_u(0)}}function aE(r,s){(r.pooledCacheLanes&=s)===0&&(s=r.pooledCache,s!=null&&(r.pooledCache=null,Wl(s)))}function Ph(r){return iE(),rE(),sE(),oE()}function oE(){if(Zt!==5)return!1;var r=is,s=rm;rm=0;var l=Ha(Ao),c=$.T,p=oe.p;try{oe.p=32>l?32:l,$.T=null,l=sm,sm=null;var g=is,w=Ao;if(Zt=0,bo=is=null,Ao=0,(Je&6)!==0)throw Error(i(331));var b=Je;if(Je|=4,q0(g.current),j0(g,g.current,w,l),Je=b,_u(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(mt,g)}catch{}return!0}finally{oe.p=p,$.T=c,aE(r,s)}}function lE(r,s,l){s=$n(l,s),s=Up(r.stateNode,s,2),r=Yr(r,s,2),r!==null&&(Ki(r,2),Di(r))}function at(r,s,l){if(r.tag===3)lE(r,r,l);else for(;s!==null;){if(s.tag===3){lE(s,r,l);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ns===null||!ns.has(c))){r=$n(l,r),l=d0(2),c=Yr(s,l,2),c!==null&&(f0(l,c,s,r),Ki(c,2),Di(c));break}}s=s.return}}function cm(r,s,l){var c=r.pingCache;if(c===null){c=r.pingCache=new bR;var p=new Set;c.set(s,p)}else p=c.get(s),p===void 0&&(p=new Set,c.set(s,p));p.has(l)||(em=!0,p.add(l),r=xR.bind(null,r,s,l),s.then(r,r))}function xR(r,s,l){var c=r.pingCache;c!==null&&c.delete(s),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,ot===r&&(je&l)===l&&(_t===4||_t===3&&(je&62914560)===je&&300>Bn()-im?(Je&2)===0&&Co(r,0):tm|=l,So===je&&(So=0)),Di(r)}function uE(r,s){s===0&&(s=Cl()),r=oo(r,s),r!==null&&(Ki(r,s),Di(r))}function NR(r){var s=r.memoizedState,l=0;s!==null&&(l=s.retryLane),uE(r,l)}function OR(r,s){var l=0;switch(r.tag){case 13:var c=r.stateNode,p=r.memoizedState;p!==null&&(l=p.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(s),uE(r,l)}function DR(r,s){return gi(r,s)}var kh=null,Io=null,hm=!1,Lh=!1,dm=!1,ga=0;function Di(r){r!==Io&&r.next===null&&(Io===null?kh=Io=r:Io=Io.next=r),Lh=!0,hm||(hm=!0,PR())}function _u(r,s){if(!dm&&Lh){dm=!0;do for(var l=!1,c=kh;c!==null;){if(r!==0){var p=c.pendingLanes;if(p===0)var g=0;else{var w=c.suspendedLanes,b=c.pingedLanes;g=(1<<31-rn(42|r)+1)-1,g&=p&~(w&~b),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,fE(c,g))}else g=je,g=Fa(c,c===ot?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||js(c,g)||(l=!0,fE(c,g));c=c.next}while(l);dm=!1}}function MR(){cE()}function cE(){Lh=hm=!1;var r=0;ga!==0&&(FR()&&(r=ga),ga=0);for(var s=Bn(),l=null,c=kh;c!==null;){var p=c.next,g=hE(c,s);g===0?(c.next=null,l===null?kh=p:l.next=p,p===null&&(Io=l)):(l=c,(r!==0||(g&3)!==0)&&(Lh=!0)),c=p}_u(r)}function hE(r,s){for(var l=r.suspendedLanes,c=r.pingedLanes,p=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var w=31-rn(g),b=1<<w,V=p[w];V===-1?((b&l)===0||(b&c)!==0)&&(p[w]=bl(b,s)):V<=s&&(r.expiredLanes|=b),g&=~b}if(s=ot,l=je,l=Fa(r,r===s?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,l===0||r===s&&(et===2||et===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&Ls(c),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||js(r,l)){if(s=l&-l,s===r.callbackPriority)return s;switch(c!==null&&Ls(c),Ha(l)){case 2:case 8:l=Ba;break;case 32:l=Vs;break;case 268435456:l=ja;break;default:l=Vs}return c=dE.bind(null,r),l=gi(l,c),r.callbackPriority=s,r.callbackNode=l,s}return c!==null&&c!==null&&Ls(c),r.callbackPriority=2,r.callbackNode=null,2}function dE(r,s){if(Zt!==0&&Zt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(Ph()&&r.callbackNode!==l)return null;var c=je;return c=Fa(r,r===ot?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(K0(r,c,s),hE(r,Bn()),r.callbackNode!=null&&r.callbackNode===l?dE.bind(null,r):null)}function fE(r,s){if(Ph())return null;K0(r,s,!0)}function PR(){qR(function(){(Je&6)!==0?gi(wl,MR):cE()})}function fm(){return ga===0&&(ga=Al()),ga}function pE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:Qa(""+r)}function mE(r,s){var l=s.ownerDocument.createElement("input");return l.name=s.name,l.value=s.value,r.id&&l.setAttribute("form",r.id),s.parentNode.insertBefore(l,s),r=new FormData(r),l.parentNode.removeChild(l),r}function kR(r,s,l,c,p){if(s==="submit"&&l&&l.stateNode===p){var g=pE((p[bt]||null).action),w=c.submitter;w&&(s=(s=w[bt]||null)?pE(s.formAction):w.getAttribute("formAction"),s!==null&&(g=s,w=null));var b=new Wa("action","action",null,c,p);r.push({event:b,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ga!==0){var V=w?mE(p,w):new FormData(p);Mp(l,{pending:!0,data:V,method:p.method,action:g},null,V)}}else typeof g=="function"&&(b.preventDefault(),V=w?mE(p,w):new FormData(p),Mp(l,{pending:!0,data:V,method:p.method,action:g},g,V))},currentTarget:p}]})}}for(var pm=0;pm<Zf.length;pm++){var mm=Zf[pm],LR=mm.toLowerCase(),VR=mm[0].toUpperCase()+mm.slice(1);ai(LR,"on"+VR)}ai(Ky,"onAnimationEnd"),ai(Qy,"onAnimationIteration"),ai(Wy,"onAnimationStart"),ai("dblclick","onDoubleClick"),ai("focusin","onFocus"),ai("focusout","onBlur"),ai(eR,"onTransitionRun"),ai(tR,"onTransitionStart"),ai(nR,"onTransitionCancel"),ai(Xy,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(yu));function gE(r,s){s=(s&4)!==0;for(var l=0;l<r.length;l++){var c=r[l],p=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var w=c.length-1;0<=w;w--){var b=c[w],V=b.instance,K=b.currentTarget;if(b=b.listener,V!==g&&p.isPropagationStopped())break e;g=b,p.currentTarget=K;try{g(p)}catch(J){Sh(J)}p.currentTarget=null,g=V}else for(w=0;w<c.length;w++){if(b=c[w],V=b.instance,K=b.currentTarget,b=b.listener,V!==g&&p.isPropagationStopped())break e;g=b,p.currentTarget=K;try{g(p)}catch(J){Sh(J)}p.currentTarget=null,g=V}}}}function Pe(r,s){var l=s[xl];l===void 0&&(l=s[xl]=new Set);var c=r+"__bubble";l.has(c)||(_E(s,r,2,!1),l.add(c))}function gm(r,s,l){var c=0;s&&(c|=4),_E(l,r,c,s)}var Vh="_reactListening"+Math.random().toString(36).slice(2);function _m(r){if(!r[Vh]){r[Vh]=!0,Nl.forEach(function(l){l!=="selectionchange"&&(UR.has(l)||gm(l,!1,r),gm(l,!0,r))});var s=r.nodeType===9?r:r.ownerDocument;s===null||s[Vh]||(s[Vh]=!0,gm("selectionchange",!1,s))}}function _E(r,s,l,c){switch(jE(s)){case 2:var p=hI;break;case 8:p=dI;break;default:p=Om}l=p.bind(null,s,l,r),p=void 0,!qn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),c?p!==void 0?r.addEventListener(s,l,{capture:!0,passive:p}):r.addEventListener(s,l,!0):p!==void 0?r.addEventListener(s,l,{passive:p}):r.addEventListener(s,l,!1)}function ym(r,s,l,c,p){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var b=c.stateNode.containerInfo;if(b===p)break;if(w===4)for(w=c.return;w!==null;){var V=w.tag;if((V===3||V===4)&&w.stateNode.containerInfo===p)return;w=w.return}for(;b!==null;){if(w=Qi(b),w===null)return;if(V=w.tag,V===5||V===6||V===26||V===27){c=g=w;continue e}b=b.parentNode}}c=c.return}zc(function(){var K=g,J=Hn(l),ie=[];e:{var Q=Zy.get(r);if(Q!==void 0){var W=Wa,be=r;switch(r){case"keypress":if(Si(l)===0)break e;case"keydown":case"keyup":W=no;break;case"focusin":be="focus",W=Ja;break;case"focusout":be="blur",W=Ja;break;case"beforeblur":case"afterblur":W=Ja;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=qf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Yc;break;case Ky:case Qy:case Wy:W=eo;break;case Xy:W=Qc;break;case"scroll":case"scrollend":W=Bc;break;case"wheel":W=io;break;case"copy":case"cut":case"paste":W=to;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Fl;break;case"toggle":case"beforetoggle":W=Xc}var ve=(s&4)!==0,rt=!ve&&(r==="scroll"||r==="scrollend"),F=ve?Q!==null?Q+"Capture":null:Q;ve=[];for(var z=K,Y;z!==null;){var ne=z;if(Y=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||Y===null||F===null||(ne=Qs(z,F),ne!=null&&ve.push(vu(z,ne,Y))),rt)break;z=z.return}0<ve.length&&(Q=new W(Q,be,null,l,J),ie.push({event:Q,listeners:ve}))}}if((s&7)===0){e:{if(Q=r==="mouseover"||r==="pointerover",W=r==="mouseout"||r==="pointerout",Q&&l!==Ji&&(be=l.relatedTarget||l.fromElement)&&(Qi(be)||be[jn]))break e;if((W||Q)&&(Q=J.window===J?J:(Q=J.ownerDocument)?Q.defaultView||Q.parentWindow:window,W?(be=l.relatedTarget||l.toElement,W=K,be=be?Qi(be):null,be!==null&&(rt=o(be),ve=be.tag,be!==rt||ve!==5&&ve!==27&&ve!==6)&&(be=null)):(W=null,be=K),W!==be)){if(ve=Gn,ne="onMouseLeave",F="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(ve=Fl,ne="onPointerLeave",F="onPointerEnter",z="pointer"),rt=W==null?Q:vi(W),Y=be==null?Q:vi(be),Q=new ve(ne,z+"leave",W,l,J),Q.target=rt,Q.relatedTarget=Y,ne=null,Qi(J)===K&&(ve=new ve(F,z+"enter",be,l,J),ve.target=Y,ve.relatedTarget=rt,ne=ve),rt=ne,W&&be)t:{for(ve=W,F=be,z=0,Y=ve;Y;Y=xo(Y))z++;for(Y=0,ne=F;ne;ne=xo(ne))Y++;for(;0<z-Y;)ve=xo(ve),z--;for(;0<Y-z;)F=xo(F),Y--;for(;z--;){if(ve===F||F!==null&&ve===F.alternate)break t;ve=xo(ve),F=xo(F)}ve=null}else ve=null;W!==null&&yE(ie,Q,W,ve,!1),be!==null&&rt!==null&&yE(ie,rt,be,ve,!0)}}e:{if(Q=K?vi(K):window,W=Q.nodeName&&Q.nodeName.toLowerCase(),W==="select"||W==="input"&&Q.type==="file")var me=Vy;else if(Dt(Q))if(Uy)me=X1;else{me=Q1;var De=K1}else W=Q.nodeName,!W||W.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?K&&kl(K.elementType)&&(me=Vy):me=W1;if(me&&(me=me(r,K))){rr(ie,me,l,J);break e}De&&De(r,Q,K),r==="focusout"&&K&&Q.type==="number"&&K.memoizedProps.value!=null&&Fr(Q,"number",Q.value)}switch(De=K?vi(K):window,r){case"focusin":(Dt(De)||De.contentEditable==="true")&&(ro=De,Qf=K,Gl=null);break;case"focusout":Gl=Qf=ro=null;break;case"mousedown":Wf=!0;break;case"contextmenu":case"mouseup":case"dragend":Wf=!1,$y(ie,l,J);break;case"selectionchange":if(J1)break;case"keydown":case"keyup":$y(ie,l,J)}var _e;if(Ci)e:{switch(r){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else ze?X(r,l)&&(Te="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Te="onCompositionStart");Te&&(T&&l.locale!=="ko"&&(ze||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&ze&&(_e=Vl()):(wi=J,Hr="value"in wi?wi.value:wi.textContent,ze=!0)),De=Uh(K,Te),0<De.length&&(Te=new Bl(Te,r,null,l,J),ie.push({event:Te,listeners:De}),_e?Te.data=_e:(_e=ce(l),_e!==null&&(Te.data=_e)))),(_e=y?Ot(r,l):Be(r,l))&&(Te=Uh(K,"onBeforeInput"),0<Te.length&&(De=new Bl("onBeforeInput","beforeinput",null,l,J),ie.push({event:De,listeners:Te}),De.data=_e)),kR(ie,r,K,l,J)}gE(ie,s)})}function vu(r,s,l){return{instance:r,listener:s,currentTarget:l}}function Uh(r,s){for(var l=s+"Capture",c=[];r!==null;){var p=r,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=Qs(r,l),p!=null&&c.unshift(vu(r,p,g)),p=Qs(r,s),p!=null&&c.push(vu(r,p,g))),r.tag===3)return c;r=r.return}return[]}function xo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function yE(r,s,l,c,p){for(var g=s._reactName,w=[];l!==null&&l!==c;){var b=l,V=b.alternate,K=b.stateNode;if(b=b.tag,V!==null&&V===c)break;b!==5&&b!==26&&b!==27||K===null||(V=K,p?(K=Qs(l,g),K!=null&&w.unshift(vu(l,K,V))):p||(K=Qs(l,g),K!=null&&w.push(vu(l,K,V)))),l=l.return}w.length!==0&&r.push({event:s,listeners:w})}var zR=/\r\n?/g,BR=/\u0000|\uFFFD/g;function vE(r){return(typeof r=="string"?r:""+r).replace(zR,`
`).replace(BR,"")}function EE(r,s){return s=vE(s),vE(r)===s}function zh(){}function it(r,s,l,c,p,g){switch(l){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Fn(r,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Fn(r,""+c);break;case"className":Ei(r,"class",c);break;case"tabIndex":Ei(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ei(r,l,c);break;case"style":Pl(r,c,g);break;case"data":if(s!=="object"){Ei(r,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||l!=="href")){r.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Qa(""+c),r.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(s!=="input"&&it(r,s,"name",p.name,p,null),it(r,s,"formEncType",p.formEncType,p,null),it(r,s,"formMethod",p.formMethod,p,null),it(r,s,"formTarget",p.formTarget,p,null)):(it(r,s,"encType",p.encType,p,null),it(r,s,"method",p.method,p,null),it(r,s,"target",p.target,p,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=Qa(""+c),r.setAttribute(l,c);break;case"onClick":c!=null&&(r.onclick=zh);break;case"onScroll":c!=null&&Pe("scroll",r);break;case"onScrollEnd":c!=null&&Pe("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}l=Qa(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""+c):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":c===!0?r.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,c):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(l,c):r.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(l):r.setAttribute(l,c);break;case"popover":Pe("beforetoggle",r),Pe("toggle",r),jr(r,"popover",c);break;case"xlinkActuate":Qt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Qt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Qt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Qt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Qt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Qt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Qt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Qt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Qt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":jr(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Ff.get(l)||l,jr(r,l,c))}}function vm(r,s,l,c,p,g){switch(l){case"style":Pl(r,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(p.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof c=="string"?Fn(r,c):(typeof c=="number"||typeof c=="bigint")&&Fn(r,""+c);break;case"onScroll":c!=null&&Pe("scroll",r);break;case"onScrollEnd":c!=null&&Pe("scrollend",r);break;case"onClick":c!=null&&(r.onclick=zh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qa.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(p=l.endsWith("Capture"),s=l.slice(2,p?l.length-7:void 0),g=r[bt]||null,g=g!=null?g[l]:null,typeof g=="function"&&r.removeEventListener(s,g,p),typeof c=="function")){typeof g!="function"&&g!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(s,c,p);break e}l in r?r[l]=c:c===!0?r.setAttribute(l,""):jr(r,l,c)}}}function Jt(r,s,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",r),Pe("load",r);var c=!1,p=!1,g;for(g in l)if(l.hasOwnProperty(g)){var w=l[g];if(w!=null)switch(g){case"src":c=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:it(r,s,g,w,l,null)}}p&&it(r,s,"srcSet",l.srcSet,l,null),c&&it(r,s,"src",l.src,l,null);return;case"input":Pe("invalid",r);var b=g=w=p=null,V=null,K=null;for(c in l)if(l.hasOwnProperty(c)){var J=l[c];if(J!=null)switch(c){case"name":p=J;break;case"type":w=J;break;case"checked":V=J;break;case"defaultChecked":K=J;break;case"value":g=J;break;case"defaultValue":b=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,s));break;default:it(r,s,c,J,l,null)}}$s(r,g,b,V,K,w,p,!1),Ka(r);return;case"select":Pe("invalid",r),c=w=g=null;for(p in l)if(l.hasOwnProperty(p)&&(b=l[p],b!=null))switch(p){case"value":g=b;break;case"defaultValue":w=b;break;case"multiple":c=b;default:it(r,s,p,b,l,null)}s=g,l=w,r.multiple=!!c,s!=null?Zi(r,!!c,s,!1):l!=null&&Zi(r,!!c,l,!0);return;case"textarea":Pe("invalid",r),g=p=c=null;for(w in l)if(l.hasOwnProperty(w)&&(b=l[w],b!=null))switch(w){case"value":c=b;break;case"defaultValue":p=b;break;case"children":g=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:it(r,s,w,b,l,null)}Ys(r,c,p,g),Ka(r);return;case"option":for(V in l)if(l.hasOwnProperty(V)&&(c=l[V],c!=null))switch(V){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:it(r,s,V,c,l,null)}return;case"dialog":Pe("beforetoggle",r),Pe("toggle",r),Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":Pe("load",r);break;case"video":case"audio":for(c=0;c<yu.length;c++)Pe(yu[c],r);break;case"image":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"embed":case"source":case"link":Pe("error",r),Pe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in l)if(l.hasOwnProperty(K)&&(c=l[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:it(r,s,K,c,l,null)}return;default:if(kl(s)){for(J in l)l.hasOwnProperty(J)&&(c=l[J],c!==void 0&&vm(r,s,J,c,l,void 0));return}}for(b in l)l.hasOwnProperty(b)&&(c=l[b],c!=null&&it(r,s,b,c,l,null))}function jR(r,s,l,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,w=null,b=null,V=null,K=null,J=null;for(W in l){var ie=l[W];if(l.hasOwnProperty(W)&&ie!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":V=ie;default:c.hasOwnProperty(W)||it(r,s,W,null,c,ie)}}for(var Q in c){var W=c[Q];if(ie=l[Q],c.hasOwnProperty(Q)&&(W!=null||ie!=null))switch(Q){case"type":g=W;break;case"name":p=W;break;case"checked":K=W;break;case"defaultChecked":J=W;break;case"value":w=W;break;case"defaultValue":b=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:W!==ie&&it(r,s,Q,W,c,ie)}}Cn(r,w,b,V,K,J,g,p);return;case"select":W=w=b=Q=null;for(g in l)if(V=l[g],l.hasOwnProperty(g)&&V!=null)switch(g){case"value":break;case"multiple":W=V;default:c.hasOwnProperty(g)||it(r,s,g,null,c,V)}for(p in c)if(g=c[p],V=l[p],c.hasOwnProperty(p)&&(g!=null||V!=null))switch(p){case"value":Q=g;break;case"defaultValue":b=g;break;case"multiple":w=g;default:g!==V&&it(r,s,p,g,c,V)}s=b,l=w,c=W,Q!=null?Zi(r,!!l,Q,!1):!!c!=!!l&&(s!=null?Zi(r,!!l,s,!0):Zi(r,!!l,l?[]:"",!1));return;case"textarea":W=Q=null;for(b in l)if(p=l[b],l.hasOwnProperty(b)&&p!=null&&!c.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:it(r,s,b,null,c,p)}for(w in c)if(p=c[w],g=l[w],c.hasOwnProperty(w)&&(p!=null||g!=null))switch(w){case"value":Q=p;break;case"defaultValue":W=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(i(91));break;default:p!==g&&it(r,s,w,p,c,g)}tt(r,Q,W);return;case"option":for(var be in l)if(Q=l[be],l.hasOwnProperty(be)&&Q!=null&&!c.hasOwnProperty(be))switch(be){case"selected":r.selected=!1;break;default:it(r,s,be,null,c,Q)}for(V in c)if(Q=c[V],W=l[V],c.hasOwnProperty(V)&&Q!==W&&(Q!=null||W!=null))switch(V){case"selected":r.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:it(r,s,V,Q,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in l)Q=l[ve],l.hasOwnProperty(ve)&&Q!=null&&!c.hasOwnProperty(ve)&&it(r,s,ve,null,c,Q);for(K in c)if(Q=c[K],W=l[K],c.hasOwnProperty(K)&&Q!==W&&(Q!=null||W!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:it(r,s,K,Q,c,W)}return;default:if(kl(s)){for(var rt in l)Q=l[rt],l.hasOwnProperty(rt)&&Q!==void 0&&!c.hasOwnProperty(rt)&&vm(r,s,rt,void 0,c,Q);for(J in c)Q=c[J],W=l[J],!c.hasOwnProperty(J)||Q===W||Q===void 0&&W===void 0||vm(r,s,J,Q,c,W);return}}for(var F in l)Q=l[F],l.hasOwnProperty(F)&&Q!=null&&!c.hasOwnProperty(F)&&it(r,s,F,null,c,Q);for(ie in c)Q=c[ie],W=l[ie],!c.hasOwnProperty(ie)||Q===W||Q==null&&W==null||it(r,s,ie,Q,c,W)}var Em=null,Tm=null;function Bh(r){return r.nodeType===9?r:r.ownerDocument}function TE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function wE(r,s){if(r===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&s==="foreignObject"?0:r}function wm(r,s){return r==="textarea"||r==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Sm=null;function FR(){var r=window.event;return r&&r.type==="popstate"?r===Sm?!1:(Sm=r,!0):(Sm=null,!1)}var SE=typeof setTimeout=="function"?setTimeout:void 0,HR=typeof clearTimeout=="function"?clearTimeout:void 0,bE=typeof Promise=="function"?Promise:void 0,qR=typeof queueMicrotask=="function"?queueMicrotask:typeof bE<"u"?function(r){return bE.resolve(null).then(r).catch(GR)}:SE;function GR(r){setTimeout(function(){throw r})}function ss(r){return r==="head"}function AE(r,s){var l=s,c=0,p=0;do{var g=l.nextSibling;if(r.removeChild(l),g&&g.nodeType===8)if(l=g.data,l==="/$"){if(0<c&&8>c){l=c;var w=r.ownerDocument;if(l&1&&Eu(w.documentElement),l&2&&Eu(w.body),l&4)for(l=w.head,Eu(l),w=l.firstChild;w;){var b=w.nextSibling,V=w.nodeName;w[Fs]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&w.rel.toLowerCase()==="stylesheet"||l.removeChild(w),w=b}}if(p===0){r.removeChild(g),Iu(s);return}p--}else l==="$"||l==="$?"||l==="$!"?p++:c=l.charCodeAt(0)-48;else c=0;l=g}while(l);Iu(s)}function bm(r){var s=r.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var l=s;switch(s=s.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":bm(l),Br(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function $R(r,s,l,c){for(;r.nodeType===1;){var p=l;if(r.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Fs])switch(s){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==p.rel||r.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||r.getAttribute("title")!==(p.title==null?null:p.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(p.src==null?null:p.src)||r.getAttribute("type")!==(p.type==null?null:p.type)||r.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(s==="input"&&r.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=li(r.nextSibling),r===null)break}return null}function YR(r,s,l){if(s==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=li(r.nextSibling),r===null))return null;return r}function Am(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState==="complete"}function KR(r,s){var l=r.ownerDocument;if(r.data!=="$?"||l.readyState==="complete")s();else{var c=function(){s(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function li(r){for(;r!=null;r=r.nextSibling){var s=r.nodeType;if(s===1||s===3)break;if(s===8){if(s=r.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return r}var Cm=null;function CE(r){r=r.previousSibling;for(var s=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"){if(s===0)return r;s--}else l==="/$"&&s++}r=r.previousSibling}return null}function RE(r,s,l){switch(s=Bh(l),r){case"html":if(r=s.documentElement,!r)throw Error(i(452));return r;case"head":if(r=s.head,!r)throw Error(i(453));return r;case"body":if(r=s.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function Eu(r){for(var s=r.attributes;s.length;)r.removeAttributeNode(s[0]);Br(r)}var Zn=new Map,IE=new Set;function jh(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var _r=oe.d;oe.d={f:QR,r:WR,D:XR,C:ZR,L:JR,m:eI,X:nI,S:tI,M:iI};function QR(){var r=_r.f(),s=Dh();return r||s}function WR(r){var s=yi(r);s!==null&&s.tag===5&&s.type==="form"?Kv(s):_r.r(r)}var No=typeof document>"u"?null:document;function xE(r,s,l){var c=No;if(c&&typeof s=="string"&&s){var p=At(s);p='link[rel="'+r+'"][href="'+p+'"]',typeof l=="string"&&(p+='[crossorigin="'+l+'"]'),IE.has(p)||(IE.add(p),r={rel:r,crossOrigin:l,href:s},c.querySelector(p)===null&&(s=c.createElement("link"),Jt(s,"link",r),vt(s),c.head.appendChild(s)))}}function XR(r){_r.D(r),xE("dns-prefetch",r,null)}function ZR(r,s){_r.C(r,s),xE("preconnect",r,s)}function JR(r,s,l){_r.L(r,s,l);var c=No;if(c&&r&&s){var p='link[rel="preload"][as="'+At(s)+'"]';s==="image"&&l&&l.imageSrcSet?(p+='[imagesrcset="'+At(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(p+='[imagesizes="'+At(l.imageSizes)+'"]')):p+='[href="'+At(r)+'"]';var g=p;switch(s){case"style":g=Oo(r);break;case"script":g=Do(r)}Zn.has(g)||(r=_({rel:"preload",href:s==="image"&&l&&l.imageSrcSet?void 0:r,as:s},l),Zn.set(g,r),c.querySelector(p)!==null||s==="style"&&c.querySelector(Tu(g))||s==="script"&&c.querySelector(wu(g))||(s=c.createElement("link"),Jt(s,"link",r),vt(s),c.head.appendChild(s)))}}function eI(r,s){_r.m(r,s);var l=No;if(l&&r){var c=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+At(c)+'"][href="'+At(r)+'"]',g=p;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Do(r)}if(!Zn.has(g)&&(r=_({rel:"modulepreload",href:r},s),Zn.set(g,r),l.querySelector(p)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(wu(g)))return}c=l.createElement("link"),Jt(c,"link",r),vt(c),l.head.appendChild(c)}}}function tI(r,s,l){_r.S(r,s,l);var c=No;if(c&&r){var p=pn(c).hoistableStyles,g=Oo(r);s=s||"default";var w=p.get(g);if(!w){var b={loading:0,preload:null};if(w=c.querySelector(Tu(g)))b.loading=5;else{r=_({rel:"stylesheet",href:r,"data-precedence":s},l),(l=Zn.get(g))&&Rm(r,l);var V=w=c.createElement("link");vt(V),Jt(V,"link",r),V._p=new Promise(function(K,J){V.onload=K,V.onerror=J}),V.addEventListener("load",function(){b.loading|=1}),V.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Fh(w,s,c)}w={type:"stylesheet",instance:w,count:1,state:b},p.set(g,w)}}}function nI(r,s){_r.X(r,s);var l=No;if(l&&r){var c=pn(l).hoistableScripts,p=Do(r),g=c.get(p);g||(g=l.querySelector(wu(p)),g||(r=_({src:r,async:!0},s),(s=Zn.get(p))&&Im(r,s),g=l.createElement("script"),vt(g),Jt(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(p,g))}}function iI(r,s){_r.M(r,s);var l=No;if(l&&r){var c=pn(l).hoistableScripts,p=Do(r),g=c.get(p);g||(g=l.querySelector(wu(p)),g||(r=_({src:r,async:!0,type:"module"},s),(s=Zn.get(p))&&Im(r,s),g=l.createElement("script"),vt(g),Jt(g,"link",r),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(p,g))}}function NE(r,s,l,c){var p=(p=we.current)?jh(p):null;if(!p)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(s=Oo(l.href),l=pn(p).hoistableStyles,c=l.get(s),c||(c={type:"style",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=Oo(l.href);var g=pn(p).hoistableStyles,w=g.get(r);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,w),(g=p.querySelector(Tu(r)))&&!g._p&&(w.instance=g,w.state.loading=5),Zn.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Zn.set(r,l),g||rI(p,r,l,w.state))),s&&c===null)throw Error(i(528,""));return w}if(s&&c!==null)throw Error(i(529,""));return null;case"script":return s=l.async,l=l.src,typeof l=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Do(l),l=pn(p).hoistableScripts,c=l.get(s),c||(c={type:"script",instance:null,count:0,state:null},l.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function Oo(r){return'href="'+At(r)+'"'}function Tu(r){return'link[rel="stylesheet"]['+r+"]"}function OE(r){return _({},r,{"data-precedence":r.precedence,precedence:null})}function rI(r,s,l,c){r.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=r.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),Jt(s,"link",l),vt(s),r.head.appendChild(s))}function Do(r){return'[src="'+At(r)+'"]'}function wu(r){return"script[async]"+r}function DE(r,s,l){if(s.count++,s.instance===null)switch(s.type){case"style":var c=r.querySelector('style[data-href~="'+At(l.href)+'"]');if(c)return s.instance=c,vt(c),c;var p=_({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),vt(c),Jt(c,"style",p),Fh(c,l.precedence,r),s.instance=c;case"stylesheet":p=Oo(l.href);var g=r.querySelector(Tu(p));if(g)return s.state.loading|=4,s.instance=g,vt(g),g;c=OE(l),(p=Zn.get(p))&&Rm(c,p),g=(r.ownerDocument||r).createElement("link"),vt(g);var w=g;return w._p=new Promise(function(b,V){w.onload=b,w.onerror=V}),Jt(g,"link",c),s.state.loading|=4,Fh(g,l.precedence,r),s.instance=g;case"script":return g=Do(l.src),(p=r.querySelector(wu(g)))?(s.instance=p,vt(p),p):(c=l,(p=Zn.get(g))&&(c=_({},l),Im(c,p)),r=r.ownerDocument||r,p=r.createElement("script"),vt(p),Jt(p,"link",c),r.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Fh(c,l.precedence,r));return s.instance}function Fh(r,s,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=c.length?c[c.length-1]:null,g=p,w=0;w<c.length;w++){var b=c[w];if(b.dataset.precedence===s)g=b;else if(g!==p)break}g?g.parentNode.insertBefore(r,g.nextSibling):(s=l.nodeType===9?l.head:l,s.insertBefore(r,s.firstChild))}function Rm(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.title==null&&(r.title=s.title)}function Im(r,s){r.crossOrigin==null&&(r.crossOrigin=s.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=s.referrerPolicy),r.integrity==null&&(r.integrity=s.integrity)}var Hh=null;function ME(r,s,l){if(Hh===null){var c=new Map,p=Hh=new Map;p.set(l,c)}else p=Hh,c=p.get(l),c||(c=new Map,p.set(l,c));if(c.has(r))return c;for(c.set(r,null),l=l.getElementsByTagName(r),p=0;p<l.length;p++){var g=l[p];if(!(g[Fs]||g[Nt]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(s)||"";w=r+w;var b=c.get(w);b?b.push(g):c.set(w,[g])}}return c}function PE(r,s,l){r=r.ownerDocument||r,r.head.insertBefore(l,s==="title"?r.querySelector("head > title"):null)}function sI(r,s,l){if(l===1||s.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return r=s.disabled,typeof s.precedence=="string"&&r==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function kE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}var Su=null;function aI(){}function oI(r,s,l){if(Su===null)throw Error(i(475));var c=Su;if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var p=Oo(l.href),g=r.querySelector(Tu(p));if(g){r=g._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(c.count++,c=qh.bind(c),r.then(c,c)),s.state.loading|=4,s.instance=g,vt(g);return}g=r.ownerDocument||r,l=OE(l),(p=Zn.get(p))&&Rm(l,p),g=g.createElement("link"),vt(g);var w=g;w._p=new Promise(function(b,V){w.onload=b,w.onerror=V}),Jt(g,"link",l),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,r),(r=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=qh.bind(c),r.addEventListener("load",s),r.addEventListener("error",s))}}function lI(){if(Su===null)throw Error(i(475));var r=Su;return r.stylesheets&&r.count===0&&xm(r,r.stylesheets),0<r.count?function(s){var l=setTimeout(function(){if(r.stylesheets&&xm(r,r.stylesheets),r.unsuspend){var c=r.unsuspend;r.unsuspend=null,c()}},6e4);return r.unsuspend=s,function(){r.unsuspend=null,clearTimeout(l)}}:null}function qh(){if(this.count--,this.count===0){if(this.stylesheets)xm(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Gh=null;function xm(r,s){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Gh=new Map,s.forEach(uI,r),Gh=null,qh.call(r))}function uI(r,s){if(!(s.state.loading&4)){var l=Gh.get(r);if(l)var c=l.get(null);else{l=new Map,Gh.set(r,l);for(var p=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var w=p[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(l.set(w.dataset.precedence,w),c=w)}c&&l.set(null,c)}p=s.instance,w=p.getAttribute("data-precedence"),g=l.get(w)||c,g===c&&l.set(null,p),l.set(w,p),this.count++,c=qh.bind(this),p.addEventListener("load",c),p.addEventListener("error",c),g?g.parentNode.insertBefore(p,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(p,r.firstChild)),s.state.loading|=4}}var bu={$$typeof:j,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function cI(r,s,l,c,p,g,w,b){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yi(0),this.hiddenUpdates=Yi(null),this.identifierPrefix=c,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function LE(r,s,l,c,p,g,w,b,V,K,J,ie){return r=new cI(r,s,l,w,b,V,K,ie),s=1,g===!0&&(s|=24),g=In(3,null,null,s),r.current=g,g.stateNode=r,s=cp(),s.refCount++,r.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:l,cache:s},pp(g),r}function VE(r){return r?(r=lo,r):lo}function UE(r,s,l,c,p,g){p=VE(p),c.context===null?c.context=p:c.pendingContext=p,c=$r(s),c.payload={element:l},g=g===void 0?null:g,g!==null&&(c.callback=g),l=Yr(r,c,s),l!==null&&(Mn(l,r,s),eu(l,r,s))}function zE(r,s){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<s?l:s}}function Nm(r,s){zE(r,s),(r=r.alternate)&&zE(r,s)}function BE(r){if(r.tag===13){var s=oo(r,67108864);s!==null&&Mn(s,r,67108864),Nm(r,67108864)}}var $h=!0;function hI(r,s,l,c){var p=$.T;$.T=null;var g=oe.p;try{oe.p=2,Om(r,s,l,c)}finally{oe.p=g,$.T=p}}function dI(r,s,l,c){var p=$.T;$.T=null;var g=oe.p;try{oe.p=8,Om(r,s,l,c)}finally{oe.p=g,$.T=p}}function Om(r,s,l,c){if($h){var p=Dm(c);if(p===null)ym(r,s,c,Yh,l),FE(r,c);else if(pI(p,r,s,l,c))c.stopPropagation();else if(FE(r,c),s&4&&-1<fI.indexOf(r)){for(;p!==null;){var g=yi(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=ii(g.pendingLanes);if(w!==0){var b=g;for(b.pendingLanes|=2,b.entangledLanes|=2;w;){var V=1<<31-rn(w);b.entanglements[1]|=V,w&=~V}Di(g),(Je&6)===0&&(Nh=Bn()+500,_u(0))}}break;case 13:b=oo(g,2),b!==null&&Mn(b,g,2),Dh(),Nm(g,2)}if(g=Dm(c),g===null&&ym(r,s,c,Yh,l),g===p)break;p=g}p!==null&&c.stopPropagation()}else ym(r,s,c,null,l)}}function Dm(r){return r=Hn(r),Mm(r)}var Yh=null;function Mm(r){if(Yh=null,r=Qi(r),r!==null){var s=o(r);if(s===null)r=null;else{var l=s.tag;if(l===13){if(r=u(s),r!==null)return r;r=null}else if(l===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;r=null}else s!==r&&(r=null)}}return Yh=r,null}function jE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lf()){case wl:return 2;case Ba:return 8;case Vs:case Vf:return 32;case ja:return 268435456;default:return 32}default:return 32}}var Pm=!1,as=null,os=null,ls=null,Au=new Map,Cu=new Map,us=[],fI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function FE(r,s){switch(r){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":Au.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cu.delete(s.pointerId)}}function Ru(r,s,l,c,p,g){return r===null||r.nativeEvent!==g?(r={blockedOn:s,domEventName:l,eventSystemFlags:c,nativeEvent:g,targetContainers:[p]},s!==null&&(s=yi(s),s!==null&&BE(s)),r):(r.eventSystemFlags|=c,s=r.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),r)}function pI(r,s,l,c,p){switch(s){case"focusin":return as=Ru(as,r,s,l,c,p),!0;case"dragenter":return os=Ru(os,r,s,l,c,p),!0;case"mouseover":return ls=Ru(ls,r,s,l,c,p),!0;case"pointerover":var g=p.pointerId;return Au.set(g,Ru(Au.get(g)||null,r,s,l,c,p)),!0;case"gotpointercapture":return g=p.pointerId,Cu.set(g,Ru(Cu.get(g)||null,r,s,l,c,p)),!0}return!1}function HE(r){var s=Qi(r.target);if(s!==null){var l=o(s);if(l!==null){if(s=l.tag,s===13){if(s=u(l),s!==null){r.blockedOn=s,Dc(r.priority,function(){if(l.tag===13){var c=Dn();c=Vr(c);var p=oo(l,c);p!==null&&Mn(p,l,c),Nm(l,c)}});return}}else if(s===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Kh(r){if(r.blockedOn!==null)return!1;for(var s=r.targetContainers;0<s.length;){var l=Dm(r.nativeEvent);if(l===null){l=r.nativeEvent;var c=new l.constructor(l.type,l);Ji=c,l.target.dispatchEvent(c),Ji=null}else return s=yi(l),s!==null&&BE(s),r.blockedOn=l,!1;s.shift()}return!0}function qE(r,s,l){Kh(r)&&l.delete(s)}function mI(){Pm=!1,as!==null&&Kh(as)&&(as=null),os!==null&&Kh(os)&&(os=null),ls!==null&&Kh(ls)&&(ls=null),Au.forEach(qE),Cu.forEach(qE)}function Qh(r,s){r.blockedOn===s&&(r.blockedOn=null,Pm||(Pm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,mI)))}var Wh=null;function GE(r){Wh!==r&&(Wh=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wh===r&&(Wh=null);for(var s=0;s<r.length;s+=3){var l=r[s],c=r[s+1],p=r[s+2];if(typeof c!="function"){if(Mm(c||l)===null)continue;break}var g=yi(l);g!==null&&(r.splice(s,3),s-=3,Mp(g,{pending:!0,data:p,method:l.method,action:c},c,p))}}))}function Iu(r){function s(V){return Qh(V,r)}as!==null&&Qh(as,r),os!==null&&Qh(os,r),ls!==null&&Qh(ls,r),Au.forEach(s),Cu.forEach(s);for(var l=0;l<us.length;l++){var c=us[l];c.blockedOn===r&&(c.blockedOn=null)}for(;0<us.length&&(l=us[0],l.blockedOn===null);)HE(l),l.blockedOn===null&&us.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var p=l[c],g=l[c+1],w=p[bt]||null;if(typeof g=="function")w||GE(l);else if(w){var b=null;if(g&&g.hasAttribute("formAction")){if(p=g,w=g[bt]||null)b=w.formAction;else if(Mm(p)!==null)continue}else b=w.action;typeof b=="function"?l[c+1]=b:(l.splice(c,3),c-=3),GE(l)}}}function km(r){this._internalRoot=r}Xh.prototype.render=km.prototype.render=function(r){var s=this._internalRoot;if(s===null)throw Error(i(409));var l=s.current,c=Dn();UE(l,c,r,s,null,null)},Xh.prototype.unmount=km.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var s=r.containerInfo;UE(r.current,2,null,r,null,null),Dh(),s[jn]=null}};function Xh(r){this._internalRoot=r}Xh.prototype.unstable_scheduleHydration=function(r){if(r){var s=Ur();r={blockedOn:null,target:r,priority:s};for(var l=0;l<us.length&&s!==0&&s<us[l].priority;l++);us.splice(l,0,r),l===0&&HE(r)}};var $E=e.version;if($E!=="19.1.0")throw Error(i(527,$E,"19.1.0"));oe.findDOMNode=function(r){var s=r._reactInternals;if(s===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=f(s),r=r!==null?m(r):null,r=r===null?null:r.stateNode,r};var gI={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zh.isDisabled&&Zh.supportsFiber)try{mt=Zh.inject(gI),Ze=Zh}catch{}}return Nu.createRoot=function(r,s){if(!a(r))throw Error(i(299));var l=!1,c="",p=l0,g=u0,w=c0,b=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(b=s.unstable_transitionCallbacks)),s=LE(r,1,!1,null,null,l,c,p,g,w,b,null),r[jn]=s.current,_m(r),new km(s)},Nu.hydrateRoot=function(r,s,l){if(!a(r))throw Error(i(299));var c=!1,p="",g=l0,w=u0,b=c0,V=null,K=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(p=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(w=l.onCaughtError),l.onRecoverableError!==void 0&&(b=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(V=l.unstable_transitionCallbacks),l.formState!==void 0&&(K=l.formState)),s=LE(r,1,!0,s,l??null,c,p,g,w,b,V,K),s.context=VE(null),l=s.current,c=Dn(),c=Vr(c),p=$r(c),p.callback=null,Yr(l,p,c),l=c,s.current.lanes=l,Ki(s,l),Di(s),r[jn]=s.current,_m(r),new Xh(s)},Nu.version="19.1.0",Nu}var nT;function CI(){if(nT)return Um.exports;nT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Um.exports=AI(),Um.exports}var RI=CI();const II=xS(RI);var Ou={},iT;function xI(){if(iT)return Ou;iT=1,Object.defineProperty(Ou,"__esModule",{value:!0}),Ou.parse=u,Ou.serialize=m;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const E=function(){};return E.prototype=Object.create(null),E})();function u(E,A){const S=new o,D=E.length;if(D<2)return S;const L=(A==null?void 0:A.decode)||_;let M=0;do{const H=E.indexOf("=",M);if(H===-1)break;const j=E.indexOf(";",M),ee=j===-1?D:j;if(H>ee){M=E.lastIndexOf(";",H-1)+1;continue}const Z=h(E,M,H),ue=f(E,H,Z),P=E.slice(Z,ue);if(S[P]===void 0){let R=h(E,H+1,ee),I=f(E,ee,R);const x=L(E.slice(R,I));S[P]=x}M=ee+1}while(M<D);return S}function h(E,A,S){do{const D=E.charCodeAt(A);if(D!==32&&D!==9)return A}while(++A<S);return S}function f(E,A,S){for(;A>S;){const D=E.charCodeAt(--A);if(D!==32&&D!==9)return A+1}return S}function m(E,A,S){const D=(S==null?void 0:S.encode)||encodeURIComponent;if(!n.test(E))throw new TypeError(`argument name is invalid: ${E}`);const L=D(A);if(!e.test(L))throw new TypeError(`argument val is invalid: ${A}`);let M=E+"="+L;if(!S)return M;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);M+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);M+="; Domain="+S.domain}if(S.path){if(!i.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);M+="; Path="+S.path}if(S.expires){if(!v(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);M+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(M+="; HttpOnly"),S.secure&&(M+="; Secure"),S.partitioned&&(M+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":M+="; Priority=Low";break;case"medium":M+="; Priority=Medium";break;case"high":M+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":M+="; SameSite=Strict";break;case"lax":M+="; SameSite=Lax";break;case"none":M+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return M}function _(E){if(E.indexOf("%")===-1)return E;try{return decodeURIComponent(E)}catch{return E}}function v(E){return a.call(E)==="[object Date]"}return Ou}xI();var rT="popstate";function NI(n={}){function e(i,a){let{pathname:o,search:u,hash:h}=i.location;return gg("",{pathname:o,search:u,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:ec(a)}return DI(e,t,null,n)}function ft(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function fi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OI(){return Math.random().toString(36).substring(2,10)}function sT(n,e){return{usr:n.state,key:n.key,idx:e}}function gg(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?ol(e):e,state:t,key:e&&e.key||i||OI()}}function ec({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function ol(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function DI(n,e,t,i={}){let{window:a=document.defaultView,v5Compat:o=!1}=i,u=a.history,h="POP",f=null,m=_();m==null&&(m=0,u.replaceState({...u.state,idx:m},""));function _(){return(u.state||{idx:null}).idx}function v(){h="POP";let L=_(),M=L==null?null:L-m;m=L,f&&f({action:h,location:D.location,delta:M})}function E(L,M){h="PUSH";let H=gg(D.location,L,M);m=_()+1;let j=sT(H,m),ee=D.createHref(H);try{u.pushState(j,"",ee)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;a.location.assign(ee)}o&&f&&f({action:h,location:D.location,delta:1})}function A(L,M){h="REPLACE";let H=gg(D.location,L,M);m=_();let j=sT(H,m),ee=D.createHref(H);u.replaceState(j,"",ee),o&&f&&f({action:h,location:D.location,delta:0})}function S(L){return MI(L)}let D={get action(){return h},get location(){return n(a,u)},listen(L){if(f)throw new Error("A history only accepts one active listener");return a.addEventListener(rT,v),f=L,()=>{a.removeEventListener(rT,v),f=null}},createHref(L){return e(a,L)},createURL:S,encodeLocation(L){let M=S(L);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:E,replace:A,go(L){return u.go(L)}};return D}function MI(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ft(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:ec(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function NS(n,e,t="/"){return PI(n,e,t,!1)}function PI(n,e,t,i){let a=typeof e=="string"?ol(e):e,o=Rr(a.pathname||"/",t);if(o==null)return null;let u=OS(n);kI(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let m=$I(o);h=qI(u[f],m,i)}return h}function OS(n,e=[],t=[],i=""){let a=(o,u,h)=>{let f={relativePath:h===void 0?o.path||"":h,caseSensitive:o.caseSensitive===!0,childrenIndex:u,route:o};f.relativePath.startsWith("/")&&(ft(f.relativePath.startsWith(i),`Absolute route path "${f.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(i.length));let m=br([i,f.relativePath]),_=t.concat(f);o.children&&o.children.length>0&&(ft(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),OS(o.children,e,_,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:FI(m,o.index),routesMeta:_})};return n.forEach((o,u)=>{var h;if(o.path===""||!((h=o.path)!=null&&h.includes("?")))a(o,u);else for(let f of DS(o.path))a(o,u,f)}),e}function DS(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(i.length===0)return a?[o,""]:[o];let u=DS(i.join("/")),h=[];return h.push(...u.map(f=>f===""?o:[o,f].join("/"))),a&&h.push(...u),h.map(f=>n.startsWith("/")&&f===""?"/":f)}function kI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:HI(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var LI=/^:[\w-]+$/,VI=3,UI=2,zI=1,BI=10,jI=-2,aT=n=>n==="*";function FI(n,e){let t=n.split("/"),i=t.length;return t.some(aT)&&(i+=jI),e&&(i+=UI),t.filter(a=>!aT(a)).reduce((a,o)=>a+(LI.test(o)?VI:o===""?zI:BI),i)}function HI(n,e){return n.length===e.length&&n.slice(0,-1).every((i,a)=>i===e[a])?n[n.length-1]-e[e.length-1]:0}function qI(n,e,t=!1){let{routesMeta:i}=n,a={},o="/",u=[];for(let h=0;h<i.length;++h){let f=i[h],m=h===i.length-1,_=o==="/"?e:e.slice(o.length)||"/",v=Sd({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},_),E=f.route;if(!v&&m&&t&&!i[i.length-1].route.index&&(v=Sd({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},_)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:br([o,v.pathname]),pathnameBase:WI(br([o,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(o=br([o,v.pathnameBase]))}return u}function Sd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=GI(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),h=a.slice(1);return{params:i.reduce((m,{paramName:_,isOptional:v},E)=>{if(_==="*"){let S=h[E]||"";u=o.slice(0,o.length-S.length).replace(/(.)\/+$/,"$1")}const A=h[E];return v&&!A?m[_]=void 0:m[_]=(A||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:u,pattern:n}}function GI(n,e=!1,t=!0){fi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function $I(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return fi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Rr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function YI(n,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof n=="string"?ol(n):n;return{pathname:t?t.startsWith("/")?t:KI(t,e):e,search:XI(i),hash:ZI(a)}}function KI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Fm(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function QI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function l_(n){let e=QI(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function u_(n,e,t,i=!1){let a;typeof n=="string"?a=ol(n):(a={...n},ft(!a.pathname||!a.pathname.includes("?"),Fm("?","pathname","search",a)),ft(!a.pathname||!a.pathname.includes("#"),Fm("#","pathname","hash",a)),ft(!a.search||!a.search.includes("#"),Fm("#","search","hash",a)));let o=n===""||a.pathname==="",u=o?"/":a.pathname,h;if(u==null)h=t;else{let v=e.length-1;if(!i&&u.startsWith("..")){let E=u.split("/");for(;E[0]==="..";)E.shift(),v-=1;a.pathname=E.join("/")}h=v>=0?e[v]:"/"}let f=YI(a,h),m=u&&u!=="/"&&u.endsWith("/"),_=(o||u===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||_)&&(f.pathname+="/"),f}var br=n=>n.join("/").replace(/\/\/+/g,"/"),WI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),XI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ZI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function JI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var MS=["POST","PUT","PATCH","DELETE"];new Set(MS);var ex=["GET",...MS];new Set(ex);var ll=B.createContext(null);ll.displayName="DataRouter";var sf=B.createContext(null);sf.displayName="DataRouterState";var PS=B.createContext({isTransitioning:!1});PS.displayName="ViewTransition";var tx=B.createContext(new Map);tx.displayName="Fetchers";var nx=B.createContext(null);nx.displayName="Await";var mi=B.createContext(null);mi.displayName="Navigation";var fc=B.createContext(null);fc.displayName="Location";var Gi=B.createContext({outlet:null,matches:[],isDataRoute:!1});Gi.displayName="Route";var c_=B.createContext(null);c_.displayName="RouteError";function ix(n,{relative:e}={}){ft(ul(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=B.useContext(mi),{hash:a,pathname:o,search:u}=pc(n,{relative:e}),h=o;return t!=="/"&&(h=o==="/"?t:br([t,o])),i.createHref({pathname:h,search:u,hash:a})}function ul(){return B.useContext(fc)!=null}function Mr(){return ft(ul(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(fc).location}var kS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function LS(n){B.useContext(mi).static||B.useLayoutEffect(n)}function cl(){let{isDataRoute:n}=B.useContext(Gi);return n?gx():rx()}function rx(){ft(ul(),"useNavigate() may be used only in the context of a <Router> component.");let n=B.useContext(ll),{basename:e,navigator:t}=B.useContext(mi),{matches:i}=B.useContext(Gi),{pathname:a}=Mr(),o=JSON.stringify(l_(i)),u=B.useRef(!1);return LS(()=>{u.current=!0}),B.useCallback((f,m={})=>{if(fi(u.current,kS),!u.current)return;if(typeof f=="number"){t.go(f);return}let _=u_(f,JSON.parse(o),a,m.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:br([e,_.pathname])),(m.replace?t.replace:t.push)(_,m.state,m)},[e,t,o,a,n])}B.createContext(null);function pc(n,{relative:e}={}){let{matches:t}=B.useContext(Gi),{pathname:i}=Mr(),a=JSON.stringify(l_(t));return B.useMemo(()=>u_(n,JSON.parse(a),i,e==="path"),[n,a,i,e])}function sx(n,e){return VS(n,e)}function VS(n,e,t,i){var H;ft(ul(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a,static:o}=B.useContext(mi),{matches:u}=B.useContext(Gi),h=u[u.length-1],f=h?h.params:{},m=h?h.pathname:"/",_=h?h.pathnameBase:"/",v=h&&h.route;{let j=v&&v.path||"";US(m,!v||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let E=Mr(),A;if(e){let j=typeof e=="string"?ol(e):e;ft(_==="/"||((H=j.pathname)==null?void 0:H.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${j.pathname}" was given in the \`location\` prop.`),A=j}else A=E;let S=A.pathname||"/",D=S;if(_!=="/"){let j=_.replace(/^\//,"").split("/");D="/"+S.replace(/^\//,"").split("/").slice(j.length).join("/")}let L=!o&&t&&t.matches&&t.matches.length>0?t.matches:NS(n,{pathname:D});fi(v||L!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),fi(L==null||L[L.length-1].route.element!==void 0||L[L.length-1].route.Component!==void 0||L[L.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=cx(L&&L.map(j=>Object.assign({},j,{params:Object.assign({},f,j.params),pathname:br([_,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?_:br([_,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),u,t,i);return e&&M?B.createElement(fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},M):M}function ax(){let n=mx(),e=JI(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=B.createElement(B.Fragment,null,B.createElement("p",null," Hey developer "),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:o},"ErrorBoundary")," or"," ",B.createElement("code",{style:o},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:a},t):null,u)}var ox=B.createElement(ax,null),lx=class extends B.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?B.createElement(Gi.Provider,{value:this.props.routeContext},B.createElement(c_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ux({routeContext:n,match:e,children:t}){let i=B.useContext(ll);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(Gi.Provider,{value:n},t)}function cx(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,o=t==null?void 0:t.errors;if(o!=null){let f=a.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);ft(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,h=-1;if(t)for(let f=0;f<a.length;f++){let m=a[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(h=f),m.route.id){let{loaderData:_,errors:v}=t,E=m.route.loader&&!_.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||E){u=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}return a.reduceRight((f,m,_)=>{let v,E=!1,A=null,S=null;t&&(v=o&&m.route.id?o[m.route.id]:void 0,A=m.route.errorElement||ox,u&&(h<0&&_===0?(US("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,S=null):h===_&&(E=!0,S=m.route.hydrateFallbackElement||null)));let D=e.concat(a.slice(0,_+1)),L=()=>{let M;return v?M=A:E?M=S:m.route.Component?M=B.createElement(m.route.Component,null):m.route.element?M=m.route.element:M=f,B.createElement(ux,{match:m,routeContext:{outlet:f,matches:D,isDataRoute:t!=null},children:M})};return t&&(m.route.ErrorBoundary||m.route.errorElement||_===0)?B.createElement(lx,{location:t.location,revalidation:t.revalidation,component:A,error:v,children:L(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):L()},null)}function h_(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hx(n){let e=B.useContext(ll);return ft(e,h_(n)),e}function dx(n){let e=B.useContext(sf);return ft(e,h_(n)),e}function fx(n){let e=B.useContext(Gi);return ft(e,h_(n)),e}function d_(n){let e=fx(n),t=e.matches[e.matches.length-1];return ft(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function px(){return d_("useRouteId")}function mx(){var i;let n=B.useContext(c_),e=dx("useRouteError"),t=d_("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function gx(){let{router:n}=hx("useNavigate"),e=d_("useNavigate"),t=B.useRef(!1);return LS(()=>{t.current=!0}),B.useCallback(async(a,o={})=>{fi(t.current,kS),t.current&&(typeof a=="number"?n.navigate(a):await n.navigate(a,{fromRouteId:e,...o}))},[n,e])}var oT={};function US(n,e,t){!e&&!oT[n]&&(oT[n]=!0,fi(!1,t))}B.memo(_x);function _x({routes:n,future:e,state:t}){return VS(n,void 0,t,e)}function f_({to:n,replace:e,state:t,relative:i}){ft(ul(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=B.useContext(mi);fi(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=B.useContext(Gi),{pathname:u}=Mr(),h=cl(),f=u_(n,l_(o),u,i==="path"),m=JSON.stringify(f);return B.useEffect(()=>{h(JSON.parse(m),{replace:e,state:t,relative:i})},[h,m,i,e,t]),null}function _a(n){ft(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function yx({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:o=!1}){ft(!ul(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),h=B.useMemo(()=>({basename:u,navigator:a,static:o,future:{}}),[u,a,o]);typeof t=="string"&&(t=ol(t));let{pathname:f="/",search:m="",hash:_="",state:v=null,key:E="default"}=t,A=B.useMemo(()=>{let S=Rr(f,u);return S==null?null:{location:{pathname:S,search:m,hash:_,state:v,key:E},navigationType:i}},[u,f,m,_,v,E,i]);return fi(A!=null,`<Router basename="${u}"> is not able to match the URL "${f}${m}${_}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:B.createElement(mi.Provider,{value:h},B.createElement(fc.Provider,{children:e,value:A}))}function vx({children:n,location:e}){return sx(_g(n),e)}function _g(n,e=[]){let t=[];return B.Children.forEach(n,(i,a)=>{if(!B.isValidElement(i))return;let o=[...e,a];if(i.type===B.Fragment){t.push.apply(t,_g(i.props.children,o));return}ft(i.type===_a,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ft(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=_g(i.props.children,o)),t.push(u)}),t}var cd="get",hd="application/x-www-form-urlencoded";function af(n){return n!=null&&typeof n.tagName=="string"}function Ex(n){return af(n)&&n.tagName.toLowerCase()==="button"}function Tx(n){return af(n)&&n.tagName.toLowerCase()==="form"}function wx(n){return af(n)&&n.tagName.toLowerCase()==="input"}function Sx(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function bx(n,e){return n.button===0&&(!e||e==="_self")&&!Sx(n)}var Jh=null;function Ax(){if(Jh===null)try{new FormData(document.createElement("form"),0),Jh=!1}catch{Jh=!0}return Jh}var Cx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hm(n){return n!=null&&!Cx.has(n)?(fi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hd}"`),null):n}function Rx(n,e){let t,i,a,o,u;if(Tx(n)){let h=n.getAttribute("action");i=h?Rr(h,e):null,t=n.getAttribute("method")||cd,a=Hm(n.getAttribute("enctype"))||hd,o=new FormData(n)}else if(Ex(n)||wx(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||h.getAttribute("action");if(i=f?Rr(f,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||cd,a=Hm(n.getAttribute("formenctype"))||Hm(h.getAttribute("enctype"))||hd,o=new FormData(h,n),!Ax()){let{name:m,type:_,value:v}=n;if(_==="image"){let E=m?`${m}.`:"";o.append(`${E}x`,"0"),o.append(`${E}y`,"0")}else m&&o.append(m,v)}}else{if(af(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=cd,i=null,a=hd,u=n}return o&&a==="text/plain"&&(u=o,o=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:o,body:u}}function p_(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function Ix(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xx(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function Nx(n,e,t){let i=await Promise.all(n.map(async a=>{let o=e.routes[a.route.id];if(o){let u=await Ix(o,t);return u.links?u.links():[]}return[]}));return Px(i.flat(1).filter(xx).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function lT(n,e,t,i,a,o){let u=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,h=(f,m)=>{var _;return t[m].pathname!==f.pathname||((_=t[m].route.path)==null?void 0:_.endsWith("*"))&&t[m].params["*"]!==f.params["*"]};return o==="assets"?e.filter((f,m)=>u(f,m)||h(f,m)):o==="data"?e.filter((f,m)=>{var v;let _=i.routes[f.route.id];if(!_||!_.hasLoader)return!1;if(u(f,m)||h(f,m))return!0;if(f.route.shouldRevalidate){let E=f.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function Ox(n,e,{includeHydrateFallback:t}={}){return Dx(n.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function Dx(n){return[...new Set(n)]}function Mx(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function Px(n,e){let t=new Set;return new Set(e),n.reduce((i,a)=>{let o=JSON.stringify(Mx(a));return t.has(o)||(t.add(o),i.push({key:o,link:a})),i},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var kx=new Set([100,101,204,205]);function Lx(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Rr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function zS(){let n=B.useContext(ll);return p_(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Vx(){let n=B.useContext(sf);return p_(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var m_=B.createContext(void 0);m_.displayName="FrameworkContext";function BS(){let n=B.useContext(m_);return p_(n,"You must render this element inside a <HydratedRouter> element"),n}function Ux(n,e){let t=B.useContext(m_),[i,a]=B.useState(!1),[o,u]=B.useState(!1),{onFocus:h,onBlur:f,onMouseEnter:m,onMouseLeave:_,onTouchStart:v}=e,E=B.useRef(null);B.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let D=M=>{M.forEach(H=>{u(H.isIntersecting)})},L=new IntersectionObserver(D,{threshold:.5});return E.current&&L.observe(E.current),()=>{L.disconnect()}}},[n]),B.useEffect(()=>{if(i){let D=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(D)}}},[i]);let A=()=>{a(!0)},S=()=>{a(!1),u(!1)};return t?n!=="intent"?[o,E,{}]:[o,E,{onFocus:Du(h,A),onBlur:Du(f,S),onMouseEnter:Du(m,A),onMouseLeave:Du(_,S),onTouchStart:Du(v,A)}]:[!1,E,{}]}function Du(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function zx({page:n,...e}){let{router:t}=zS(),i=B.useMemo(()=>NS(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?B.createElement(jx,{page:n,matches:i,...e}):null}function Bx(n){let{manifest:e,routeModules:t}=BS(),[i,a]=B.useState([]);return B.useEffect(()=>{let o=!1;return Nx(n,e,t).then(u=>{o||a(u)}),()=>{o=!0}},[n,e,t]),i}function jx({page:n,matches:e,...t}){let i=Mr(),{manifest:a,routeModules:o}=BS(),{basename:u}=zS(),{loaderData:h,matches:f}=Vx(),m=B.useMemo(()=>lT(n,e,f,a,i,"data"),[n,e,f,a,i]),_=B.useMemo(()=>lT(n,e,f,a,i,"assets"),[n,e,f,a,i]),v=B.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let S=new Set,D=!1;if(e.forEach(M=>{var j;let H=a.routes[M.route.id];!H||!H.hasLoader||(!m.some(ee=>ee.route.id===M.route.id)&&M.route.id in h&&((j=o[M.route.id])!=null&&j.shouldRevalidate)||H.hasClientLoader?D=!0:S.add(M.route.id))}),S.size===0)return[];let L=Lx(n,u);return D&&S.size>0&&L.searchParams.set("_routes",e.filter(M=>S.has(M.route.id)).map(M=>M.route.id).join(",")),[L.pathname+L.search]},[u,h,i,a,m,e,n,o]),E=B.useMemo(()=>Ox(_,a),[_,a]),A=Bx(_);return B.createElement(B.Fragment,null,v.map(S=>B.createElement("link",{key:S,rel:"prefetch",as:"fetch",href:S,...t})),E.map(S=>B.createElement("link",{key:S,rel:"modulepreload",href:S,...t})),A.map(({key:S,link:D})=>B.createElement("link",{key:S,...D})))}function Fx(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var jS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{jS&&(window.__reactRouterVersion="7.6.0")}catch{}function Hx({basename:n,children:e,window:t}){let i=B.useRef();i.current==null&&(i.current=NI({window:t,v5Compat:!0}));let a=i.current,[o,u]=B.useState({action:a.action,location:a.location}),h=B.useCallback(f=>{B.startTransition(()=>u(f))},[u]);return B.useLayoutEffect(()=>a.listen(h),[a,h]),B.createElement(yx,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:a})}var FS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,of=B.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:o,replace:u,state:h,target:f,to:m,preventScrollReset:_,viewTransition:v,...E},A){let{basename:S}=B.useContext(mi),D=typeof m=="string"&&FS.test(m),L,M=!1;if(typeof m=="string"&&D&&(L=m,jS))try{let I=new URL(window.location.href),x=m.startsWith("//")?new URL(I.protocol+m):new URL(m),k=Rr(x.pathname,S);x.origin===I.origin&&k!=null?m=k+x.search+x.hash:M=!0}catch{fi(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let H=ix(m,{relative:a}),[j,ee,Z]=Ux(i,E),ue=Yx(m,{replace:u,state:h,target:f,preventScrollReset:_,relative:a,viewTransition:v});function P(I){e&&e(I),I.defaultPrevented||ue(I)}let R=B.createElement("a",{...E,...Z,href:L||H,onClick:M||o?e:P,ref:Fx(A,ee),target:f,"data-discover":!D&&t==="render"?"true":void 0});return j&&!D?B.createElement(B.Fragment,null,R,B.createElement(zx,{page:H})):R});of.displayName="Link";var qx=B.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:o,to:u,viewTransition:h,children:f,...m},_){let v=pc(u,{relative:m.relative}),E=Mr(),A=B.useContext(sf),{navigator:S,basename:D}=B.useContext(mi),L=A!=null&&Zx(v)&&h===!0,M=S.encodeLocation?S.encodeLocation(v).pathname:v.pathname,H=E.pathname,j=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||(H=H.toLowerCase(),j=j?j.toLowerCase():null,M=M.toLowerCase()),j&&D&&(j=Rr(j,D)||j);const ee=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let Z=H===M||!a&&H.startsWith(M)&&H.charAt(ee)==="/",ue=j!=null&&(j===M||!a&&j.startsWith(M)&&j.charAt(M.length)==="/"),P={isActive:Z,isPending:ue,isTransitioning:L},R=Z?e:void 0,I;typeof i=="function"?I=i(P):I=[i,Z?"active":null,ue?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let x=typeof o=="function"?o(P):o;return B.createElement(of,{...m,"aria-current":R,className:I,ref:_,style:x,to:u,viewTransition:h},typeof f=="function"?f(P):f)});qx.displayName="NavLink";var Gx=B.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:o,method:u=cd,action:h,onSubmit:f,relative:m,preventScrollReset:_,viewTransition:v,...E},A)=>{let S=Wx(),D=Xx(h,{relative:m}),L=u.toLowerCase()==="get"?"get":"post",M=typeof h=="string"&&FS.test(h),H=j=>{if(f&&f(j),j.defaultPrevented)return;j.preventDefault();let ee=j.nativeEvent.submitter,Z=(ee==null?void 0:ee.getAttribute("formmethod"))||u;S(ee||j.currentTarget,{fetcherKey:e,method:Z,navigate:t,replace:a,state:o,relative:m,preventScrollReset:_,viewTransition:v})};return B.createElement("form",{ref:A,method:L,action:D,onSubmit:i?f:H,...E,"data-discover":!M&&n==="render"?"true":void 0})});Gx.displayName="Form";function $x(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function HS(n){let e=B.useContext(ll);return ft(e,$x(n)),e}function Yx(n,{target:e,replace:t,state:i,preventScrollReset:a,relative:o,viewTransition:u}={}){let h=cl(),f=Mr(),m=pc(n,{relative:o});return B.useCallback(_=>{if(bx(_,e)){_.preventDefault();let v=t!==void 0?t:ec(f)===ec(m);h(n,{replace:v,state:i,preventScrollReset:a,relative:o,viewTransition:u})}},[f,h,m,t,i,e,n,a,o,u])}var Kx=0,Qx=()=>`__${String(++Kx)}__`;function Wx(){let{router:n}=HS("useSubmit"),{basename:e}=B.useContext(mi),t=px();return B.useCallback(async(i,a={})=>{let{action:o,method:u,encType:h,formData:f,body:m}=Rx(i,e);if(a.navigate===!1){let _=a.fetcherKey||Qx();await n.fetch(_,t,a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:m,formMethod:a.method||u,formEncType:a.encType||h,flushSync:a.flushSync})}else await n.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:f,body:m,formMethod:a.method||u,formEncType:a.encType||h,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[n,e,t])}function Xx(n,{relative:e}={}){let{basename:t}=B.useContext(mi),i=B.useContext(Gi);ft(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),o={...pc(n||".",{relative:e})},u=Mr();if(n==null){o.search=u.search;let h=new URLSearchParams(o.search),f=h.getAll("index");if(f.some(_=>_==="")){h.delete("index"),f.filter(v=>v).forEach(v=>h.append("index",v));let _=h.toString();o.search=_?`?${_}`:""}}return(!n||n===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:br([t,o.pathname])),ec(o)}function Zx(n,e={}){let t=B.useContext(PS);ft(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=HS("useViewTransitionState"),a=pc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Rr(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=Rr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Sd(a.pathname,u)!=null||Sd(a.pathname,o)!=null}[...kx];const Jx="/book-app/assets/register-bg-DkDUw8Do.jpg";function eN({currentBook:n,fade:e}){const[t,i]=B.useState(!1);return B.useEffect(()=>{const a=setTimeout(()=>i(!0),100);return()=>clearTimeout(a)},[]),q.jsxs("div",{className:"flex flex-col lg:flex-row overflow-y-auto lg:h-[calc(100vh-4.5rem)]",children:[q.jsx("div",{className:`w-full lg:w-1/2 min-h-[400px] lg:h-full p-6 drop-shadow-[8px_8px_6px_rgba(0,0,0,0.25)] rounded shadow text-center bg-cover bg-center transition-opacity duration-1000 flex flex-col justify-center ${t?"opacity-100":"opacity-0"}`,style:{backgroundImage:`url(${Jx})`},children:q.jsxs("div",{className:"p-4 rounded text-white",children:[q.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2",children:"Listo para comenzar tu viaje lector?"}),q.jsx("p",{className:"text-sm sm:text-base mb-4",children:"Crea tu cuenta para guardar tus libros favoritos."}),q.jsx(of,{to:"/register",className:"bg-blue-500 text-white px-4 py-2 rounded text-sm sm:text-base hover:bg-blue-600 transition",children:"Crear cuenta gratuita"})]})}),q.jsx("div",{className:"w-full lg:w-1/2 min-h-[400px] lg:h-full p-6 sm:p-12 lg:p-20 text-center dark:text-white overflow-hidden flex flex-col justify-center",children:q.jsxs("div",{className:`transition-opacity duration-500 ${e?"opacity-100":"opacity-0"} max-h-[500px] overflow-hidden`,children:[q.jsx("img",{src:n.imageLinks.thumbnail,alt:n.title,className:"mx-auto mb-4 w-32 sm:w-40 h-auto rounded"}),q.jsx("h3",{className:"text-lg sm:text-xl font-semibold",children:n.title}),q.jsxs("p",{className:"text-gray-600 italic dark:text-gray-300 text-sm sm:text-base",children:["por ",n.authors?n.authors.join(", "):"Desconocido"]}),q.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold mt-5",children:'"Tus libros, tu espacio, tu viaje lector."'})]})})]})}const tN=()=>{};var uT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he=function(n,e){if(!n)throw hl(e)},hl=function(n){return new Error("Firebase Database ("+qS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},nN=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const a=n[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const o=n[t++];e[i++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=n[t++],u=n[t++],h=n[t++],f=((a&7)<<18|(o&63)<<12|(u&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const o=n[t++],u=n[t++];e[i++]=String.fromCharCode((a&15)<<12|(o&63)<<6|u&63)}}return e.join("")},g_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<n.length;a+=3){const o=n[a],u=a+1<n.length,h=u?n[a+1]:0,f=a+2<n.length,m=f?n[a+2]:0,_=o>>2,v=(o&3)<<4|h>>4;let E=(h&15)<<2|m>>6,A=m&63;f||(A=64,u||(E=64)),i.push(t[_],t[v],t[E],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(GS(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):nN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<n.length;){const o=t[n.charAt(a++)],h=a<n.length?t[n.charAt(a)]:0;++a;const m=a<n.length?t[n.charAt(a)]:64;++a;const v=a<n.length?t[n.charAt(a)]:64;if(++a,o==null||h==null||m==null||v==null)throw new iN;const E=o<<2|h>>4;if(i.push(E),m!==64){const A=h<<4&240|m>>2;if(i.push(A),v!==64){const S=m<<6&192|v;i.push(S)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class iN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $S=function(n){const e=GS(n);return g_.encodeByteArray(e,!0)},bd=function(n){return $S(n).replace(/\./g,"")},Ad=function(n){try{return g_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(n){return YS(void 0,n)}function YS(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!sN(t)||(n[t]=YS(n[t],e[t]));return n}function sN(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=()=>aN().__FIREBASE_DEFAULTS__,lN=()=>{if(typeof process>"u"||typeof uT>"u")return;const n=uT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ad(n[1]);return e&&JSON.parse(e)},lf=()=>{try{return tN()||oN()||lN()||uN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},KS=n=>{var e,t;return(t=(e=lf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},QS=n=>{const e=KS(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},WS=()=>{var n;return(n=lf())===null||n===void 0?void 0:n.config},XS=n=>{var e;return(e=lf())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(n){return n.endsWith(".cloudworkstations.dev")}async function y_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",a=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[bd(JSON.stringify(t)),bd(JSON.stringify(u)),""].join(".")}const Fu={};function cN(){const n={prod:[],emulator:[]};for(const e of Object.keys(Fu))Fu[e]?n.emulator.push(e):n.prod.push(e);return n}function hN(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let cT=!1;function v_(n,e){if(typeof window>"u"||typeof document>"u"||!Da(window.location.host)||Fu[n]===e||Fu[n]||cT)return;Fu[n]=e;function t(E){return`__firebase__banner__${E}`}const i="__firebase__banner",o=cN().prod.length>0;function u(){const E=document.getElementById(i);E&&E.remove()}function h(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function m(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{cT=!0,u()},E}function _(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function v(){const E=hN(i),A=t("text"),S=document.getElementById(A)||document.createElement("span"),D=t("learnmore"),L=document.getElementById(D)||document.createElement("a"),M=t("preprendIcon"),H=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const j=E.element;h(j),_(L,D);const ee=m();f(H,M),j.append(H,S,L,ee),document.body.appendChild(j)}o?(S.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function E_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function dN(){var n;const e=(n=lf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pN(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function JS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mN(){const n=fn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gN(){return qS.NODE_ADMIN===!0}function _N(){return!dN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yN(){try{return typeof indexedDB=="object"}catch{return!1}}function vN(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var o;e(((o=a.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="FirebaseError";class Pr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=EN,Object.setPrototypeOf(this,Pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mc.prototype.create)}}class mc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],u=o?TN(o,i):"Error",h=`${this.serviceName}: ${u} (${a}).`;return new Pr(a,h,i)}}function TN(n,e){return n.replace(wN,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const wN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(n){return JSON.parse(n)}function en(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=function(n){let e={},t={},i={},a="";try{const o=n.split(".");e=tc(Ad(o[0])||""),t=tc(Ad(o[1])||""),a=o[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:a}},SN=function(n){const e=eb(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},bN=function(n){const e=eb(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Ko(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function yg(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Cd(n,e,t){const i={};for(const a in n)Object.prototype.hasOwnProperty.call(n,a)&&(i[a]=e.call(t,n[a],a,n));return i}function bs(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const o=n[a],u=e[a];if(hT(o)&&hT(u)){if(!bs(o,u))return!1}else if(o!==u)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function hT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Vu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[a,o]=i.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function Uu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let v=0;v<16;v++)i[v]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let v=0;v<16;v++)i[v]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let v=16;v<80;v++){const E=i[v-3]^i[v-8]^i[v-14]^i[v-16];i[v]=(E<<1|E>>>31)&4294967295}let a=this.chain_[0],o=this.chain_[1],u=this.chain_[2],h=this.chain_[3],f=this.chain_[4],m,_;for(let v=0;v<80;v++){v<40?v<20?(m=h^o&(u^h),_=1518500249):(m=o^u^h,_=1859775393):v<60?(m=o&u|h&(o|u),_=2400959708):(m=o^u^h,_=3395469782);const E=(a<<5|a>>>27)+m+f+_+i[v]&4294967295;f=h,h=u,u=(o<<30|o>>>2)&4294967295,o=a,a=E}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let a=0;const o=this.buf_;let u=this.inbuf_;for(;a<t;){if(u===0)for(;a<=i;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<t;)if(o[u]=e.charCodeAt(a),++u,++a,u===this.blockSize){this.compress_(o),u=0;break}}else for(;a<t;)if(o[u]=e[a],++u,++a,u===this.blockSize){this.compress_(o),u=0;break}}this.inbuf_=u,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let o=24;o>=0;o-=8)e[i]=this.chain_[a]>>o&255,++i;return e}}function CN(n,e){const t=new RN(n,e);return t.subscribe.bind(t)}class RN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");IN(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=qm),a.error===void 0&&(a.error=qm),a.complete===void 0&&(a.complete=qm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function qm(){}function xN(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let a=n.charCodeAt(i);if(a>=55296&&a<=56319){const o=a-55296;i++,he(i<n.length,"Surrogate pair missing trail surrogate.");const u=n.charCodeAt(i)-56320;a=65536+(o<<10)+u}a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):a<65536?(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},uf=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(n){return n&&n._delegate?n._delegate:n}class As{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new __;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(MN(e))try{this.getOrInitializeService({instanceIdentifier:ya})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:a});i.resolve(o)}catch{}}}}clearInstance(e=ya){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ya){return this.instances.has(e)}getOptions(e=ya){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[o,u]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&u.resolve(a)}return a}onInit(e,t){var i;const a=this.normalizeInstanceIdentifier(t),o=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:DN(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ya){return this.component?this.component.multipleInstances?e:ya:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DN(n){return n===ya?void 0:n}function MN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ON(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ke||(ke={}));const kN={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},LN=ke.INFO,VN={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},UN=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),a=VN[e];if(a)console[a](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cf{constructor(e){this.name=e,this._logLevel=LN,this._logHandler=UN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const zN=(n,e)=>e.some(t=>n instanceof t);let dT,fT;function BN(){return dT||(dT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jN(){return fT||(fT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tb=new WeakMap,vg=new WeakMap,nb=new WeakMap,Gm=new WeakMap,T_=new WeakMap;function FN(n){const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("success",o),n.removeEventListener("error",u)},o=()=>{t(ys(n.result)),a()},u=()=>{i(n.error),a()};n.addEventListener("success",o),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&tb.set(t,n)}).catch(()=>{}),T_.set(e,n),e}function HN(n){if(vg.has(n))return;const e=new Promise((t,i)=>{const a=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",u),n.removeEventListener("abort",u)},o=()=>{t(),a()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",o),n.addEventListener("error",u),n.addEventListener("abort",u)});vg.set(n,e)}let Eg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return vg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ys(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function qN(n){Eg=n(Eg)}function GN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call($m(this),e,...t);return nb.set(i,e.sort?e.sort():[e]),ys(i)}:jN().includes(n)?function(...e){return n.apply($m(this),e),ys(tb.get(this))}:function(...e){return ys(n.apply($m(this),e))}}function $N(n){return typeof n=="function"?GN(n):(n instanceof IDBTransaction&&HN(n),zN(n,BN())?new Proxy(n,Eg):n)}function ys(n){if(n instanceof IDBRequest)return FN(n);if(Gm.has(n))return Gm.get(n);const e=$N(n);return e!==n&&(Gm.set(n,e),T_.set(e,n)),e}const $m=n=>T_.get(n);function YN(n,e,{blocked:t,upgrade:i,blocking:a,terminated:o}={}){const u=indexedDB.open(n,e),h=ys(u);return i&&u.addEventListener("upgradeneeded",f=>{i(ys(u.result),f.oldVersion,f.newVersion,ys(u.transaction),f)}),t&&u.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),h.then(f=>{o&&f.addEventListener("close",()=>o()),a&&f.addEventListener("versionchange",m=>a(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const KN=["get","getKey","getAll","getAllKeys","count"],QN=["put","add","delete","clear"],Ym=new Map;function pT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ym.get(e))return Ym.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=QN.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||KN.includes(t)))return;const o=async function(u,...h){const f=this.transaction(u,a?"readwrite":"readonly");let m=f.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),a&&f.done]))[0]};return Ym.set(e,o),o}qN(n=>({...n,get:(e,t,i)=>pT(e,t)||n.get(e,t,i),has:(e,t)=>!!pT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(XN(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function XN(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Tg="@firebase/app",mT="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new cf("@firebase/app"),ZN="@firebase/app-compat",JN="@firebase/analytics-compat",eO="@firebase/analytics",tO="@firebase/app-check-compat",nO="@firebase/app-check",iO="@firebase/auth",rO="@firebase/auth-compat",sO="@firebase/database",aO="@firebase/data-connect",oO="@firebase/database-compat",lO="@firebase/functions",uO="@firebase/functions-compat",cO="@firebase/installations",hO="@firebase/installations-compat",dO="@firebase/messaging",fO="@firebase/messaging-compat",pO="@firebase/performance",mO="@firebase/performance-compat",gO="@firebase/remote-config",_O="@firebase/remote-config-compat",yO="@firebase/storage",vO="@firebase/storage-compat",EO="@firebase/firestore",TO="@firebase/ai",wO="@firebase/firestore-compat",SO="firebase",bO="11.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="[DEFAULT]",AO={[Tg]:"fire-core",[ZN]:"fire-core-compat",[eO]:"fire-analytics",[JN]:"fire-analytics-compat",[nO]:"fire-app-check",[tO]:"fire-app-check-compat",[iO]:"fire-auth",[rO]:"fire-auth-compat",[sO]:"fire-rtdb",[aO]:"fire-data-connect",[oO]:"fire-rtdb-compat",[lO]:"fire-fn",[uO]:"fire-fn-compat",[cO]:"fire-iid",[hO]:"fire-iid-compat",[dO]:"fire-fcm",[fO]:"fire-fcm-compat",[pO]:"fire-perf",[mO]:"fire-perf-compat",[gO]:"fire-rc",[_O]:"fire-rc-compat",[yO]:"fire-gcs",[vO]:"fire-gcs-compat",[EO]:"fire-fst",[wO]:"fire-fst-compat",[TO]:"fire-vertex","fire-js":"fire-js",[SO]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rd=new Map,CO=new Map,Sg=new Map;function gT(n,e){try{n.container.addComponent(e)}catch(t){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wa(n){const e=n.name;if(Sg.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;Sg.set(e,n);for(const t of Rd.values())gT(t,n);for(const t of CO.values())gT(t,n);return!0}function hf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function kn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new mc("app","Firebase",RO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new As("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=bO;function ib(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:wg,automaticDataCollectionEnabled:!0},e),a=i.name;if(typeof a!="string"||!a)throw vs.create("bad-app-name",{appName:String(a)});if(t||(t=WS()),!t)throw vs.create("no-options");const o=Rd.get(a);if(o){if(bs(t,o.options)&&bs(i,o.config))return o;throw vs.create("duplicate-app",{appName:a})}const u=new PN(a);for(const f of Sg.values())u.addComponent(f);const h=new IO(t,i,u);return Rd.set(a,h),h}function w_(n=wg){const e=Rd.get(n);if(!e&&n===wg&&WS())return ib();if(!e)throw vs.create("no-app",{appName:n});return e}function Vi(n,e,t){var i;let a=(i=AO[n])!==null&&i!==void 0?i:n;t&&(a+=`-${t}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(h.join(" "));return}wa(new As(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO="firebase-heartbeat-database",NO=1,nc="firebase-heartbeat-store";let Km=null;function rb(){return Km||(Km=YN(xO,NO,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(nc)}catch(t){console.warn(t)}}}}).catch(n=>{throw vs.create("idb-open",{originalErrorMessage:n.message})})),Km}async function OO(n){try{const t=(await rb()).transaction(nc),i=await t.objectStore(nc).get(sb(n));return await t.done,i}catch(e){if(e instanceof Pr)Ir.warn(e.message);else{const t=vs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ir.warn(t.message)}}}async function _T(n,e){try{const i=(await rb()).transaction(nc,"readwrite");await i.objectStore(nc).put(e,sb(n)),await i.done}catch(t){if(t instanceof Pr)Ir.warn(t.message);else{const i=vs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ir.warn(i.message)}}}function sb(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DO=1024,MO=30;class PO{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new LO(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=yT();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(u=>u.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>MO){const u=VO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ir.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=yT(),{heartbeatsToSend:i,unsentEntries:a}=kO(this._heartbeatsCache.heartbeats),o=bd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ir.warn(t),""}}}function yT(){return new Date().toISOString().substring(0,10)}function kO(n,e=DO){const t=[];let i=n.slice();for(const a of n){const o=t.find(u=>u.agent===a.agent);if(o){if(o.dates.push(a.date),vT(t)>e){o.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),vT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class LO{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yN()?vN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await OO(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return _T(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return _T(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function vT(n){return bd(JSON.stringify({version:2,heartbeats:n})).length}function VO(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(n){wa(new As("platform-logger",e=>new WN(e),"PRIVATE")),wa(new As("heartbeat",e=>new PO(e),"PRIVATE")),Vi(Tg,mT,n),Vi(Tg,mT,"esm2017"),Vi("fire-js","")}UO("");var zO="firebase",BO="11.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vi(zO,BO,"app");function S_(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}function ab(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jO=ab,ob=new mc("auth","Firebase",ab());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id=new cf("@firebase/auth");function FO(n,...e){Id.logLevel<=ke.WARN&&Id.warn(`Auth (${Ma}): ${n}`,...e)}function dd(n,...e){Id.logLevel<=ke.ERROR&&Id.error(`Auth (${Ma}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(n,...e){throw b_(n,...e)}function Ui(n,...e){return b_(n,...e)}function lb(n,e,t){const i=Object.assign(Object.assign({},jO()),{[e]:t});return new mc("auth","Firebase",i).create(e,{appName:n.name})}function Ar(n){return lb(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function b_(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return ob.create(n,...e)}function Se(n,e,...t){if(!n)throw b_(e,...t)}function Tr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw dd(e),new Error(e)}function xr(n,e){n||Tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function HO(){return ET()==="http:"||ET()==="https:"}function ET(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HO()||pN()||"connection"in navigator)?navigator.onLine:!0}function GO(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t){this.shortDelay=e,this.longDelay=t,xr(t>e,"Short delay should be less than long delay!"),this.isMobile=E_()||JS()}get(){return qO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(n,e){xr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KO=new gc(3e4,6e4);function Ms(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Lr(n,e,t,i,a={}){return cb(n,a,async()=>{let o={},u={};i&&(e==="GET"?u=i:o={body:JSON.stringify(i)});const h=dl(Object.assign({key:n.config.apiKey},u)).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m=Object.assign({method:e,headers:f},o);return fN()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Da(n.emulatorConfig.host)&&(m.credentials="include"),ub.fetch()(await hb(n,n.config.apiHost,t,h),m)})}async function cb(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},$O),e);try{const a=new WO(n),o=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await o.json();if("needConfirmation"in u)throw ed(n,"account-exists-with-different-credential",u);if(o.ok&&!("errorMessage"in u))return u;{const h=o.ok?u.errorMessage:u.error.message,[f,m]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw ed(n,"credential-already-in-use",u);if(f==="EMAIL_EXISTS")throw ed(n,"email-already-in-use",u);if(f==="USER_DISABLED")throw ed(n,"user-disabled",u);const _=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw lb(n,_,m);pi(n,_)}}catch(a){if(a instanceof Pr)throw a;pi(n,"network-request-failed",{message:String(a)})}}async function _c(n,e,t,i,a={}){const o=await Lr(n,e,t,i,a);return"mfaPendingCredential"in o&&pi(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function hb(n,e,t,i){const a=`${e}${t}?${i}`,o=n,u=o.config.emulator?A_(n.config,a):`${n.config.apiScheme}://${a}`;return YO.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(u).toString():u}function QO(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class WO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ui(this.auth,"network-request-failed")),KO.get())})}}function ed(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Ui(n,e,i);return a.customData._tokenResponse=t,a}function TT(n){return n!==void 0&&n.enterprise!==void 0}class XO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return QO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function ZO(n,e){return Lr(n,"GET","/v2/recaptchaConfig",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(n,e){return Lr(n,"POST","/v1/accounts:delete",e)}async function xd(n,e){return Lr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eD(n,e=!1){const t=zt(n),i=await t.getIdToken(e),a=C_(i);Se(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,u=o==null?void 0:o.sign_in_provider;return{claims:a,token:i,authTime:Hu(Qm(a.auth_time)),issuedAtTime:Hu(Qm(a.iat)),expirationTime:Hu(Qm(a.exp)),signInProvider:u||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Qm(n){return Number(n)*1e3}function C_(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return dd("JWT malformed, contained fewer than 3 sections"),null;try{const a=Ad(t);return a?JSON.parse(a):(dd("Failed to decode base64 JWT payload"),null)}catch(a){return dd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function wT(n){const e=C_(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Pr&&tD(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function tD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hu(this.lastLoginAt),this.creationTime=Hu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(n){var e;const t=n.auth,i=await n.getIdToken(),a=await Qo(n,xd(t,{idToken:i}));Se(a==null?void 0:a.users.length,t,"internal-error");const o=a.users[0];n._notifyReloadListener(o);const u=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?db(o.providerUserInfo):[],h=rD(n.providerData,u),f=n.isAnonymous,m=!(n.email&&o.passwordHash)&&!(h!=null&&h.length),_=f?m:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Ag(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(n,v)}async function iD(n){const e=zt(n);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function rD(n,e){return[...n.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function db(n){return n.map(e=>{var{providerId:t}=e,i=S_(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(n,e){const t=await cb(n,{},async()=>{const i=dl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=n.config,u=await hb(n,a,"/v1/token",`key=${o}`),h=await n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",ub.fetch()(u,{method:"POST",headers:h,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function aD(n,e){return Lr(n,"POST","/v2/accounts:revokeToken",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):wT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=wT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:o}=await sD(e,t);this.updateTokensAndExpiration(i,a,Number(o))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:o}=t,u=new jo;return i&&(Se(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),a&&(Se(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),o&&(Se(typeof o=="number","internal-error",{appName:e}),u.expirationTime=o),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return Tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ci{constructor(e){var{uid:t,auth:i,stsTokenManager:a}=e,o=S_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new nD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ag(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Qo(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return eD(this,e)}reload(){return iD(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ci(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Nd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(Ar(this.auth));const e=await this.getIdToken();return await Qo(this,JO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,a,o,u,h,f,m,_;const v=(i=t.displayName)!==null&&i!==void 0?i:void 0,E=(a=t.email)!==null&&a!==void 0?a:void 0,A=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(u=t.photoURL)!==null&&u!==void 0?u:void 0,D=(h=t.tenantId)!==null&&h!==void 0?h:void 0,L=(f=t._redirectEventId)!==null&&f!==void 0?f:void 0,M=(m=t.createdAt)!==null&&m!==void 0?m:void 0,H=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:j,emailVerified:ee,isAnonymous:Z,providerData:ue,stsTokenManager:P}=t;Se(j&&P,e,"internal-error");const R=jo.fromJSON(this.name,P);Se(typeof j=="string",e,"internal-error"),hs(v,e.name),hs(E,e.name),Se(typeof ee=="boolean",e,"internal-error"),Se(typeof Z=="boolean",e,"internal-error"),hs(A,e.name),hs(S,e.name),hs(D,e.name),hs(L,e.name),hs(M,e.name),hs(H,e.name);const I=new ci({uid:j,auth:e,email:E,emailVerified:ee,displayName:v,isAnonymous:Z,photoURL:S,phoneNumber:A,tenantId:D,stsTokenManager:R,createdAt:M,lastLoginAt:H});return ue&&Array.isArray(ue)&&(I.providerData=ue.map(x=>Object.assign({},x))),L&&(I._redirectEventId=L),I}static async _fromIdTokenResponse(e,t,i=!1){const a=new jo;a.updateFromServerResponse(t);const o=new ci({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await Nd(o),o}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Se(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?db(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(o!=null&&o.length),h=new jo;h.updateFromIdToken(i);const f=new ci({uid:a.localId,auth:e,stsTokenManager:h,isAnonymous:u}),m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Ag(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(o!=null&&o.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST=new Map;function wr(n){xr(n instanceof Function,"Expected a class definition");let e=ST.get(n);return e?(xr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ST.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}fb.type="NONE";const bT=fb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(n,e,t){return`firebase:${n}:${e}:${t}`}class Fo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:o}=this.auth;this.fullUserKey=fd(this.userKey,a.apiKey,o),this.fullPersistenceKey=fd("persistence",a.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xd(this.auth,{idToken:e}).catch(()=>{});return t?ci._fromGetAccountInfoResponse(this.auth,t,e):null}return ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Fo(wr(bT),e,i);const a=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=a[0]||wr(bT);const u=fd(i,e.config.apiKey,e.name);let h=null;for(const m of t)try{const _=await m._get(u);if(_){let v;if(typeof _=="string"){const E=await xd(e,{idToken:_}).catch(()=>{});if(!E)break;v=await ci._fromGetAccountInfoResponse(e,E,_)}else v=ci._fromJSON(e,_);m!==o&&(h=v),o=m;break}}catch{}const f=a.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!f.length?new Fo(o,e,i):(o=f[0],h&&await o._set(u,h.toJSON()),await Promise.all(t.map(async m=>{if(m!==o)try{await m._remove(u)}catch{}})),new Fo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_b(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vb(e))return"Blackberry";if(Eb(e))return"Webos";if(mb(e))return"Safari";if((e.includes("chrome/")||gb(e))&&!e.includes("edge/"))return"Chrome";if(yb(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function pb(n=fn()){return/firefox\//i.test(n)}function mb(n=fn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gb(n=fn()){return/crios\//i.test(n)}function _b(n=fn()){return/iemobile/i.test(n)}function yb(n=fn()){return/android/i.test(n)}function vb(n=fn()){return/blackberry/i.test(n)}function Eb(n=fn()){return/webos/i.test(n)}function R_(n=fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function oD(n=fn()){var e;return R_(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lD(){return mN()&&document.documentMode===10}function Tb(n=fn()){return R_(n)||yb(n)||Eb(n)||vb(n)||/windows phone/i.test(n)||_b(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(n,e=[]){let t;switch(n){case"Browser":t=AT(fn());break;case"Worker":t=`${AT(fn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ma}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=o=>new Promise((u,h)=>{try{const f=e(o);u(f)}catch(f){h(f)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cD(n,e={}){return Lr(n,"GET","/v2/passwordPolicy",Ms(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=6;class dD{constructor(e){var t,i,a,o;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:hD,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,a,o,u,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(t=f.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),f.isValid&&(f.isValid=(i=f.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsLowercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(o=f.containsUppercaseLetter)!==null&&o!==void 0?o:!0),f.isValid&&(f.isValid=(u=f.containsNumericCharacter)!==null&&u!==void 0?u:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fD{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new CT(this),this.idTokenSubscription=new CT(this),this.beforeStateQueue=new uD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ob,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wr(t)),this._initializationPromise=this.queue(async()=>{var i,a,o;if(!this._deleted&&(this.persistenceManager=await Fo.create(this,e),(i=this._resolvePersistenceManagerAvailable)===null||i===void 0||i.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xd(this,{idToken:e}),i=await ci._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(kn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let a=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=a==null?void 0:a._redirectEventId,f=await this.tryRedirectSignIn(e);(!u||u===h)&&(f!=null&&f.user)&&(a=f.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(Ar(this));const t=e?zt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(Ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(Ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cD(this),t=new dD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await aD(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&wr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await Fo.create(this,[wr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const o=typeof t=="function"?t:t.next.bind(t);let u=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(h,this,"internal-error"),h.then(()=>{u||o(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,a);return()=>{u=!0,f()}}else{const f=e.addObserver(t);return()=>{u=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&FO(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Pa(n){return zt(n)}class CT{constructor(e){this.auth=e,this.observer=null,this.addObserver=CN(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let df={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pD(n){df=n}function Sb(n){return df.loadJS(n)}function mD(){return df.recaptchaEnterpriseScript}function gD(){return df.gapiScript}function _D(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class yD{constructor(){this.enterprise=new vD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class vD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ED="recaptcha-enterprise",bb="NO_RECAPTCHA";class TD{constructor(e){this.type=ED,this.auth=Pa(e)}async verify(e="verify",t=!1){async function i(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(u,h)=>{ZO(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new XO(f);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,u(m.siteKey)}}).catch(f=>{h(f)})})}function a(o,u,h){const f=window.grecaptcha;TT(f)?f.enterprise.ready(()=>{f.enterprise.execute(o,{action:e}).then(m=>{u(m)}).catch(()=>{u(bb)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yD().execute("siteKey",{action:"verify"}):new Promise((o,u)=>{i(this.auth).then(h=>{if(!t&&TT(window.grecaptcha))a(h,o,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let f=mD();f.length!==0&&(f+=h),Sb(f).then(()=>{a(h,o,u)}).catch(m=>{u(m)})}}).catch(h=>{u(h)})})}}async function RT(n,e,t,i=!1,a=!1){const o=new TD(n);let u;if(a)u=bb;else try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const h=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const f=h.phoneEnrollmentInfo.phoneNumber,m=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const f=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return i?Object.assign(h,{captchaResp:u}):Object.assign(h,{captchaResponse:u}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Cg(n,e,t,i,a){var o;if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await RT(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await RT(n,e,t,t==="getOobCode");return i(n,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(n,e){const t=hf(n,"auth");if(t.isInitialized()){const a=t.getImmediate(),o=t.getOptions();if(bs(o,e??{}))return a;pi(a,"already-initialized")}return t.initialize({options:e})}function SD(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(wr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function bD(n,e,t){const i=Pa(n);Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,o=Ab(e),{host:u,port:h}=AD(e),f=h===null?"":`:${h}`,m={url:`${o}//${u}${f}/`},_=Object.freeze({host:u,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Se(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Se(bs(m,i.config.emulator)&&bs(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=m,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Da(u)?(y_(`${o}//${u}${f}`),v_("Auth",!0)):CD()}function Ab(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function AD(n){const e=Ab(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const o=a[1];return{host:o,port:IT(i.substr(o.length+1))}}else{const[o,u]=i.split(":");return{host:o,port:IT(u)}}}function IT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function CD(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Tr("not implemented")}_getIdTokenResponse(e){return Tr("not implemented")}_linkToIdToken(e,t){return Tr("not implemented")}_getReauthenticationResolver(e){return Tr("not implemented")}}async function RD(n,e){return Lr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(n,e){return _c(n,"POST","/v1/accounts:signInWithPassword",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xD(n,e){return _c(n,"POST","/v1/accounts:signInWithEmailLink",Ms(n,e))}async function ND(n,e){return _c(n,"POST","/v1/accounts:signInWithEmailLink",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends I_{constructor(e,t,i,a=null){super("password",i),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new ic(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new ic(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cg(e,t,"signInWithPassword",ID);case"emailLink":return xD(e,{email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cg(e,i,"signUpPassword",RD);case"emailLink":return ND(e,{idToken:t,email:this._email,oobCode:this._password});default:pi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ho(n,e){return _c(n,"POST","/v1/accounts:signInWithIdp",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD="http://localhost";class Sa extends I_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a}=t,o=S_(t,["providerId","signInMethod"]);if(!i||!a)return null;const u=new Sa(i,a);return u.idToken=o.idToken||void 0,u.accessToken=o.accessToken||void 0,u.secret=o.secret,u.nonce=o.nonce,u.pendingToken=o.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ho(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ho(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ho(e,t)}buildRequest(){const e={requestUri:OD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=dl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MD(n){const e=Vu(Uu(n)).link,t=e?Vu(Uu(e)).deep_link_id:null,i=Vu(Uu(n)).deep_link_id;return(i?Vu(Uu(i)).link:null)||i||t||e||n}class x_{constructor(e){var t,i,a,o,u,h;const f=Vu(Uu(e)),m=(t=f.apiKey)!==null&&t!==void 0?t:null,_=(i=f.oobCode)!==null&&i!==void 0?i:null,v=DD((a=f.mode)!==null&&a!==void 0?a:null);Se(m&&_&&v,"argument-error"),this.apiKey=m,this.operation=v,this.code=_,this.continueUrl=(o=f.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(u=f.lang)!==null&&u!==void 0?u:null,this.tenantId=(h=f.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const t=MD(e);try{return new x_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this.providerId=fl.PROVIDER_ID}static credential(e,t){return ic._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=x_.parseLink(t);return Se(i,"argument-error"),ic._fromEmailAndCode(e,i.code,i.tenantId)}}fl.PROVIDER_ID="password";fl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";fl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc extends Cb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends yc{constructor(){super("facebook.com")}static credential(e){return Sa._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.FACEBOOK_SIGN_IN_METHOD="facebook.com";ds.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends yc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Sa._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return fs.credential(t,i)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps extends yc{constructor(){super("github.com")}static credential(e){return Sa._fromParams({providerId:ps.PROVIDER_ID,signInMethod:ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ps.credentialFromTaggedObject(e)}static credentialFromError(e){return ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ps.credential(e.oauthAccessToken)}catch{return null}}}ps.GITHUB_SIGN_IN_METHOD="github.com";ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends yc{constructor(){super("twitter.com")}static credential(e,t){return Sa._fromParams({providerId:ms.PROVIDER_ID,signInMethod:ms.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ms.credentialFromTaggedObject(e)}static credentialFromError(e){return ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ms.credential(t,i)}catch{return null}}}ms.TWITTER_SIGN_IN_METHOD="twitter.com";ms.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PD(n,e){return _c(n,"POST","/v1/accounts:signUp",Ms(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const o=await ci._fromIdTokenResponse(e,i,a),u=xT(i);return new ba({user:o,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=xT(i);return new ba({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function xT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends Pr{constructor(e,t,i,a){var o;super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,Od.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new Od(e,t,i,a)}}function Rb(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Od._fromErrorAndOperation(n,o,e,i):o})}async function kD(n,e,t=!1){const i=await Qo(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ba._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(n,e,t=!1){const{auth:i}=n;if(kn(i.app))return Promise.reject(Ar(i));const a="reauthenticate";try{const o=await Qo(n,Rb(i,a,e,n),t);Se(o.idToken,i,"internal-error");const u=C_(o.idToken);Se(u,i,"internal-error");const{sub:h}=u;return Se(n.uid===h,i,"user-mismatch"),ba._forOperation(n,a,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&pi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ib(n,e,t=!1){if(kn(n.app))return Promise.reject(Ar(n));const i="signIn",a=await Rb(n,i,e),o=await ba._fromIdTokenResponse(n,i,a);return t||await n._updateCurrentUser(o.user),o}async function VD(n,e){return Ib(Pa(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xb(n){const e=Pa(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UD(n,e,t){if(kn(n.app))return Promise.reject(Ar(n));const i=Pa(n),u=await Cg(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",PD).catch(f=>{throw f.code==="auth/password-does-not-meet-requirements"&&xb(n),f}),h=await ba._fromIdTokenResponse(i,"signIn",u);return await i._updateCurrentUser(h.user),h}function zD(n,e,t){return kn(n.app)?Promise.reject(Ar(n)):VD(zt(n),fl.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&xb(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BD(n,e){return Lr(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=zt(n),o={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},u=await Qo(i,BD(i.auth,o));i.displayName=u.displayName||null,i.photoURL=u.photoUrl||null;const h=i.providerData.find(({providerId:f})=>f==="password");h&&(h.displayName=i.displayName,h.photoURL=i.photoURL),await i._updateTokensIfNecessary(u)}function FD(n,e,t,i){return zt(n).onIdTokenChanged(e,t,i)}function HD(n,e,t){return zt(n).beforeAuthStateChanged(e,t)}function Nb(n,e,t,i){return zt(n).onAuthStateChanged(e,t,i)}function qD(n){return zt(n).signOut()}const Dd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Dd,"1"),this.storage.removeItem(Dd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GD=1e3,$D=10;class Db extends Ob{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,h,f)=>{this.notifyListeners(u,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},o=this.storage.getItem(i);lD()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,$D):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},GD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Db.type="LOCAL";const YD=Db;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb extends Ob{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Mb.type="SESSION";const Pb=Mb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new ff(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:o}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const h=Array.from(u).map(async m=>m(t.origin,o)),f=await KD(h);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ff.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,u;return new Promise((h,f)=>{const m=N_("",20);a.port1.start();const _=setTimeout(()=>{f(new Error("unsupported_event"))},i);u={messageChannel:a,onMessage(v){const E=v;if(E.data.eventId===m)switch(E.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(E.data.response);break;default:clearTimeout(_),clearTimeout(o),f(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zi(){return window}function WD(n){zi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(){return typeof zi().WorkerGlobalScope<"u"&&typeof zi().importScripts=="function"}async function XD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZD(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function JD(){return kb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb="firebaseLocalStorageDb",e2=1,Md="firebaseLocalStorage",Vb="fbase_key";class vc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function pf(n,e){return n.transaction([Md],e?"readwrite":"readonly").objectStore(Md)}function t2(){const n=indexedDB.deleteDatabase(Lb);return new vc(n).toPromise()}function Rg(){const n=indexedDB.open(Lb,e2);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Md,{keyPath:Vb})}catch(a){t(a)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Md)?e(i):(i.close(),await t2(),e(await Rg()))})})}async function NT(n,e,t){const i=pf(n,!0).put({[Vb]:e,value:t});return new vc(i).toPromise()}async function n2(n,e){const t=pf(n,!1).get(e),i=await new vc(t).toPromise();return i===void 0?null:i.value}function OT(n,e){const t=pf(n,!0).delete(e);return new vc(t).toPromise()}const i2=800,r2=3;class Ub{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>r2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ff._getInstance(JD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await XD(),!this.activeServiceWorker)return;this.sender=new QD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rg();return await NT(e,Dd,"1"),await OT(e,Dd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>NT(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>n2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>OT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=pf(a,!1).getAll();return new vc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ub.type="LOCAL";const s2=Ub;new gc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(n,e){return e?wr(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_ extends I_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ho(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ho(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ho(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function o2(n){return Ib(n.auth,new O_(n),n.bypassAuthState)}function l2(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),LD(t,new O_(n),n.bypassAuthState)}async function u2(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),kD(t,new O_(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e,t,i,a,o=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:o,error:u,type:h}=e;if(u){this.reject(u);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return o2;case"linkViaPopup":case"linkViaRedirect":return u2;case"reauthViaPopup":case"reauthViaRedirect":return l2;default:pi(this.auth,"internal-error")}}resolve(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=new gc(2e3,1e4);class Uo extends zb{constructor(e,t,i,a,o){super(e,t,a,o),this.provider=i,this.authWindow=null,this.pollId=null,Uo.currentPopupAction&&Uo.currentPopupAction.cancel(),Uo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){xr(this.filter.length===1,"Popup operations only handle one event");const e=N_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ui(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ui(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Uo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ui(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,c2.get())};e()}}Uo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h2="pendingRedirect",pd=new Map;class d2 extends zb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=pd.get(this.auth._key());if(!e){try{const i=await f2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}pd.set(this.auth._key(),e)}return this.bypassAuthState||pd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function f2(n,e){const t=g2(e),i=m2(n);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function p2(n,e){pd.set(n._key(),e)}function m2(n){return wr(n._redirectPersistence)}function g2(n){return fd(h2,n.config.apiKey,n.name)}async function _2(n,e,t=!1){if(kn(n.app))return Promise.reject(Ar(n));const i=Pa(n),a=a2(i,e),u=await new d2(i,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y2=10*60*1e3;class v2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E2(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Bb(e)){const a=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ui(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=y2&&this.cachedEventUids.clear(),this.cachedEventUids.has(DT(e))}saveEventToCache(e){this.cachedEventUids.add(DT(e)),this.lastProcessedEventTime=Date.now()}}function DT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Bb({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E2(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bb(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T2(n,e={}){return Lr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S2=/^https?/;async function b2(n){if(n.config.emulator)return;const{authorizedDomains:e}=await T2(n);for(const t of e)try{if(A2(t))return}catch{}pi(n,"unauthorized-domain")}function A2(n){const e=bg(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!S2.test(t))return!1;if(w2.test(n))return i===n;const a=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=new gc(3e4,6e4);function MT(){const n=zi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function R2(n){return new Promise((e,t)=>{var i,a,o;function u(){MT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{MT(),t(Ui(n,"network-request-failed"))},timeout:C2.get()})}if(!((a=(i=zi().gapi)===null||i===void 0?void 0:i.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((o=zi().gapi)===null||o===void 0)&&o.load)u();else{const h=_D("iframefcb");return zi()[h]=()=>{gapi.load?u():t(Ui(n,"network-request-failed"))},Sb(`${gD()}?onload=${h}`).catch(f=>t(f))}}).catch(e=>{throw md=null,e})}let md=null;function I2(n){return md=md||R2(n),md}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2=new gc(5e3,15e3),N2="__/auth/iframe",O2="emulator/auth/iframe",D2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},M2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function P2(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?A_(e,O2):`https://${n.config.authDomain}/${N2}`,i={apiKey:e.apiKey,appName:n.name,v:Ma},a=M2.get(n.config.apiHost);a&&(i.eid=a);const o=n._getFrameworks();return o.length&&(i.fw=o.join(",")),`${t}?${dl(i).slice(1)}`}async function k2(n){const e=await I2(n),t=zi().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:P2(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D2,dontclear:!0},i=>new Promise(async(a,o)=>{await i.restyle({setHideOnLeave:!1});const u=Ui(n,"network-request-failed"),h=zi().setTimeout(()=>{o(u)},x2.get());function f(){zi().clearTimeout(h),a(i)}i.ping(f).then(f,()=>{o(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V2=500,U2=600,z2="_blank",B2="http://localhost";class PT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j2(n,e,t,i=V2,a=U2){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const f=Object.assign(Object.assign({},L2),{width:i.toString(),height:a.toString(),top:o,left:u}),m=fn().toLowerCase();t&&(h=gb(m)?z2:t),pb(m)&&(e=e||B2,f.scrollbars="yes");const _=Object.entries(f).reduce((E,[A,S])=>`${E}${A}=${S},`,"");if(oD(m)&&h!=="_self")return F2(e||"",h),new PT(null);const v=window.open(e||"",h,_);Se(v,n,"popup-blocked");try{v.focus()}catch{}return new PT(v)}function F2(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="__/auth/handler",q2="emulator/auth/handler",G2=encodeURIComponent("fac");async function kT(n,e,t,i,a,o){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ma,eventId:a};if(e instanceof Cb){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",yg(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))u[_]=v}if(e instanceof yc){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const h=u;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const f=await n._getAppCheckToken(),m=f?`#${G2}=${encodeURIComponent(f)}`:"";return`${$2(n)}?${dl(h).slice(1)}${m}`}function $2({config:n}){return n.emulator?A_(n,q2):`https://${n.authDomain}/${H2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="webStorageSupport";class Y2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pb,this._completeRedirectFn=_2,this._overrideRedirectResult=p2}async _openPopup(e,t,i,a){var o;xr((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const u=await kT(e,t,i,bg(),a);return j2(e,u,N_())}async _openRedirect(e,t,i,a){await this._originValidation(e);const o=await kT(e,t,i,bg(),a);return WD(o),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:o}=this.eventManagers[t];return a?Promise.resolve(a):(xr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await k2(e),i=new v2(e);return t.register("authEvent",a=>(Se(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wm,{type:Wm},a=>{var o;const u=(o=a==null?void 0:a[0])===null||o===void 0?void 0:o[Wm];u!==void 0&&t(!!u),pi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=b2(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tb()||mb()||R_()}}const K2=Y2;var LT="@firebase/auth",VT="1.10.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function X2(n){wa(new As("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:u,authDomain:h}=i.options;Se(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:u,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wb(n)},m=new fD(i,a,o,f);return SD(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),wa(new As("auth-internal",e=>{const t=Pa(e.getProvider("auth").getImmediate());return(i=>new Q2(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vi(LT,VT,W2(n)),Vi(LT,VT,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=5*60,J2=XS("authIdTokenMaxAge")||Z2;let UT=null;const eM=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>J2)return;const a=t==null?void 0:t.token;UT!==a&&(UT=a,await fetch(n,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function jb(n=w_()){const e=hf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=wD(n,{popupRedirectResolver:K2,persistence:[s2,YD,Pb]}),i=XS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const u=eM(o.toString());HD(t,u,()=>u(t.currentUser)),FD(t,h=>u(h))}}const a=KS("auth");return a&&bD(t,`http://${a}`),t}function tM(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}pD({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=a=>{const o=Ui("internal-error");o.customData=a,t(o)},i.type="text/javascript",i.charset="UTF-8",tM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});X2("Browser");var zT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Es,Fb;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,R){function I(){}I.prototype=R.prototype,P.D=R.prototype,P.prototype=new I,P.prototype.constructor=P,P.C=function(x,k,U){for(var N=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)N[$e-2]=arguments[$e];return R.prototype[k].apply(x,N)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(P,R,I){I||(I=0);var x=Array(16);if(typeof R=="string")for(var k=0;16>k;++k)x[k]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(k=0;16>k;++k)x[k]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=P.g[0],I=P.g[1],k=P.g[2];var U=P.g[3],N=R+(U^I&(k^U))+x[0]+3614090360&4294967295;R=I+(N<<7&4294967295|N>>>25),N=U+(k^R&(I^k))+x[1]+3905402710&4294967295,U=R+(N<<12&4294967295|N>>>20),N=k+(I^U&(R^I))+x[2]+606105819&4294967295,k=U+(N<<17&4294967295|N>>>15),N=I+(R^k&(U^R))+x[3]+3250441966&4294967295,I=k+(N<<22&4294967295|N>>>10),N=R+(U^I&(k^U))+x[4]+4118548399&4294967295,R=I+(N<<7&4294967295|N>>>25),N=U+(k^R&(I^k))+x[5]+1200080426&4294967295,U=R+(N<<12&4294967295|N>>>20),N=k+(I^U&(R^I))+x[6]+2821735955&4294967295,k=U+(N<<17&4294967295|N>>>15),N=I+(R^k&(U^R))+x[7]+4249261313&4294967295,I=k+(N<<22&4294967295|N>>>10),N=R+(U^I&(k^U))+x[8]+1770035416&4294967295,R=I+(N<<7&4294967295|N>>>25),N=U+(k^R&(I^k))+x[9]+2336552879&4294967295,U=R+(N<<12&4294967295|N>>>20),N=k+(I^U&(R^I))+x[10]+4294925233&4294967295,k=U+(N<<17&4294967295|N>>>15),N=I+(R^k&(U^R))+x[11]+2304563134&4294967295,I=k+(N<<22&4294967295|N>>>10),N=R+(U^I&(k^U))+x[12]+1804603682&4294967295,R=I+(N<<7&4294967295|N>>>25),N=U+(k^R&(I^k))+x[13]+4254626195&4294967295,U=R+(N<<12&4294967295|N>>>20),N=k+(I^U&(R^I))+x[14]+2792965006&4294967295,k=U+(N<<17&4294967295|N>>>15),N=I+(R^k&(U^R))+x[15]+1236535329&4294967295,I=k+(N<<22&4294967295|N>>>10),N=R+(k^U&(I^k))+x[1]+4129170786&4294967295,R=I+(N<<5&4294967295|N>>>27),N=U+(I^k&(R^I))+x[6]+3225465664&4294967295,U=R+(N<<9&4294967295|N>>>23),N=k+(R^I&(U^R))+x[11]+643717713&4294967295,k=U+(N<<14&4294967295|N>>>18),N=I+(U^R&(k^U))+x[0]+3921069994&4294967295,I=k+(N<<20&4294967295|N>>>12),N=R+(k^U&(I^k))+x[5]+3593408605&4294967295,R=I+(N<<5&4294967295|N>>>27),N=U+(I^k&(R^I))+x[10]+38016083&4294967295,U=R+(N<<9&4294967295|N>>>23),N=k+(R^I&(U^R))+x[15]+3634488961&4294967295,k=U+(N<<14&4294967295|N>>>18),N=I+(U^R&(k^U))+x[4]+3889429448&4294967295,I=k+(N<<20&4294967295|N>>>12),N=R+(k^U&(I^k))+x[9]+568446438&4294967295,R=I+(N<<5&4294967295|N>>>27),N=U+(I^k&(R^I))+x[14]+3275163606&4294967295,U=R+(N<<9&4294967295|N>>>23),N=k+(R^I&(U^R))+x[3]+4107603335&4294967295,k=U+(N<<14&4294967295|N>>>18),N=I+(U^R&(k^U))+x[8]+1163531501&4294967295,I=k+(N<<20&4294967295|N>>>12),N=R+(k^U&(I^k))+x[13]+2850285829&4294967295,R=I+(N<<5&4294967295|N>>>27),N=U+(I^k&(R^I))+x[2]+4243563512&4294967295,U=R+(N<<9&4294967295|N>>>23),N=k+(R^I&(U^R))+x[7]+1735328473&4294967295,k=U+(N<<14&4294967295|N>>>18),N=I+(U^R&(k^U))+x[12]+2368359562&4294967295,I=k+(N<<20&4294967295|N>>>12),N=R+(I^k^U)+x[5]+4294588738&4294967295,R=I+(N<<4&4294967295|N>>>28),N=U+(R^I^k)+x[8]+2272392833&4294967295,U=R+(N<<11&4294967295|N>>>21),N=k+(U^R^I)+x[11]+1839030562&4294967295,k=U+(N<<16&4294967295|N>>>16),N=I+(k^U^R)+x[14]+4259657740&4294967295,I=k+(N<<23&4294967295|N>>>9),N=R+(I^k^U)+x[1]+2763975236&4294967295,R=I+(N<<4&4294967295|N>>>28),N=U+(R^I^k)+x[4]+1272893353&4294967295,U=R+(N<<11&4294967295|N>>>21),N=k+(U^R^I)+x[7]+4139469664&4294967295,k=U+(N<<16&4294967295|N>>>16),N=I+(k^U^R)+x[10]+3200236656&4294967295,I=k+(N<<23&4294967295|N>>>9),N=R+(I^k^U)+x[13]+681279174&4294967295,R=I+(N<<4&4294967295|N>>>28),N=U+(R^I^k)+x[0]+3936430074&4294967295,U=R+(N<<11&4294967295|N>>>21),N=k+(U^R^I)+x[3]+3572445317&4294967295,k=U+(N<<16&4294967295|N>>>16),N=I+(k^U^R)+x[6]+76029189&4294967295,I=k+(N<<23&4294967295|N>>>9),N=R+(I^k^U)+x[9]+3654602809&4294967295,R=I+(N<<4&4294967295|N>>>28),N=U+(R^I^k)+x[12]+3873151461&4294967295,U=R+(N<<11&4294967295|N>>>21),N=k+(U^R^I)+x[15]+530742520&4294967295,k=U+(N<<16&4294967295|N>>>16),N=I+(k^U^R)+x[2]+3299628645&4294967295,I=k+(N<<23&4294967295|N>>>9),N=R+(k^(I|~U))+x[0]+4096336452&4294967295,R=I+(N<<6&4294967295|N>>>26),N=U+(I^(R|~k))+x[7]+1126891415&4294967295,U=R+(N<<10&4294967295|N>>>22),N=k+(R^(U|~I))+x[14]+2878612391&4294967295,k=U+(N<<15&4294967295|N>>>17),N=I+(U^(k|~R))+x[5]+4237533241&4294967295,I=k+(N<<21&4294967295|N>>>11),N=R+(k^(I|~U))+x[12]+1700485571&4294967295,R=I+(N<<6&4294967295|N>>>26),N=U+(I^(R|~k))+x[3]+2399980690&4294967295,U=R+(N<<10&4294967295|N>>>22),N=k+(R^(U|~I))+x[10]+4293915773&4294967295,k=U+(N<<15&4294967295|N>>>17),N=I+(U^(k|~R))+x[1]+2240044497&4294967295,I=k+(N<<21&4294967295|N>>>11),N=R+(k^(I|~U))+x[8]+1873313359&4294967295,R=I+(N<<6&4294967295|N>>>26),N=U+(I^(R|~k))+x[15]+4264355552&4294967295,U=R+(N<<10&4294967295|N>>>22),N=k+(R^(U|~I))+x[6]+2734768916&4294967295,k=U+(N<<15&4294967295|N>>>17),N=I+(U^(k|~R))+x[13]+1309151649&4294967295,I=k+(N<<21&4294967295|N>>>11),N=R+(k^(I|~U))+x[4]+4149444226&4294967295,R=I+(N<<6&4294967295|N>>>26),N=U+(I^(R|~k))+x[11]+3174756917&4294967295,U=R+(N<<10&4294967295|N>>>22),N=k+(R^(U|~I))+x[2]+718787259&4294967295,k=U+(N<<15&4294967295|N>>>17),N=I+(U^(k|~R))+x[9]+3951481745&4294967295,P.g[0]=P.g[0]+R&4294967295,P.g[1]=P.g[1]+(k+(N<<21&4294967295|N>>>11))&4294967295,P.g[2]=P.g[2]+k&4294967295,P.g[3]=P.g[3]+U&4294967295}i.prototype.u=function(P,R){R===void 0&&(R=P.length);for(var I=R-this.blockSize,x=this.B,k=this.h,U=0;U<R;){if(k==0)for(;U<=I;)a(this,P,U),U+=this.blockSize;if(typeof P=="string"){for(;U<R;)if(x[k++]=P.charCodeAt(U++),k==this.blockSize){a(this,x),k=0;break}}else for(;U<R;)if(x[k++]=P[U++],k==this.blockSize){a(this,x),k=0;break}}this.h=k,this.o+=R},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var R=1;R<P.length-8;++R)P[R]=0;var I=8*this.o;for(R=P.length-8;R<P.length;++R)P[R]=I&255,I/=256;for(this.u(P),P=Array(16),R=I=0;4>R;++R)for(var x=0;32>x;x+=8)P[I++]=this.g[R]>>>x&255;return P};function o(P,R){var I=h;return Object.prototype.hasOwnProperty.call(I,P)?I[P]:I[P]=R(P)}function u(P,R){this.h=R;for(var I=[],x=!0,k=P.length-1;0<=k;k--){var U=P[k]|0;x&&U==R||(I[k]=U,x=!1)}this.g=I}var h={};function f(P){return-128<=P&&128>P?o(P,function(R){return new u([R|0],0>R?-1:0)}):new u([P|0],0>P?-1:0)}function m(P){if(isNaN(P)||!isFinite(P))return v;if(0>P)return L(m(-P));for(var R=[],I=1,x=0;P>=I;x++)R[x]=P/I|0,I*=4294967296;return new u(R,0)}function _(P,R){if(P.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(P.charAt(0)=="-")return L(_(P.substring(1),R));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(R,8)),x=v,k=0;k<P.length;k+=8){var U=Math.min(8,P.length-k),N=parseInt(P.substring(k,k+U),R);8>U?(U=m(Math.pow(R,U)),x=x.j(U).add(m(N))):(x=x.j(I),x=x.add(m(N)))}return x}var v=f(0),E=f(1),A=f(16777216);n=u.prototype,n.m=function(){if(D(this))return-L(this).m();for(var P=0,R=1,I=0;I<this.g.length;I++){var x=this.i(I);P+=(0<=x?x:4294967296+x)*R,R*=4294967296}return P},n.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(S(this))return"0";if(D(this))return"-"+L(this).toString(P);for(var R=m(Math.pow(P,6)),I=this,x="";;){var k=ee(I,R).g;I=M(I,k.j(R));var U=((0<I.g.length?I.g[0]:I.h)>>>0).toString(P);if(I=k,S(I))return U+x;for(;6>U.length;)U="0"+U;x=U+x}},n.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function S(P){if(P.h!=0)return!1;for(var R=0;R<P.g.length;R++)if(P.g[R]!=0)return!1;return!0}function D(P){return P.h==-1}n.l=function(P){return P=M(this,P),D(P)?-1:S(P)?0:1};function L(P){for(var R=P.g.length,I=[],x=0;x<R;x++)I[x]=~P.g[x];return new u(I,~P.h).add(E)}n.abs=function(){return D(this)?L(this):this},n.add=function(P){for(var R=Math.max(this.g.length,P.g.length),I=[],x=0,k=0;k<=R;k++){var U=x+(this.i(k)&65535)+(P.i(k)&65535),N=(U>>>16)+(this.i(k)>>>16)+(P.i(k)>>>16);x=N>>>16,U&=65535,N&=65535,I[k]=N<<16|U}return new u(I,I[I.length-1]&-2147483648?-1:0)};function M(P,R){return P.add(L(R))}n.j=function(P){if(S(this)||S(P))return v;if(D(this))return D(P)?L(this).j(L(P)):L(L(this).j(P));if(D(P))return L(this.j(L(P)));if(0>this.l(A)&&0>P.l(A))return m(this.m()*P.m());for(var R=this.g.length+P.g.length,I=[],x=0;x<2*R;x++)I[x]=0;for(x=0;x<this.g.length;x++)for(var k=0;k<P.g.length;k++){var U=this.i(x)>>>16,N=this.i(x)&65535,$e=P.i(k)>>>16,Le=P.i(k)&65535;I[2*x+2*k]+=N*Le,H(I,2*x+2*k),I[2*x+2*k+1]+=U*Le,H(I,2*x+2*k+1),I[2*x+2*k+1]+=N*$e,H(I,2*x+2*k+1),I[2*x+2*k+2]+=U*$e,H(I,2*x+2*k+2)}for(x=0;x<R;x++)I[x]=I[2*x+1]<<16|I[2*x];for(x=R;x<2*R;x++)I[x]=0;return new u(I,0)};function H(P,R){for(;(P[R]&65535)!=P[R];)P[R+1]+=P[R]>>>16,P[R]&=65535,R++}function j(P,R){this.g=P,this.h=R}function ee(P,R){if(S(R))throw Error("division by zero");if(S(P))return new j(v,v);if(D(P))return R=ee(L(P),R),new j(L(R.g),L(R.h));if(D(R))return R=ee(P,L(R)),new j(L(R.g),R.h);if(30<P.g.length){if(D(P)||D(R))throw Error("slowDivide_ only works with positive integers.");for(var I=E,x=R;0>=x.l(P);)I=Z(I),x=Z(x);var k=ue(I,1),U=ue(x,1);for(x=ue(x,2),I=ue(I,2);!S(x);){var N=U.add(x);0>=N.l(P)&&(k=k.add(I),U=N),x=ue(x,1),I=ue(I,1)}return R=M(P,k.j(R)),new j(k,R)}for(k=v;0<=P.l(R);){for(I=Math.max(1,Math.floor(P.m()/R.m())),x=Math.ceil(Math.log(I)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),U=m(I),N=U.j(R);D(N)||0<N.l(P);)I-=x,U=m(I),N=U.j(R);S(U)&&(U=E),k=k.add(U),P=M(P,N)}return new j(k,P)}n.A=function(P){return ee(this,P).h},n.and=function(P){for(var R=Math.max(this.g.length,P.g.length),I=[],x=0;x<R;x++)I[x]=this.i(x)&P.i(x);return new u(I,this.h&P.h)},n.or=function(P){for(var R=Math.max(this.g.length,P.g.length),I=[],x=0;x<R;x++)I[x]=this.i(x)|P.i(x);return new u(I,this.h|P.h)},n.xor=function(P){for(var R=Math.max(this.g.length,P.g.length),I=[],x=0;x<R;x++)I[x]=this.i(x)^P.i(x);return new u(I,this.h^P.h)};function Z(P){for(var R=P.g.length+1,I=[],x=0;x<R;x++)I[x]=P.i(x)<<1|P.i(x-1)>>>31;return new u(I,P.h)}function ue(P,R){var I=R>>5;R%=32;for(var x=P.g.length-I,k=[],U=0;U<x;U++)k[U]=0<R?P.i(U+I)>>>R|P.i(U+I+1)<<32-R:P.i(U+I);return new u(k,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Fb=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=m,u.fromString=_,Es=u}).apply(typeof zT<"u"?zT:typeof self<"u"?self:typeof window<"u"?window:{});var td=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hb,zu,qb,gd,Ig,Gb,$b,Yb;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,T){return d==Array.prototype||d==Object.prototype||(d[y]=T.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof td=="object"&&td];for(var y=0;y<d.length;++y){var T=d[y];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=t(this);function a(d,y){if(y)e:{var T=i;d=d.split(".");for(var C=0;C<d.length-1;C++){var G=d[C];if(!(G in T))break e;T=T[G]}d=d[d.length-1],C=T[d],y=y(C),y!=C&&y!=null&&e(T,d,{configurable:!0,writable:!0,value:y})}}function o(d,y){d instanceof String&&(d+="");var T=0,C=!1,G={next:function(){if(!C&&T<d.length){var X=T++;return{value:y(X,d[X]),done:!1}}return C=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}a("Array.prototype.values",function(d){return d||function(){return o(this,function(y,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function f(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function m(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function _(d,y,T){return d.call.apply(d.bind,arguments)}function v(d,y,T){if(!d)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,C),d.apply(y,G)}}return function(){return d.apply(y,arguments)}}function E(d,y,T){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:v,E.apply(null,arguments)}function A(d,y){var T=Array.prototype.slice.call(arguments,1);return function(){var C=T.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function S(d,y){function T(){}T.prototype=y.prototype,d.aa=y.prototype,d.prototype=new T,d.prototype.constructor=d,d.Qb=function(C,G,X){for(var ce=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ce[ze-2]=arguments[ze];return y.prototype[G].apply(C,ce)}}function D(d){const y=d.length;if(0<y){const T=Array(y);for(let C=0;C<y;C++)T[C]=d[C];return T}return[]}function L(d,y){for(let T=1;T<arguments.length;T++){const C=arguments[T];if(f(C)){const G=d.length||0,X=C.length||0;d.length=G+X;for(let ce=0;ce<X;ce++)d[G+ce]=C[ce]}else d.push(C)}}class M{constructor(y,T){this.i=y,this.j=T,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function H(d){return/^[\s\xa0]*$/.test(d)}function j(){var d=h.navigator;return d&&(d=d.userAgent)?d:""}function ee(d){return ee[" "](d),d}ee[" "]=function(){};var Z=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function ue(d,y,T){for(const C in d)y.call(T,d[C],C,d)}function P(d,y){for(const T in d)y.call(void 0,d[T],T,d)}function R(d){const y={};for(const T in d)y[T]=d[T];return y}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(d,y){let T,C;for(let G=1;G<arguments.length;G++){C=arguments[G];for(T in C)d[T]=C[T];for(let X=0;X<I.length;X++)T=I[X],Object.prototype.hasOwnProperty.call(C,T)&&(d[T]=C[T])}}function k(d){var y=1;d=d.split(":");const T=[];for(;0<y&&d.length;)T.push(d.shift()),y--;return d.length&&T.push(d.join(":")),T}function U(d){h.setTimeout(()=>{throw d},0)}function N(){var d=ge;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class $e{constructor(){this.h=this.g=null}add(y,T){const C=Le.get();C.set(y,T),this.h?this.h.next=C:this.g=C,this.h=C}}var Le=new M(()=>new $,d=>d.reset());class ${constructor(){this.next=this.g=this.h=null}set(y,T){this.h=y,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,de=!1,ge=new $e,O=()=>{const d=h.Promise.resolve(void 0);oe=()=>{d.then(te)}};var te=()=>{for(var d;d=N();){try{d.h.call(d.g)}catch(T){U(T)}var y=Le;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}de=!1};function ae(){this.s=this.s,this.C=this.C}ae.prototype.s=!1,ae.prototype.ma=function(){this.s||(this.s=!0,this.N())},ae.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function se(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}se.prototype.h=function(){this.defaultPrevented=!0};var fe=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};h.addEventListener("test",T,y),h.removeEventListener("test",T,y)}catch{}return d}();function xe(d,y){if(se.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var T=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(Z){e:{try{ee(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else T=="mouseover"?y=d.fromElement:T=="mouseout"&&(y=d.toElement);this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:we[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&xe.aa.h.call(this)}}S(xe,se);var we={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var St="closure_listenable_"+(1e6*Math.random()|0),Xe=0;function ti(d,y,T,C,G){this.listener=d,this.proxy=null,this.src=y,this.type=T,this.capture=!!C,this.ha=G,this.key=++Xe,this.da=this.fa=!1}function $i(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function zn(d){this.src=d,this.g={},this.h=0}zn.prototype.add=function(d,y,T,C,G){var X=d.toString();d=this.g[X],d||(d=this.g[X]=[],this.h++);var ce=gi(d,y,C,G);return-1<ce?(y=d[ce],T||(y.fa=!1)):(y=new ti(y,this.src,X,!!C,G),y.fa=T,d.push(y)),y};function ni(d,y){var T=y.type;if(T in d.g){var C=d.g[T],G=Array.prototype.indexOf.call(C,y,void 0),X;(X=0<=G)&&Array.prototype.splice.call(C,G,1),X&&($i(y),d.g[T].length==0&&(delete d.g[T],d.h--))}}function gi(d,y,T,C){for(var G=0;G<d.length;++G){var X=d[G];if(!X.da&&X.listener==y&&X.capture==!!T&&X.ha==C)return G}return-1}var Ls="closure_lm_"+(1e6*Math.random()|0),Tl={};function xc(d,y,T,C,G){if(Array.isArray(y)){for(var X=0;X<y.length;X++)xc(d,y[X],T,C,G);return null}return T=Nc(T),d&&d[St]?d.K(y,T,m(C)?!!C.capture:!1,G):Bn(d,y,T,!1,C,G)}function Bn(d,y,T,C,G,X){if(!y)throw Error("Invalid event type");var ce=m(G)?!!G.capture:!!G,ze=ja(d);if(ze||(d[Ls]=ze=new zn(d)),T=ze.add(y,T,C,ce,X),T.proxy)return T;if(C=Lf(),T.proxy=C,C.src=d,C.listener=T,d.addEventListener)fe||(G=ce),G===void 0&&(G=!1),d.addEventListener(y.toString(),C,G);else if(d.attachEvent)d.attachEvent(Vs(y.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Lf(){function d(T){return y.call(d.src,d.listener,T)}const y=Vf;return d}function wl(d,y,T,C,G){if(Array.isArray(y))for(var X=0;X<y.length;X++)wl(d,y[X],T,C,G);else C=m(C)?!!C.capture:!!C,T=Nc(T),d&&d[St]?(d=d.i,y=String(y).toString(),y in d.g&&(X=d.g[y],T=gi(X,T,C,G),-1<T&&($i(X[T]),Array.prototype.splice.call(X,T,1),X.length==0&&(delete d.g[y],d.h--)))):d&&(d=ja(d))&&(y=d.g[y.toString()],d=-1,y&&(d=gi(y,T,C,G)),(T=-1<d?y[d]:null)&&Ba(T))}function Ba(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[St])ni(y.i,d);else{var T=d.type,C=d.proxy;y.removeEventListener?y.removeEventListener(T,C,d.capture):y.detachEvent?y.detachEvent(Vs(T),C):y.addListener&&y.removeListener&&y.removeListener(C),(T=ja(y))?(ni(T,d),T.h==0&&(T.src=null,y[Ls]=null)):$i(d)}}}function Vs(d){return d in Tl?Tl[d]:Tl[d]="on"+d}function Vf(d,y){if(d.da)d=!0;else{y=new xe(y,this);var T=d.listener,C=d.ha||d.src;d.fa&&Ba(d),d=T.call(C,y)}return d}function ja(d){return d=d[Ls],d instanceof zn?d:null}var Sl="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nc(d){return typeof d=="function"?d:(d[Sl]||(d[Sl]=function(y){return d.handleEvent(y)}),d[Sl])}function mt(){ae.call(this),this.i=new zn(this),this.M=this,this.F=null}S(mt,ae),mt.prototype[St]=!0,mt.prototype.removeEventListener=function(d,y,T,C){wl(this,d,y,T,C)};function Ze(d,y){var T,C=d.F;if(C)for(T=[];C;C=C.F)T.push(C);if(d=d.M,C=y.type||y,typeof y=="string")y=new se(y,d);else if(y instanceof se)y.target=y.target||d;else{var G=y;y=new se(C,d),x(y,G)}if(G=!0,T)for(var X=T.length-1;0<=X;X--){var ce=y.g=T[X];G=An(ce,C,!0,y)&&G}if(ce=y.g=d,G=An(ce,C,!0,y)&&G,G=An(ce,C,!1,y)&&G,T)for(X=0;X<T.length;X++)ce=y.g=T[X],G=An(ce,C,!1,y)&&G}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var T=d.g[y],C=0;C<T.length;C++)$i(T[C]);delete d.g[y],d.h--}}this.F=null},mt.prototype.K=function(d,y,T,C){return this.i.add(String(d),y,!1,T,C)},mt.prototype.L=function(d,y,T,C){return this.i.add(String(d),y,!0,T,C)};function An(d,y,T,C){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var G=!0,X=0;X<y.length;++X){var ce=y[X];if(ce&&!ce.da&&ce.capture==T){var ze=ce.listener,Ot=ce.ha||ce.src;ce.fa&&ni(d.i,ce),G=ze.call(Ot,C)!==!1&&G}}return G&&!C.defaultPrevented}function rn(d,y,T){if(typeof d=="function")T&&(d=E(d,T));else if(d&&typeof d.handleEvent=="function")d=E(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(d,y||0)}function Oc(d){d.g=rn(()=>{d.g=null,d.i&&(d.i=!1,Oc(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class Uf extends ae{constructor(y,T){super(),this.m=y,this.l=T,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Oc(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Us(d){ae.call(this),this.h=d,this.g={}}S(Us,ae);var zs=[];function Bs(d){ue(d.g,function(y,T){this.g.hasOwnProperty(T)&&Ba(y)},d),d.g={}}Us.prototype.N=function(){Us.aa.N.call(this),Bs(this)},Us.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ii=h.JSON.stringify,Fa=h.JSON.parse,js=class{stringify(d){return h.JSON.stringify(d,void 0)}parse(d){return h.JSON.parse(d,void 0)}};function bl(){}bl.prototype.h=null;function Al(d){return d.h||(d.h=d.i())}function Cl(){}var Yi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ki(){se.call(this,"d")}S(Ki,se);function Rl(){se.call(this,"c")}S(Rl,se);var _i={},Il=null;function Vr(){return Il=Il||new mt}_i.La="serverreachability";function Ha(d){se.call(this,_i.La,d)}S(Ha,se);function Ur(d){const y=Vr();Ze(y,new Ha(y))}_i.STAT_EVENT="statevent";function Dc(d,y){se.call(this,_i.STAT_EVENT,d),this.stat=y}S(Dc,se);function ht(d){const y=Vr();Ze(y,new Dc(y,d))}_i.Ma="timingevent";function Nt(d,y){se.call(this,_i.Ma,d),this.size=y}S(Nt,se);function bt(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){d()},y)}function jn(){this.g=!0}jn.prototype.xa=function(){this.g=!1};function xl(d,y,T,C,G,X){d.info(function(){if(d.g)if(X)for(var ce="",ze=X.split("&"),Ot=0;Ot<ze.length;Ot++){var Be=ze[Ot].split("=");if(1<Be.length){var jt=Be[0];Be=Be[1];var Dt=jt.split("_");ce=2<=Dt.length&&Dt[1]=="type"?ce+(jt+"="+Be+"&"):ce+(jt+"=redacted&")}}else ce=null;else ce=X;return"XMLHTTP REQ ("+C+") [attempt "+G+"]: "+y+`
`+T+`
`+ce})}function zf(d,y,T,C,G,X,ce){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+G+"]: "+y+`
`+T+`
`+X+" "+ce})}function zr(d,y,T,C){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Fs(d,T)+(C?" "+C:"")})}function Mc(d,y){d.info(function(){return"TIMEOUT: "+y})}jn.prototype.info=function(){};function Fs(d,y){if(!d.g)return y;if(!y)return null;try{var T=JSON.parse(y);if(T){for(d=0;d<T.length;d++)if(Array.isArray(T[d])){var C=T[d];if(!(2>C.length)){var G=C[1];if(Array.isArray(G)&&!(1>G.length)){var X=G[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ce=1;ce<G.length;ce++)G[ce]=""}}}}return ii(T)}catch{return y}}var Br={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yi;function vi(){}S(vi,bl),vi.prototype.g=function(){return new XMLHttpRequest},vi.prototype.i=function(){return{}},yi=new vi;function pn(d,y,T,C){this.j=d,this.i=y,this.l=T,this.R=C||1,this.U=new Us(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vt}function vt(){this.i=null,this.g="",this.h=!1}var Nl={},qa={};function ri(d,y,T){d.L=1,d.v=Ys(Cn(y)),d.m=T,d.P=!0,Wi(d,null)}function Wi(d,y){d.F=Date.now(),Hs(d),d.A=Cn(d.v);var T=d.A,C=d.R;Array.isArray(C)||(C=[String(C)]),Ll(T.i,"t",C),d.C=0,T=d.j.J,d.h=new vt,d.g=Qc(d.j,T?y:null,!d.m),0<d.O&&(d.M=new Uf(E(d.Y,d,d.g),d.O)),y=d.U,T=d.g,C=d.ca;var G="readystatechange";Array.isArray(G)||(G&&(zs[0]=G.toString()),G=zs);for(var X=0;X<G.length;X++){var ce=xc(T,G[X],C||y.handleEvent,!1,y.h||y);if(!ce)break;y.g[ce.key]=ce}y=d.H?R(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),Ur(),xl(d.i,d.u,d.A,d.l,d.R,d.m)}pn.prototype.ca=function(d){d=d.target;const y=this.M;y&&Gn(d)==3?y.j():this.Y(d)},pn.prototype.Y=function(d){try{if(d==this.g)e:{const Dt=Gn(this.g);var y=this.g.Ba();const rr=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||jc(this.g)))){this.J||Dt!=4||y==7||(y==8||0>=rr?Ur(3):Ur(2)),jr(this);var T=this.g.Z();this.X=T;t:if(Pc(this)){var C=jc(this.g);d="";var G=C.length,X=Gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qt(this),Ei(this);var ce="";break t}this.h.i=new h.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,d+=this.h.i.decode(C[y],{stream:!(X&&y==G-1)});C.length=0,this.h.g+=d,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=T==200,zf(this.i,this.u,this.A,this.l,this.R,Dt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Ot=this.g;if((ze=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(ze)){var Be=ze;break t}}Be=null}if(T=Be)zr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qs(this,T);else{this.o=!1,this.s=3,ht(12),Qt(this),Ei(this);break e}}if(this.P){T=!0;let Wt;for(;!this.J&&this.C<ce.length;)if(Wt=kc(this,ce),Wt==qa){Dt==4&&(this.s=4,ht(14),T=!1),zr(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==Nl){this.s=4,ht(15),zr(this.i,this.l,ce,"[Invalid Chunk]"),T=!1;break}else zr(this.i,this.l,Wt,null),qs(this,Wt);if(Pc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||ce.length!=0||this.h.h||(this.s=1,ht(16),T=!1),this.o=this.o&&T,!T)zr(this.i,this.l,ce,"[Invalid Chunked Response]"),Qt(this),Ei(this);else if(0<ce.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),ta(jt),jt.M=!0,ht(11))}}else zr(this.i,this.l,ce,null),qs(this,ce);Dt==4&&Qt(this),this.o&&!this.J&&(Dt==4?$c(this.j,this):(this.o=!1,Hs(this)))}else qf(this.g),T==400&&0<ce.indexOf("Unknown SID")?(this.s=3,ht(12)):(this.s=0,ht(13)),Qt(this),Ei(this)}}}catch{}finally{}};function Pc(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function kc(d,y){var T=d.C,C=y.indexOf(`
`,T);return C==-1?qa:(T=Number(y.substring(T,C)),isNaN(T)?Nl:(C+=1,C+T>y.length?qa:(y=y.slice(C,C+T),d.C=C+T,y)))}pn.prototype.cancel=function(){this.J=!0,Qt(this)};function Hs(d){d.S=Date.now()+d.I,Lc(d,d.I)}function Lc(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=bt(E(d.ba,d),y)}function jr(d){d.B&&(h.clearTimeout(d.B),d.B=null)}pn.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Mc(this.i,this.A),this.L!=2&&(Ur(),ht(17)),Qt(this),this.s=2,Ei(this)):Lc(this,this.S-d)};function Ei(d){d.j.G==0||d.J||$c(d.j,d)}function Qt(d){jr(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,Bs(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function qs(d,y){try{var T=d.j;if(T.G!=0&&(T.g==d||Ol(T.h,d))){if(!d.K&&Ol(T.h,d)&&T.G==3){try{var C=T.Da.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var G=C;if(G[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<d.F)no(T),eo(T);else break e;jl(T),ht(18)}}else T.za=G[1],0<T.za-T.T&&37500>G[2]&&T.F&&T.v==0&&!T.C&&(T.C=bt(E(T.Za,T),6e3));if(1>=$a(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else ir(T,11)}else if((d.K||T.g==d)&&no(T),!H(y))for(G=T.Da.g.parse(y),y=0;y<G.length;y++){let Be=G[y];if(T.T=Be[0],Be=Be[1],T.G==2)if(Be[0]=="c"){T.K=Be[1],T.ia=Be[2];const jt=Be[3];jt!=null&&(T.la=jt,T.j.info("VER="+T.la));const Dt=Be[4];Dt!=null&&(T.Aa=Dt,T.j.info("SVER="+T.Aa));const rr=Be[5];rr!=null&&typeof rr=="number"&&0<rr&&(C=1.5*rr,T.L=C,T.j.info("backChannelRequestTimeoutMs_="+C)),C=T;const Wt=d.g;if(Wt){const Ri=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ri){var X=C.h;X.g||Ri.indexOf("spdy")==-1&&Ri.indexOf("quic")==-1&&Ri.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Ya(X,X.h),X.h=null))}if(C.D){const Hl=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;Hl&&(C.ya=Hl,tt(C.I,C.D,Hl))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-d.F,T.j.info("Handshake RTT: "+T.R+"ms")),C=T;var ce=d;if(C.qa=Kc(C,C.J?C.ia:null,C.W),ce.K){mn(C.h,ce);var ze=ce,Ot=C.L;Ot&&(ze.I=Ot),ze.B&&(jr(ze),Hs(ze)),C.g=ce}else qc(C);0<T.i.length&&to(T)}else Be[0]!="stop"&&Be[0]!="close"||ir(T,7);else T.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?ir(T,7):zl(T):Be[0]!="noop"&&T.l&&T.l.ta(Be),T.v=0)}}Ur(4)}catch{}}var Vc=class{constructor(d,y){this.g=d,this.map=y}};function Xi(d){this.l=d||10,h.PerformanceNavigationTiming?(d=h.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ga(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function $a(d){return d.h?1:d.g?d.g.size:0}function Ol(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function Ya(d,y){d.g?d.g.add(y):d.h=y}function mn(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}Xi.prototype.cancel=function(){if(this.i=Dl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Dl(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const T of d.g.values())y=y.concat(T.D);return y}return D(d.i)}function Bf(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(f(d)){for(var y=[],T=d.length,C=0;C<T;C++)y.push(d[C]);return y}y=[],T=0;for(C in d)y[T++]=d[C];return y}function Ka(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(f(d)||typeof d=="string"){var y=[];d=d.length;for(var T=0;T<d;T++)y.push(T);return y}y=[],T=0;for(const C in d)y[T++]=C;return y}}}function Ml(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(f(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var T=Ka(d),C=Bf(d),G=C.length,X=0;X<G;X++)y.call(void 0,C[X],T&&T[X],d)}var Gs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jf(d,y){if(d){d=d.split("&");for(var T=0;T<d.length;T++){var C=d[T].indexOf("="),G=null;if(0<=C){var X=d[T].substring(0,C);G=d[T].substring(C+1)}else X=d[T];y(X,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function At(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof At){this.h=d.h,$s(this,d.j),this.o=d.o,this.g=d.g,Fr(this,d.s),this.l=d.l;var y=d.i,T=new Ji;T.i=y.i,y.g&&(T.g=new Map(y.g),T.h=y.h),Zi(this,T),this.m=d.m}else d&&(y=String(d).match(Gs))?(this.h=!1,$s(this,y[1]||"",!0),this.o=Fn(y[2]||""),this.g=Fn(y[3]||"",!0),Fr(this,y[4]),this.l=Fn(y[5]||"",!0),Zi(this,y[6]||"",!0),this.m=Fn(y[7]||"")):(this.h=!1,this.i=new Ji(null,this.h))}At.prototype.toString=function(){var d=[],y=this.j;y&&d.push(Ks(y,Pl,!0),":");var T=this.g;return(T||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Ks(y,Pl,!0),"@"),d.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&d.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(Ks(T,T.charAt(0)=="/"?Ff:kl,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",Ks(T,Qa)),d.join("")};function Cn(d){return new At(d)}function $s(d,y,T){d.j=T?Fn(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Fr(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function Zi(d,y,T){y instanceof Ji?(d.i=y,zc(d.i,d.h)):(T||(y=Ks(y,Hf)),d.i=new Ji(y,d.h))}function tt(d,y,T){d.i.set(y,T)}function Ys(d){return tt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Fn(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ks(d,y,T){return typeof d=="string"?(d=encodeURI(d).replace(y,Uc),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Uc(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Pl=/[#\/\?@]/g,kl=/[#\?:]/g,Ff=/[#\?]/g,Hf=/[#\?@]/g,Qa=/#/g;function Ji(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Hn(d){d.g||(d.g=new Map,d.h=0,d.i&&jf(d.i,function(y,T){d.add(decodeURIComponent(y.replace(/\+/g," ")),T)}))}n=Ji.prototype,n.add=function(d,y){Hn(this),this.i=null,d=Ti(this,d);var T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(y),this.h+=1,this};function er(d,y){Hn(d),y=Ti(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function tr(d,y){return Hn(d),y=Ti(d,y),d.g.has(y)}n.forEach=function(d,y){Hn(this),this.g.forEach(function(T,C){T.forEach(function(G){d.call(y,G,C,this)},this)},this)},n.na=function(){Hn(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),T=[];for(let C=0;C<y.length;C++){const G=d[C];for(let X=0;X<G.length;X++)T.push(y[C])}return T},n.V=function(d){Hn(this);let y=[];if(typeof d=="string")tr(this,d)&&(y=y.concat(this.g.get(Ti(this,d))));else{d=Array.from(this.g.values());for(let T=0;T<d.length;T++)y=y.concat(d[T])}return y},n.set=function(d,y){return Hn(this),this.i=null,d=Ti(this,d),tr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},n.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function Ll(d,y,T){er(d,y),0<T.length&&(d.i=null,d.g.set(Ti(d,y),D(T)),d.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var T=0;T<y.length;T++){var C=y[T];const X=encodeURIComponent(String(C)),ce=this.V(C);for(C=0;C<ce.length;C++){var G=X;ce[C]!==""&&(G+="="+encodeURIComponent(String(ce[C]))),d.push(G)}}return this.i=d.join("&")};function Ti(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function zc(d,y){y&&!d.j&&(Hn(d),d.i=null,d.g.forEach(function(T,C){var G=C.toLowerCase();C!=G&&(er(this,C),Ll(this,G,T))},d)),d.j=y}function Qs(d,y){const T=new jn;if(h.Image){const C=new Image;C.onload=A(qn,T,"TestLoadImage: loaded",!0,y,C),C.onerror=A(qn,T,"TestLoadImage: error",!1,y,C),C.onabort=A(qn,T,"TestLoadImage: abort",!1,y,C),C.ontimeout=A(qn,T,"TestLoadImage: timeout",!1,y,C),h.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else y(!1)}function si(d,y){const T=new jn,C=new AbortController,G=setTimeout(()=>{C.abort(),qn(T,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:C.signal}).then(X=>{clearTimeout(G),X.ok?qn(T,"TestPingServer: ok",!0,y):qn(T,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),qn(T,"TestPingServer: error",!1,y)})}function qn(d,y,T,C,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),C(T)}catch{}}function Ws(){this.g=new js}function wi(d,y,T){const C=T||"";try{Ml(d,function(G,X){let ce=G;m(G)&&(ce=ii(G)),y.push(C+X+"="+encodeURIComponent(ce))})}catch(G){throw y.push(C+"type="+encodeURIComponent("_badmap")),G}}function Hr(d){this.l=d.Ub||null,this.j=d.eb||!1}S(Hr,bl),Hr.prototype.g=function(){return new nr(this.l,this.j)},Hr.prototype.i=function(d){return function(){return d}}({});function nr(d,y){mt.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(nr,mt),n=nr.prototype,n.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,bi(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Si(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vl(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vl(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Si(this):bi(this),this.readyState==3&&Vl(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Si(this))},n.Qa=function(d){this.g&&(this.response=d,Si(this))},n.ga=function(){this.g&&Si(this)};function Si(d){d.readyState=4,d.l=null,d.j=null,d.v=null,bi(d)}n.setRequestHeader=function(d,y){this.u.append(d,y)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var T=y.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=y.next();return d.join(`\r
`)};function bi(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(nr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Ul(d){let y="";return ue(d,function(T,C){y+=C,y+=":",y+=T,y+=`\r
`}),y}function Bt(d,y,T){e:{for(C in T){var C=!1;break e}C=!0}C||(T=Ul(T),typeof d=="string"?T!=null&&encodeURIComponent(String(T)):tt(d,y,T))}function Ke(d){mt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ke,mt);var Wa=/^https?$/i,Xs=["POST","PUT"];n=Ke.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,y,T,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yi.g(),this.v=this.o?Al(this.o):Al(yi),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(X){Bc(this,X);return}if(d=T||"",T=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var G in C)T.set(G,C[G]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const X of C.keys())T.set(X,C.get(X));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(T.keys()).find(X=>X.toLowerCase()=="content-type"),G=h.FormData&&d instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Xs,y,void 0))||C||G||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ce]of T)this.g.setRequestHeader(X,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zs(this),this.u=!0,this.g.send(d),this.u=!1}catch(X){Bc(this,X)}};function Bc(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,Xa(d),Ai(d)}function Xa(d){d.A||(d.A=!0,Ze(d,"complete"),Ze(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ze(this,"complete"),Ze(this,"abort"),Ai(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ai(this,!0)),Ke.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Za(this):this.bb())},n.bb=function(){Za(this)};function Za(d){if(d.h&&typeof u<"u"&&(!d.v[1]||Gn(d)!=4||d.Z()!=2)){if(d.u&&Gn(d)==4)rn(d.Ea,0,d);else if(Ze(d,"readystatechange"),Gn(d)==4){d.h=!1;try{const ce=d.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var T;if(!(T=y)){var C;if(C=ce===0){var G=String(d.D).match(Gs)[1]||null;!G&&h.self&&h.self.location&&(G=h.self.location.protocol.slice(0,-1)),C=!Wa.test(G?G.toLowerCase():"")}T=C}if(T)Ze(d,"complete"),Ze(d,"success");else{d.m=6;try{var X=2<Gn(d)?d.g.statusText:""}catch{X=""}d.l=X+" ["+d.Z()+"]",Xa(d)}}finally{Ai(d)}}}}function Ai(d,y){if(d.g){Zs(d);const T=d.g,C=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||Ze(d,"ready");try{T.onreadystatechange=C}catch{}}}function Zs(d){d.I&&(h.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Gn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Gn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),Fa(y)}};function jc(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function qf(d){const y={};d=(d.g&&2<=Gn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(H(d[C]))continue;var T=k(d[C]);const G=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const X=y[G]||[];y[G]=X,X.push(T)}P(y,function(C){return C.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Js(d,y,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||y}function Ja(d){this.Aa=0,this.i=[],this.j=new jn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Js("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Js("baseRetryDelayMs",5e3,d),this.cb=Js("retryDelaySeedMs",1e4,d),this.Wa=Js("forwardChannelMaxRetries",2,d),this.wa=Js("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Xi(d&&d.concurrentRequestLimit),this.Da=new Ws,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ja.prototype,n.la=8,n.G=1,n.connect=function(d,y,T,C){ht(0),this.W=d,this.H=y||{},T&&C!==void 0&&(this.H.OSID=T,this.H.OAID=C),this.F=this.X,this.I=Kc(this,null,this.W),to(this)};function zl(d){if(Fc(d),d.G==3){var y=d.U++,T=Cn(d.I);if(tt(T,"SID",d.K),tt(T,"RID",y),tt(T,"TYPE","terminate"),ea(d,T),y=new pn(d,d.j,y),y.L=2,y.v=Ys(Cn(T)),T=!1,h.navigator&&h.navigator.sendBeacon)try{T=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!T&&h.Image&&(new Image().src=y.v,T=!0),T||(y.g=Qc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Hs(y)}Yc(d)}function eo(d){d.g&&(ta(d),d.g.cancel(),d.g=null)}function Fc(d){eo(d),d.u&&(h.clearTimeout(d.u),d.u=null),no(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&h.clearTimeout(d.s),d.s=null)}function to(d){if(!Ga(d.h)&&!d.s){d.s=!0;var y=d.Ga;oe||O(),de||(oe(),de=!0),ge.add(y,d),d.B=0}}function Gf(d,y){return $a(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=bt(E(d.Ga,d,y),Fl(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const G=new pn(this,this.j,d);let X=this.o;if(this.S&&(X?(X=R(X),x(X,this.S)):X=this.S),this.m!==null||this.O||(G.H=X,X=null),this.P)e:{for(var y=0,T=0;T<this.i.length;T++){t:{var C=this.i[T];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,4096<y){y=T;break e}if(y===4096||T===this.i.length-1){y=T+1;break e}}y=1e3}else y=1e3;y=Hc(this,G,y),T=Cn(this.I),tt(T,"RID",d),tt(T,"CVER",22),this.D&&tt(T,"X-HTTP-Session-Id",this.D),ea(this,T),X&&(this.O?y="headers="+encodeURIComponent(String(Ul(X)))+"&"+y:this.m&&Bt(T,this.m,X)),Ya(this.h,G),this.Ua&&tt(T,"TYPE","init"),this.P?(tt(T,"$req",y),tt(T,"SID","null"),G.T=!0,ri(G,T,null)):ri(G,T,y),this.G=2}}else this.G==3&&(d?Bl(this,d):this.i.length==0||Ga(this.h)||Bl(this))};function Bl(d,y){var T;y?T=y.l:T=d.U++;const C=Cn(d.I);tt(C,"SID",d.K),tt(C,"RID",T),tt(C,"AID",d.T),ea(d,C),d.m&&d.o&&Bt(C,d.m,d.o),T=new pn(d,d.j,T,d.B+1),d.m===null&&(T.H=d.o),y&&(d.i=y.D.concat(d.i)),y=Hc(d,T,1e3),T.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Ya(d.h,T),ri(T,C,y)}function ea(d,y){d.H&&ue(d.H,function(T,C){tt(y,C,T)}),d.l&&Ml({},function(T,C){tt(y,C,T)})}function Hc(d,y,T){T=Math.min(d.i.length,T);var C=d.l?E(d.l.Na,d.l,d):null;e:{var G=d.i;let X=-1;for(;;){const ce=["count="+T];X==-1?0<T?(X=G[0].g,ce.push("ofs="+X)):X=0:ce.push("ofs="+X);let ze=!0;for(let Ot=0;Ot<T;Ot++){let Be=G[Ot].g;const jt=G[Ot].map;if(Be-=X,0>Be)X=Math.max(0,G[Ot].g-100),ze=!1;else try{wi(jt,ce,"req"+Be+"_")}catch{C&&C(jt)}}if(ze){C=ce.join("&");break e}}}return d=d.i.splice(0,T),y.D=d,C}function qc(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;oe||O(),de||(oe(),de=!0),ge.add(y,d),d.v=0}}function jl(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=bt(E(d.Fa,d),Fl(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Gc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=bt(E(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ht(10),eo(this),Gc(this))};function ta(d){d.A!=null&&(h.clearTimeout(d.A),d.A=null)}function Gc(d){d.g=new pn(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=Cn(d.qa);tt(y,"RID","rpc"),tt(y,"SID",d.K),tt(y,"AID",d.T),tt(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&tt(y,"TO",d.ja),tt(y,"TYPE","xmlhttp"),ea(d,y),d.m&&d.o&&Bt(y,d.m,d.o),d.L&&(d.g.I=d.L);var T=d.g;d=d.ia,T.L=1,T.v=Ys(Cn(y)),T.m=null,T.P=!0,Wi(T,d)}n.Za=function(){this.C!=null&&(this.C=null,eo(this),jl(this),ht(19))};function no(d){d.C!=null&&(h.clearTimeout(d.C),d.C=null)}function $c(d,y){var T=null;if(d.g==y){no(d),ta(d),d.g=null;var C=2}else if(Ol(d.h,y))T=y.D,mn(d.h,y),C=1;else return;if(d.G!=0){if(y.o)if(C==1){T=y.m?y.m.length:0,y=Date.now()-y.F;var G=d.B;C=Vr(),Ze(C,new Nt(C,T)),to(d)}else qc(d);else if(G=y.s,G==3||G==0&&0<y.X||!(C==1&&Gf(d,y)||C==2&&jl(d)))switch(T&&0<T.length&&(y=d.h,y.i=y.i.concat(T)),G){case 1:ir(d,5);break;case 4:ir(d,10);break;case 3:ir(d,6);break;default:ir(d,2)}}}function Fl(d,y){let T=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(T*=2),T*y}function ir(d,y){if(d.j.info("Error code "+y),y==2){var T=E(d.fb,d),C=d.Xa;const G=!C;C=new At(C||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||$s(C,"https"),Ys(C),G?Qs(C.toString(),T):si(C.toString(),T)}else ht(2);d.G=0,d.l&&d.l.sa(y),Yc(d),Fc(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),ht(2)):(this.j.info("Failed to ping google.com"),ht(1))};function Yc(d){if(d.G=0,d.ka=[],d.l){const y=Dl(d.h);(y.length!=0||d.i.length!=0)&&(L(d.ka,y),L(d.ka,d.i),d.h.i.length=0,D(d.i),d.i.length=0),d.l.ra()}}function Kc(d,y,T){var C=T instanceof At?Cn(T):new At(T);if(C.g!="")y&&(C.g=y+"."+C.g),Fr(C,C.s);else{var G=h.location;C=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var X=new At(null);C&&$s(X,C),y&&(X.g=y),G&&Fr(X,G),T&&(X.l=T),C=X}return T=d.D,y=d.ya,T&&y&&tt(C,T,y),tt(C,"VER",d.la),ea(d,C),C}function Qc(d,y,T){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new Ke(new Hr({eb:T})):new Ke(d.pa),y.Ha(d.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wc(){}n=Wc.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function io(){}io.prototype.g=function(d,y){return new gn(d,y)};function gn(d,y){mt.call(this),this.g=new Ja(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!H(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!H(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Ci(this)}S(gn,mt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){zl(this.g)},gn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.u&&(T={},T.__data__=ii(d),d=T);y.i.push(new Vc(y.Ya++,d)),y.G==3&&to(y)},gn.prototype.N=function(){this.g.l=null,delete this.j,zl(this.g),delete this.g,gn.aa.N.call(this)};function Xc(d){Ki.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const T in y){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}S(Xc,Ki);function Zc(){Rl.call(this),this.status=1}S(Zc,Rl);function Ci(d){this.g=d}S(Ci,Wc),Ci.prototype.ua=function(){Ze(this.g,"a")},Ci.prototype.ta=function(d){Ze(this.g,new Xc(d))},Ci.prototype.sa=function(d){Ze(this.g,new Zc)},Ci.prototype.ra=function(){Ze(this.g,"b")},io.prototype.createWebChannel=io.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Yb=function(){return new io},$b=function(){return Vr()},Gb=_i,Ig={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Br.NO_ERROR=0,Br.TIMEOUT=8,Br.HTTP_ERROR=6,gd=Br,Qi.COMPLETE="complete",qb=Qi,Cl.EventType=Yi,Yi.OPEN="a",Yi.CLOSE="b",Yi.ERROR="c",Yi.MESSAGE="d",mt.prototype.listen=mt.prototype.K,zu=Cl,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,Hb=Ke}).apply(typeof td<"u"?td:typeof self<"u"?self:typeof window<"u"?window:{});const BT="@firebase/firestore",jT="4.7.16";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl="11.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new cf("@firebase/firestore");function Po(){return Aa.logLevel}function pe(n,...e){if(Aa.logLevel<=ke.DEBUG){const t=e.map(D_);Aa.debug(`Firestore (${pl}): ${n}`,...t)}}function Nr(n,...e){if(Aa.logLevel<=ke.ERROR){const t=e.map(D_);Aa.error(`Firestore (${pl}): ${n}`,...t)}}function Wo(n,...e){if(Aa.logLevel<=ke.WARN){const t=e.map(D_);Aa.warn(`Firestore (${pl}): ${n}`,...t)}}function D_(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Kb(n,i,t)}function Kb(n,e,t){let i=`FIRESTORE (${pl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Nr(i),new Error(i)}function We(n,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,n||Kb(e,a,i)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Pr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ln.UNAUTHENTICATED))}shutdown(){}}class iM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class rM{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let i=this.i;const a=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let o=new Ts;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ts,e.enqueueRetryable(()=>a(this.currentUser))};const u=()=>{const f=o;e.enqueueRetryable(async()=>{await f.promise,await a(this.currentUser)})},h=f=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ts)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string",31837,{l:i}),new Qb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new ln(e)}}class sM{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aM{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new sM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const i=o=>{o.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const u=o.token!==this.m;return this.m=o.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const a=o=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>a(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new FT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new FT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=lM(40);for(let o=0;o<a.length;++o)i.length<20&&a[o]<t&&(i+=e.charAt(a[o]%62))}return i}}function Oe(n,e){return n<e?-1:n>e?1:0}function xg(n,e){let t=0;for(;t<n.length&&t<e.length;){const i=n.codePointAt(t),a=e.codePointAt(t);if(i!==a){if(i<128&&a<128)return Oe(i,a);{const o=Wb(),u=uM(o.encode(HT(n,t)),o.encode(HT(e,t)));return u!==0?u:Oe(i,a)}}t+=i>65535?2:1}return Oe(n.length,e.length)}function HT(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function uM(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Oe(n[t],e[t]);return Oe(n.length,e.length)}function Xo(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=-62135596800,GT=1e6;class Vt{static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*GT);return new Vt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<qT)throw new ye(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/GT}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-qT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Vt(0,0))}static max(){return new Ce(new Vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="__name__";class Pi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ae(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Pi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pi?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const o=Pi.compareSegments(e.get(a),t.get(a));if(o!==0)return o}return Oe(e.length,t.length)}static compareSegments(e,t){const i=Pi.isNumericId(e),a=Pi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?Pi.extractNumericId(e).compare(Pi.extractNumericId(t)):xg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Es.fromString(e.substring(4,e.length-2))}}class yt extends Pi{construct(e,t,i){return new yt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(le.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new yt(t)}static emptyPath(){return new yt([])}}const cM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tn extends Pi{construct(e,t,i){return new tn(e,t,i)}static isValidIdentifier(e){return cM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===$T}static keyField(){return new tn([$T])}static fromServerFormat(e){const t=[];let i="",a=0;const o=()=>{if(i.length===0)throw new ye(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new ye(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[a+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ye(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,a+=2}else h==="`"?(u=!u,a++):h!=="."||u?(i+=h,a++):(o(),a++)}if(o(),u)throw new ye(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tn(t)}static emptyPath(){return new tn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(yt.fromString(e))}static fromName(e){return new Ee(yt.fromString(e).popFirst(5))}static empty(){return new Ee(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new yt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=-1;function hM(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Ce.fromTimestamp(i===1e9?new Vt(t+1,0):new Vt(t,i));return new Cs(a,Ee.empty(),e)}function dM(n){return new Cs(n.readTime,n.key,rc)}class Cs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Cs(Ce.min(),Ee.empty(),rc)}static max(){return new Cs(Ce.max(),Ee.empty(),rc)}}function fM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ml(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==pM)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((i,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,a)},this.catchCallback=o=>{this.wrapFailure(t,o).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,i)=>{t(e)})}static reject(e){return new re((t,i)=>{i(e)})}static waitFor(e){return new re((t,i)=>{let a=0,o=0,u=!1;e.forEach(h=>{++a,h.next(()=>{++o,u&&o===a&&t()},f=>i(f))}),u=!0,o===a&&t()})}static or(e){let t=re.resolve(!1);for(const i of e)t=t.next(a=>a?re.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,o)=>{i.push(t.call(this,a,o))}),this.waitFor(i)}static mapArray(e,t){return new re((i,a)=>{const o=e.length,u=new Array(o);let h=0;for(let f=0;f<o;f++){const m=f;t(e[m]).next(_=>{u[m]=_,++h,h===o&&i(u)},_=>a(_))}})}static doWhile(e,t){return new re((i,a)=>{const o=()=>{e()===!0?t().next(()=>{o()},a):i()};o()})}}function gM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function gl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>t.writeSequenceNumber(i))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}mf.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=-1;function gf(n){return n==null}function Pd(n){return n===0&&1/n==-1/0}function _M(n){return typeof n=="number"&&Number.isInteger(n)&&!Pd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="";function yM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=YT(e)),e=vM(n.get(t),e);return YT(e)}function vM(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const o=n.charAt(a);switch(o){case"\0":t+="";break;case Zb:t+="";break;default:t+=o}}return t}function YT(n){return n+Zb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ps(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Jb(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xt=class Ng{constructor(e,t){this.comparator=e,this.root=t||ws.EMPTY}insert(e,t){return new Ng(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ws.BLACK,null,null))}remove(e){return new Ng(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ws.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nd(this.root,e,this.comparator,!1)}getReverseIterator(){return new nd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nd(this.root,e,this.comparator,!0)}},nd=class{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?i(e.key,t):1,t&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ws=class vr{constructor(e,t,i,a,o){this.key=e,this.value=t,this.color=i??vr.RED,this.left=a??vr.EMPTY,this.right=o??vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,o){return new vr(e??this.key,t??this.value,i??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const o=i(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,t,i),null):o===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return vr.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}};ws.EMPTY=null,ws.RED=!0,ws.BLACK=!1;ws.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,i,a,o){return this}insert(e,t,i){return new ws(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new QT(this.data.getIterator())}getIteratorFrom(e){return new QT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=i.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class QT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(tn.comparator)}static empty(){return new Ln([])}unionWith(e){let t=new Ut(tn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ln(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new eA("Invalid base64 string: "+o):o}}(e);return new nn(t)}static fromUint8Array(e){const t=function(a){let o="";for(let u=0;u<a.length;++u)o+=String.fromCharCode(a[u]);return o}(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const EM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rs(n){if(We(!!n,39018),typeof n=="string"){let e=0;const t=EM.exec(n);if(We(!!t,46558,{timestamp:n}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:wt(n.seconds),nanos:wt(n.nanos)}}function wt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Is(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="server_timestamp",nA="__type__",iA="__previous_value__",rA="__local_write_time__";function P_(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[nA])===null||t===void 0?void 0:t.stringValue)===tA}function _f(n){const e=n.mapValue.fields[iA];return P_(e)?_f(e):e}function sc(n){const e=Rs(n.mapValue.fields[rA].timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TM{constructor(e,t,i,a,o,u,h,f,m,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=o,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=_}}const kd="(default)";class ac{constructor(e,t){this.projectId=e,this.database=t||kd}static empty(){return new ac("","")}get isDefaultDatabase(){return this.database===kd}isEqual(e){return e instanceof ac&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="__type__",wM="__max__",id={mapValue:{}},aA="__vector__",Ld="value";function xs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?P_(n)?4:bM(n)?9007199254740991:SM(n)?10:11:Ae(28295,{value:n})}function Hi(n,e){if(n===e)return!0;const t=xs(n);if(t!==xs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sc(n).isEqual(sc(e));case 3:return function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const u=Rs(a.timestampValue),h=Rs(o.timestampValue);return u.seconds===h.seconds&&u.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(a,o){return Is(a.bytesValue).isEqual(Is(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(a,o){return wt(a.geoPointValue.latitude)===wt(o.geoPointValue.latitude)&&wt(a.geoPointValue.longitude)===wt(o.geoPointValue.longitude)}(n,e);case 2:return function(a,o){if("integerValue"in a&&"integerValue"in o)return wt(a.integerValue)===wt(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const u=wt(a.doubleValue),h=wt(o.doubleValue);return u===h?Pd(u)===Pd(h):isNaN(u)&&isNaN(h)}return!1}(n,e);case 9:return Xo(n.arrayValue.values||[],e.arrayValue.values||[],Hi);case 10:case 11:return function(a,o){const u=a.mapValue.fields||{},h=o.mapValue.fields||{};if(KT(u)!==KT(h))return!1;for(const f in u)if(u.hasOwnProperty(f)&&(h[f]===void 0||!Hi(u[f],h[f])))return!1;return!0}(n,e);default:return Ae(52216,{left:n})}}function oc(n,e){return(n.values||[]).find(t=>Hi(t,e))!==void 0}function Zo(n,e){if(n===e)return 0;const t=xs(n),i=xs(e);if(t!==i)return Oe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return function(o,u){const h=wt(o.integerValue||o.doubleValue),f=wt(u.integerValue||u.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(n,e);case 3:return WT(n.timestampValue,e.timestampValue);case 4:return WT(sc(n),sc(e));case 5:return xg(n.stringValue,e.stringValue);case 6:return function(o,u){const h=Is(o),f=Is(u);return h.compareTo(f)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const h=o.split("/"),f=u.split("/");for(let m=0;m<h.length&&m<f.length;m++){const _=Oe(h[m],f[m]);if(_!==0)return _}return Oe(h.length,f.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const h=Oe(wt(o.latitude),wt(u.latitude));return h!==0?h:Oe(wt(o.longitude),wt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return XT(n.arrayValue,e.arrayValue);case 10:return function(o,u){var h,f,m,_;const v=o.fields||{},E=u.fields||{},A=(h=v[Ld])===null||h===void 0?void 0:h.arrayValue,S=(f=E[Ld])===null||f===void 0?void 0:f.arrayValue,D=Oe(((m=A==null?void 0:A.values)===null||m===void 0?void 0:m.length)||0,((_=S==null?void 0:S.values)===null||_===void 0?void 0:_.length)||0);return D!==0?D:XT(A,S)}(n.mapValue,e.mapValue);case 11:return function(o,u){if(o===id.mapValue&&u===id.mapValue)return 0;if(o===id.mapValue)return 1;if(u===id.mapValue)return-1;const h=o.fields||{},f=Object.keys(h),m=u.fields||{},_=Object.keys(m);f.sort(),_.sort();for(let v=0;v<f.length&&v<_.length;++v){const E=xg(f[v],_[v]);if(E!==0)return E;const A=Zo(h[f[v]],m[_[v]]);if(A!==0)return A}return Oe(f.length,_.length)}(n.mapValue,e.mapValue);default:throw Ae(23264,{Pe:t})}}function WT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=Rs(n),i=Rs(e),a=Oe(t.seconds,i.seconds);return a!==0?a:Oe(t.nanos,i.nanos)}function XT(n,e){const t=n.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const o=Zo(t[a],i[a]);if(o)return o}return Oe(t.length,i.length)}function Jo(n){return Og(n)}function Og(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Rs(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Is(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",a=!0;for(const o of t.values||[])a?a=!1:i+=",",i+=Og(o);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let a="{",o=!0;for(const u of i)o?o=!1:a+=",",a+=`${u}:${Og(t.fields[u])}`;return a+"}"}(n.mapValue):Ae(61005,{value:n})}function _d(n){switch(xs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_f(n);return e?16+_d(e):16;case 5:return 2*n.stringValue.length;case 6:return Is(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((a,o)=>a+_d(o),0)}(n.arrayValue);case 10:case 11:return function(i){let a=0;return Ps(i.fields,(o,u)=>{a+=o.length+_d(u)}),a}(n.mapValue);default:throw Ae(13486,{value:n})}}function Dg(n){return!!n&&"integerValue"in n}function k_(n){return!!n&&"arrayValue"in n}function ZT(n){return!!n&&"nullValue"in n}function JT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function yd(n){return!!n&&"mapValue"in n}function SM(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[sA])===null||t===void 0?void 0:t.stringValue)===aA}function qu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ps(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=qu(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===wM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!yd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qu(t)}setAll(e){let t=tn.emptyPath(),i={},a=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const f=this.getFieldsMap(t);this.applyChanges(f,i,a),i={},a=[],t=h.popLast()}u?i[h.lastSegment()]=qu(u):a.push(h.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,i,a)}delete(e){const t=this.field(e.popLast());yd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];yd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ps(t,(a,o)=>e[a]=o);for(const a of i)delete e[a]}clone(){return new Sn(qu(this.value))}}function oA(n){const e=[];return Ps(n.fields,(t,i)=>{const a=new tn([t]);if(yd(i)){const o=oA(i.mapValue).fields;if(o.length===0)e.push(a);else for(const u of o)e.push(a.child(u))}else e.push(a)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t,i,a,o,u,h){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=o,this.data=u,this.documentState=h}static newInvalidDocument(e){return new un(e,0,Ce.min(),Ce.min(),Ce.min(),Sn.empty(),0)}static newFoundDocument(e,t,i,a){return new un(e,1,t,Ce.min(),i,a,0)}static newNoDocument(e,t){return new un(e,2,t,Ce.min(),Ce.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,Ce.min(),Ce.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,t){this.position=e,this.inclusive=t}}function ew(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const o=e[a],u=n.position[a];if(o.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),t.key):i=Zo(u,t.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function tw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Hi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,t="asc"){this.field=e,this.dir=t}}function AM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{}class Lt extends lA{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new RM(e,t,i):t==="array-contains"?new NM(e,i):t==="in"?new OM(e,i):t==="not-in"?new DM(e,i):t==="array-contains-any"?new MM(e,i):new Lt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new IM(e,i):new xM(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Zo(t,this.value)):t!==null&&xs(this.value)===xs(t)&&this.matchesComparison(Zo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qi extends lA{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new qi(e,t)}matches(e){return uA(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function uA(n){return n.op==="and"}function cA(n){return CM(n)&&uA(n)}function CM(n){for(const e of n.filters)if(e instanceof qi)return!1;return!0}function Mg(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+Jo(n.value);if(cA(n))return n.filters.map(e=>Mg(e)).join(",");{const e=n.filters.map(t=>Mg(t)).join(",");return`${n.op}(${e})`}}function hA(n,e){return n instanceof Lt?function(i,a){return a instanceof Lt&&i.op===a.op&&i.field.isEqual(a.field)&&Hi(i.value,a.value)}(n,e):n instanceof qi?function(i,a){return a instanceof qi&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce((o,u,h)=>o&&hA(u,a.filters[h]),!0):!1}(n,e):void Ae(19439)}function dA(n){return n instanceof Lt?function(t){return`${t.field.canonicalString()} ${t.op} ${Jo(t.value)}`}(n):n instanceof qi?function(t){return t.op.toString()+" {"+t.getFilters().map(dA).join(" ,")+"}"}(n):"Filter"}class RM extends Lt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class IM extends Lt{constructor(e,t){super(e,"in",t),this.keys=fA("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xM extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=fA("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function fA(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Ee.fromName(i.referenceValue))}class NM extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return k_(t)&&oc(t.arrayValue,this.value)}}class OM extends Lt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&oc(this.value.arrayValue,t)}}class DM extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(oc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!oc(this.value.arrayValue,t)}}class MM extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!k_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>oc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,t=null,i=[],a=[],o=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=o,this.startAt=u,this.endAt=h,this.Ie=null}}function nw(n,e=null,t=[],i=[],a=null,o=null,u=null){return new PM(n,e,t,i,a,o,u)}function L_(n){const e=Re(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Mg(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),gf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Jo(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Jo(i)).join(",")),e.Ie=t}return e.Ie}function V_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!AM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!hA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tw(n.startAt,e.startAt)&&tw(n.endAt,e.endAt)}function Pg(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t=null,i=[],a=[],o=null,u="F",h=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=o,this.limitType=u,this.startAt=h,this.endAt=f,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function kM(n,e,t,i,a,o,u,h){return new yf(n,e,t,i,a,o,u,h)}function U_(n){return new yf(n)}function iw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function LM(n){return n.collectionGroup!==null}function Gu(n){const e=Re(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let h=new Ut(tn.comparator);return u.filters.forEach(f=>{f.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new Ud(o,i))}),t.has(tn.keyField().canonicalString())||e.Ee.push(new Ud(tn.keyField(),i))}return e.Ee}function Bi(n){const e=Re(n);return e.de||(e.de=VM(e,Gu(n))),e.de}function VM(n,e){if(n.limitType==="F")return nw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(a=>{const o=a.dir==="desc"?"asc":"desc";return new Ud(a.field,o)});const t=n.endAt?new Vd(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Vd(n.startAt.position,n.startAt.inclusive):null;return nw(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function kg(n,e,t){return new yf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vf(n,e){return V_(Bi(n),Bi(e))&&n.limitType===e.limitType}function pA(n){return`${L_(Bi(n))}|lt:${n.limitType}`}function ko(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(a=>dA(a)).join(", ")}]`),gf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(a=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(a)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(a=>Jo(a)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(a=>Jo(a)).join(",")),`Target(${i})`}(Bi(n))}; limitType=${n.limitType})`}function Ef(n,e){return e.isFoundDocument()&&function(i,a){const o=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Ee.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(n,e)&&function(i,a){for(const o of Gu(i))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0}(n,e)&&function(i,a){for(const o of i.filters)if(!o.matches(a))return!1;return!0}(n,e)&&function(i,a){return!(i.startAt&&!function(u,h,f){const m=ew(u,h,f);return u.inclusive?m<=0:m<0}(i.startAt,Gu(i),a)||i.endAt&&!function(u,h,f){const m=ew(u,h,f);return u.inclusive?m>=0:m>0}(i.endAt,Gu(i),a))}(n,e)}function UM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mA(n){return(e,t)=>{let i=!1;for(const a of Gu(n)){const o=zM(a,e,t);if(o!==0)return o;i=i||a.field.isKeyField()}return 0}}function zM(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):function(o,u,h){const f=u.data.field(o),m=h.data.field(o);return f!==null&&m!==null?Zo(f,m):Ae(42886)}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,o]of i)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ps(this.inner,(t,i)=>{for(const[a,o]of i)e(a,o)})}isEmpty(){return Jb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=new xt(Ee.comparator);function Or(){return BM}const gA=new xt(Ee.comparator);function Bu(...n){let e=gA;for(const t of n)e=e.insert(t.key,t);return e}function _A(n){let e=gA;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ea(){return $u()}function yA(){return $u()}function $u(){return new ka(n=>n.toString(),(n,e)=>n.isEqual(e))}const jM=new xt(Ee.comparator),FM=new Ut(Ee.comparator);function Ve(...n){let e=FM;for(const t of n)e=e.add(t);return e}const HM=new Ut(Oe);function qM(){return HM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pd(e)?"-0":e}}function vA(n){return{integerValue:""+n}}function GM(n,e){return _M(e)?vA(e):z_(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(){this._=void 0}}function $M(n,e,t){return n instanceof zd?function(a,o){const u={fields:{[nA]:{stringValue:tA},[rA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&P_(o)&&(o=_f(o)),o&&(u.fields[iA]=o),{mapValue:u}}(t,e):n instanceof lc?TA(n,e):n instanceof uc?wA(n,e):function(a,o){const u=EA(a,o),h=rw(u)+rw(a.Re);return Dg(u)&&Dg(a.Re)?vA(h):z_(a.serializer,h)}(n,e)}function YM(n,e,t){return n instanceof lc?TA(n,e):n instanceof uc?wA(n,e):t}function EA(n,e){return n instanceof Bd?function(i){return Dg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class zd extends Tf{}class lc extends Tf{constructor(e){super(),this.elements=e}}function TA(n,e){const t=SA(e);for(const i of n.elements)t.some(a=>Hi(a,i))||t.push(i);return{arrayValue:{values:t}}}class uc extends Tf{constructor(e){super(),this.elements=e}}function wA(n,e){let t=SA(e);for(const i of n.elements)t=t.filter(a=>!Hi(a,i));return{arrayValue:{values:t}}}class Bd extends Tf{constructor(e,t){super(),this.serializer=e,this.Re=t}}function rw(n){return wt(n.integerValue||n.doubleValue)}function SA(n){return k_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function KM(n,e){return n.field.isEqual(e.field)&&function(i,a){return i instanceof lc&&a instanceof lc||i instanceof uc&&a instanceof uc?Xo(i.elements,a.elements,Hi):i instanceof Bd&&a instanceof Bd?Hi(i.Re,a.Re):i instanceof zd&&a instanceof zd}(n.transform,e.transform)}class QM{constructor(e,t){this.version=e,this.transformResults=t}}class ji{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ji}static exists(e){return new ji(void 0,e)}static updateTime(e){return new ji(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class wf{}function bA(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new CA(n.key,ji.none()):new Ec(n.key,n.data,ji.none());{const t=n.data,i=Sn.empty();let a=new Ut(tn.comparator);for(let o of e.fields)if(!a.has(o)){let u=t.field(o);u===null&&o.length>1&&(o=o.popLast(),u=t.field(o)),u===null?i.delete(o):i.set(o,u),a=a.add(o)}return new ks(n.key,i,new Ln(a.toArray()),ji.none())}}function WM(n,e,t){n instanceof Ec?function(a,o,u){const h=a.value.clone(),f=aw(a.fieldTransforms,o,u.transformResults);h.setAll(f),o.convertToFoundDocument(u.version,h).setHasCommittedMutations()}(n,e,t):n instanceof ks?function(a,o,u){if(!vd(a.precondition,o))return void o.convertToUnknownDocument(u.version);const h=aw(a.fieldTransforms,o,u.transformResults),f=o.data;f.setAll(AA(a)),f.setAll(h),o.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):function(a,o,u){o.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Yu(n,e,t,i){return n instanceof Ec?function(o,u,h,f){if(!vd(o.precondition,u))return h;const m=o.value.clone(),_=ow(o.fieldTransforms,f,u);return m.setAll(_),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,i):n instanceof ks?function(o,u,h,f){if(!vd(o.precondition,u))return h;const m=ow(o.fieldTransforms,f,u),_=u.data;return _.setAll(AA(o)),_.setAll(m),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,i):function(o,u,h){return vd(o.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):h}(n,e,t)}function XM(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),o=EA(i.transform,a||null);o!=null&&(t===null&&(t=Sn.empty()),t.set(i.field,o))}return t||null}function sw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&Xo(i,a,(o,u)=>KM(o,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ec extends wf{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ks extends wf{constructor(e,t,i,a,o=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function AA(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function aw(n,e,t){const i=new Map;We(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let a=0;a<t.length;a++){const o=n[a],u=o.transform,h=e.data.field(o.field);i.set(o.field,YM(u,h,t[a]))}return i}function ow(n,e,t){const i=new Map;for(const a of n){const o=a.transform,u=t.data.field(a.field);i.set(a.field,$M(o,u,e))}return i}class CA extends wf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZM extends wf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&WM(o,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Yu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Yu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=yA();return this.mutations.forEach(a=>{const o=e.get(a.key),u=o.overlayedDocument;let h=this.applyToLocalView(u,o.mutatedFields);h=t.has(a.key)?null:h;const f=bA(u,h);f!==null&&i.set(a.key,f),u.isValidDocument()||u.convertToNoDocument(Ce.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ve())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(t,i)=>sw(t,i))&&Xo(this.baseMutations,e.baseMutations,(t,i)=>sw(t,i))}}class B_{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){We(e.mutations.length===i.length,58842,{fe:e.mutations.length,ge:i.length});let a=function(){return jM}();const o=e.mutations;for(let u=0;u<o.length;u++)a=a.insert(o[u].key,i[u].version);return new B_(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var It,Fe;function nP(n){switch(n){case le.OK:return Ae(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function RA(n){if(n===void 0)return Nr("GRPC error has no .code"),le.UNKNOWN;switch(n){case It.OK:return le.OK;case It.CANCELLED:return le.CANCELLED;case It.UNKNOWN:return le.UNKNOWN;case It.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case It.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case It.INTERNAL:return le.INTERNAL;case It.UNAVAILABLE:return le.UNAVAILABLE;case It.UNAUTHENTICATED:return le.UNAUTHENTICATED;case It.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case It.NOT_FOUND:return le.NOT_FOUND;case It.ALREADY_EXISTS:return le.ALREADY_EXISTS;case It.PERMISSION_DENIED:return le.PERMISSION_DENIED;case It.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case It.ABORTED:return le.ABORTED;case It.OUT_OF_RANGE:return le.OUT_OF_RANGE;case It.UNIMPLEMENTED:return le.UNIMPLEMENTED;case It.DATA_LOSS:return le.DATA_LOSS;default:return Ae(39323,{code:n})}}(Fe=It||(It={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=new Es([4294967295,4294967295],0);function lw(n){const e=Wb().encode(n),t=new Fb;return t.update(e),new Uint8Array(t.digest())}function uw(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Es([t,i],0),new Es([a,o],0)]}class j_{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new ju(`Invalid padding: ${t}`);if(i<0)throw new ju(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ju(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new ju(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Es.fromNumber(this.pe)}we(e,t,i){let a=e.add(t.multiply(Es.fromNumber(i)));return a.compare(iP)===1&&(a=new Es([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ye).toNumber()}Se(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=lw(e),[i,a]=uw(t);for(let o=0;o<this.hashCount;o++){const u=this.we(i,a,o);if(!this.Se(u))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),u=new j_(o,a,t);return i.forEach(h=>u.insert(h)),u}insert(e){if(this.pe===0)return;const t=lw(e),[i,a]=uw(t);for(let o=0;o<this.hashCount;o++){const u=this.we(i,a,o);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class ju extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,t,i,a,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,Tc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Sf(Ce.min(),a,new xt(Oe),Or(),Ve())}}class Tc{constructor(e,t,i,a,o){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Tc(i,t,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e,t,i,a){this.De=e,this.removedTargetIds=t,this.key=i,this.ve=a}}class IA{constructor(e,t){this.targetId=e,this.Ce=t}}class xA{constructor(e,t,i=nn.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class cw{constructor(){this.Fe=0,this.Me=hw(),this.xe=nn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ve(),t=Ve(),i=Ve();return this.Me.forEach((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:Ae(38017,{changeType:o})}}),new Tc(this.xe,this.Oe,e,t,i)}Qe(){this.Ne=!1,this.Me=hw()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,We(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class rP{constructor(e){this.ze=e,this.je=new Map,this.He=Or(),this.Je=rd(),this.Ye=rd(),this.Ze=new xt(Oe)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const i=this.rt(t);switch(e.state){case 0:this.it(t)&&i.ke(e.resumeToken);break;case 1:i.We(),i.Be||i.Qe(),i.ke(e.resumeToken);break;case 2:i.We(),i.Be||this.removeTarget(t);break;case 3:this.it(t)&&(i.Ge(),i.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),i.ke(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((i,a)=>{this.it(a)&&t(a)})}ot(e){const t=e.targetId,i=e.Ce.count,a=this._t(t);if(a){const o=a.target;if(Pg(o))if(i===0){const u=new Ee(o.path);this.tt(t,u,un.newNoDocument(u,Ce.min()))}else We(i===1,20013,{expectedCount:i});else{const u=this.ut(t);if(u!==i){const h=this.ct(e),f=h?this.lt(h,e,u):1;if(f!==0){this.st(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:o=0}=t;let u,h;try{u=Is(i).toUint8Array()}catch(f){if(f instanceof eA)return Wo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new j_(u,a,o)}catch(f){return Wo(f instanceof ju?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.pe===0?null:h}lt(e,t,i){return t.Ce.count===i-this.Tt(e,t.targetId)?0:2}Tt(e,t){const i=this.ze.getRemoteKeysForTarget(t);let a=0;return i.forEach(o=>{const u=this.ze.Pt(),h=`projects/${u.projectId}/databases/${u.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.tt(t,o,null),a++)}),a}It(e){const t=new Map;this.je.forEach((o,u)=>{const h=this._t(u);if(h){if(o.current&&Pg(h.target)){const f=new Ee(h.target.path);this.Et(f).has(u)||this.dt(u,f)||this.tt(u,f,un.newNoDocument(f,e))}o.Le&&(t.set(u,o.qe()),o.Qe())}});let i=Ve();this.Ye.forEach((o,u)=>{let h=!0;u.forEachWhile(f=>{const m=this._t(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.He.forEach((o,u)=>u.setReadTime(e));const a=new Sf(e,t,this.Ze,this.He,i);return this.He=Or(),this.Je=rd(),this.Ye=rd(),this.Ze=new xt(Oe),a}et(e,t){if(!this.it(e))return;const i=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,i),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,i){if(!this.it(e))return;const a=this.rt(e);this.dt(e,t)?a.$e(t,1):a.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),i&&(this.He=this.He.insert(t,i))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new cw,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Ut(Oe),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Ut(Oe),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new cw),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function rd(){return new xt(Ee.comparator)}function hw(){return new xt(Ee.comparator)}const sP={asc:"ASCENDING",desc:"DESCENDING"},aP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oP={and:"AND",or:"OR"};class lP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Lg(n,e){return n.useProto3Json||gf(e)?e:{value:e}}function jd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NA(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function uP(n,e){return jd(n,e.toTimestamp())}function Fi(n){return We(!!n,49232),Ce.fromTimestamp(function(t){const i=Rs(t);return new Vt(i.seconds,i.nanos)}(n))}function F_(n,e){return Vg(n,e).canonicalString()}function Vg(n,e){const t=function(a){return new yt(["projects",a.projectId,"databases",a.database])}(n).child("documents");return e===void 0?t:t.child(e)}function OA(n){const e=yt.fromString(n);return We(LA(e),10190,{key:e.toString()}),e}function Ug(n,e){return F_(n.databaseId,e.path)}function Xm(n,e){const t=OA(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(MA(t))}function DA(n,e){return F_(n.databaseId,e)}function cP(n){const e=OA(n);return e.length===4?yt.emptyPath():MA(e)}function zg(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function MA(n){return We(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function dw(n,e,t){return{name:Ug(n,e),fields:t.value.mapValue.fields}}function hP(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ae(39313,{state:m})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=function(m,_){return m.useProto3Json?(We(_===void 0||typeof _=="string",58123),nn.fromBase64String(_||"")):(We(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),nn.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const _=m.code===void 0?le.UNKNOWN:RA(m.code);return new ye(_,m.message||"")}(u);t=new xA(i,a,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=Xm(n,i.document.name),o=Fi(i.document.updateTime),u=i.document.createTime?Fi(i.document.createTime):Ce.min(),h=new Sn({mapValue:{fields:i.document.fields}}),f=un.newFoundDocument(a,o,u,h),m=i.targetIds||[],_=i.removedTargetIds||[];t=new Ed(m,_,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=Xm(n,i.document),o=i.readTime?Fi(i.readTime):Ce.min(),u=un.newNoDocument(a,o),h=i.removedTargetIds||[];t=new Ed([],h,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=Xm(n,i.document),o=i.removedTargetIds||[];t=new Ed([],o,a,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:o}=i,u=new tP(a,o),h=i.targetId;t=new IA(h,u)}}return t}function dP(n,e){let t;if(e instanceof Ec)t={update:dw(n,e.key,e.value)};else if(e instanceof CA)t={delete:Ug(n,e.key)};else if(e instanceof ks)t={update:dw(n,e.key,e.data),updateMask:TP(e.fieldMask)};else{if(!(e instanceof ZM))return Ae(16599,{ft:e.type});t={verify:Ug(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(o,u){const h=u.transform;if(h instanceof zd)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof lc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof uc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Bd)return{fieldPath:u.field.canonicalString(),increment:h.Re};throw Ae(20930,{transform:u.transform})}(0,i))),e.precondition.isNone||(t.currentDocument=function(a,o){return o.updateTime!==void 0?{updateTime:uP(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae(27497)}(n,e.precondition)),t}function fP(n,e){return n&&n.length>0?(We(e!==void 0,14353),n.map(t=>function(a,o){let u=a.updateTime?Fi(a.updateTime):Fi(o);return u.isEqual(Ce.min())&&(u=Fi(o)),new QM(u,a.transformResults||[])}(t,e))):[]}function pP(n,e){return{documents:[DA(n,e.path)]}}function mP(n,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=DA(n,a);const o=function(m){if(m.length!==0)return kA(qi.create(m,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(m){if(m.length!==0)return m.map(_=>function(E){return{field:Lo(E.field),direction:yP(E.dir)}}(_))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const h=Lg(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{gt:t,parent:a}}function gP(n){let e=cP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){We(i===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let o=[];t.where&&(o=function(v){const E=PA(v);return E instanceof qi&&cA(E)?E.getFilters():[E]}(t.where));let u=[];t.orderBy&&(u=function(v){return v.map(E=>function(S){return new Ud(Vo(S.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(E))}(t.orderBy));let h=null;t.limit&&(h=function(v){let E;return E=typeof v=="object"?v.value:v,gf(E)?null:E}(t.limit));let f=null;t.startAt&&(f=function(v){const E=!!v.before,A=v.values||[];return new Vd(A,E)}(t.startAt));let m=null;return t.endAt&&(m=function(v){const E=!v.before,A=v.values||[];return new Vd(A,E)}(t.endAt)),kM(e,a,u,o,h,"F",f,m)}function _P(n,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:a})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function PA(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Vo(t.unaryFilter.field);return Lt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=Vo(t.unaryFilter.field);return Lt.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Vo(t.unaryFilter.field);return Lt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Vo(t.unaryFilter.field);return Lt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(n):n.fieldFilter!==void 0?function(t){return Lt.create(Vo(t.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return qi.create(t.compositeFilter.filters.map(i=>PA(i)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(t.compositeFilter.op))}(n):Ae(30097,{filter:n})}function yP(n){return sP[n]}function vP(n){return aP[n]}function EP(n){return oP[n]}function Lo(n){return{fieldPath:n.canonicalString()}}function Vo(n){return tn.fromServerFormat(n.fieldPath)}function kA(n){return n instanceof Lt?function(t){if(t.op==="=="){if(JT(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NAN"}};if(ZT(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(JT(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NOT_NAN"}};if(ZT(t.value))return{unaryFilter:{field:Lo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(t.field),op:vP(t.op),value:t.value}}}(n):n instanceof qi?function(t){const i=t.getFilters().map(a=>kA(a));return i.length===1?i[0]:{compositeFilter:{op:EP(t.op),filters:i}}}(n):Ae(54877,{filter:n})}function TP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function LA(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,t,i,a,o=Ce.min(),u=Ce.min(),h=nn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.wt=e}}function SP(n){const e=gP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?kg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(){this.Cn=new AP}addToCollectionParentIndex(e,t){return this.Cn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Cs.min())}updateCollectionGroup(e,t,i){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class AP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Ut(yt.comparator),o=!a.has(i);return this.index[t]=a.add(i),o}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Ut(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VA=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(VA,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new el(0)}static lr(){return new el(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="LruGarbageCollector",CP=1048576;function mw([n,e],[t,i]){const a=Oe(n,t);return a===0?Oe(e,i):a}class RP{constructor(e){this.Er=e,this.buffer=new Ut(mw),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();mw(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IP{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){pe(pw,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){gl(t)?pe(pw,"Ignoring IndexedDB error during garbage collection: ",t):await ml(t)}await this.mr(3e5)})}}class xP{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return re.resolve(mf.le);const i=new RP(t);return this.gr.forEachTarget(e,a=>i.Rr(a.sequenceNumber)).next(()=>this.gr.yr(e,a=>i.Rr(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.gr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(fw)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fw):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let i,a,o,u,h,f,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(e,a))).next(v=>(i=v,h=Date.now(),this.removeTargets(e,i,t))).next(v=>(o=v,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(m=Date.now(),Po()<=ke.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${a} in `+(h-u)+`ms
	Removed ${o} targets in `+(f-h)+`ms
	Removed ${v} documents in `+(m-f)+`ms
Total Duration: ${m-_}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:v})))}}function NP(n,e){return new xP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(){this.changes=new ka(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?re.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MP{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.remoteDocumentCache.getEntry(e,t))).next(a=>(i!==null&&Yu(i.mutation,a,Ln.empty(),Vt.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Ve()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Ve()){const a=Ea();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(o=>{let u=Bu();return o.forEach((h,f)=>{u=u.insert(h,f.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const i=Ea();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Ve()))}populateOverlays(e,t,i){const a=[];return i.forEach(o=>{t.has(o)||a.push(o)}),this.documentOverlayCache.getOverlays(e,a).next(o=>{o.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,i,a){let o=Or();const u=$u(),h=function(){return $u()}();return t.forEach((f,m)=>{const _=i.get(m.key);a.has(m.key)&&(_===void 0||_.mutation instanceof ks)?o=o.insert(m.key,m):_!==void 0?(u.set(m.key,_.mutation.getFieldMask()),Yu(_.mutation,m,_.mutation.getFieldMask(),Vt.now())):u.set(m.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,o).next(f=>(f.forEach((m,_)=>u.set(m,_)),t.forEach((m,_)=>{var v;return h.set(m,new DP(_,(v=u.get(m))!==null&&v!==void 0?v:null))}),h))}recalculateAndSaveOverlays(e,t){const i=$u();let a=new xt((u,h)=>u-h),o=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(f=>{const m=t.get(f);if(m===null)return;let _=i.get(f)||Ln.empty();_=h.applyToLocalView(m,_),i.set(f,_);const v=(a.get(h.batchId)||Ve()).add(f);a=a.insert(h.batchId,v)})}).next(()=>{const u=[],h=a.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),m=f.key,_=f.value,v=yA();_.forEach(E=>{if(!o.has(E)){const A=bA(t.get(E),i.get(E));A!==null&&v.set(E,A),o=o.add(E)}}),u.push(this.documentOverlayCache.saveOverlays(e,m,v))}return re.waitFor(u)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,a){return function(u){return Ee.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):LM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(o=>{const u=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-o.size):re.resolve(Ea());let h=rc,f=o;return u.next(m=>re.forEach(m,(_,v)=>(h<v.largestBatchId&&(h=v.largestBatchId),o.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next(E=>{f=f.insert(_,E)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,f,m,Ve())).next(_=>({batchId:h,changes:_A(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next(i=>{let a=Bu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const o=t.collectionGroup;let u=Bu();return this.indexManager.getCollectionParents(e,o).next(h=>re.forEach(h,f=>{const m=function(v,E){return new yf(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,f.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,a).next(_=>{_.forEach((v,E)=>{u=u.insert(v,E)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,i,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,o,a))).next(u=>{o.forEach((f,m)=>{const _=m.getKey();u.get(_)===null&&(u=u.insert(_,un.newInvalidDocument(_)))});let h=Bu();return u.forEach((f,m)=>{const _=o.get(f);_!==void 0&&Yu(_.mutation,m,Ln.empty(),Vt.now()),Ef(t,m)&&(h=h.insert(f,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return re.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(a){return{id:a.id,version:a.version,createTime:Fi(a.createTime)}}(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(a){return{name:a.name,query:SP(a.bundledQuery),readTime:Fi(a.readTime)}}(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(){this.overlays=new xt(Ee.comparator),this.Qr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ea();return re.forEach(t,a=>this.getOverlay(e,a).next(o=>{o!==null&&i.set(a,o)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,o)=>{this.bt(e,t,o)}),re.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.Qr.get(i);return a!==void 0&&(a.forEach(o=>this.overlays=this.overlays.remove(o)),this.Qr.delete(i)),re.resolve()}getOverlaysForCollection(e,t,i){const a=Ea(),o=t.length+1,u=new Ee(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const f=h.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===o&&f.largestBatchId>i&&a.set(f.getKey(),f)}return re.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let o=new xt((m,_)=>m-_);const u=this.overlays.getIterator();for(;u.hasNext();){const m=u.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>i){let _=o.get(m.largestBatchId);_===null&&(_=Ea(),o=o.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const h=Ea(),f=o.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((m,_)=>h.set(m,_)),!(h.size()>=a)););return re.resolve(h)}bt(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const u=this.Qr.get(a.largestBatchId).delete(i.key);this.Qr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new eP(t,i));let o=this.Qr.get(t);o===void 0&&(o=Ve(),this.Qr.set(t,o)),this.Qr.set(t,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.$r=new Ut($t.Ur),this.Kr=new Ut($t.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const i=new $t(e,t);this.$r=this.$r.add(i),this.Kr=this.Kr.add(i)}Gr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.zr(new $t(e,t))}jr(e,t){e.forEach(i=>this.removeReference(i,t))}Hr(e){const t=new Ee(new yt([])),i=new $t(t,e),a=new $t(t,e+1),o=[];return this.Kr.forEachInRange([i,a],u=>{this.zr(u),o.push(u.key)}),o}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new Ee(new yt([])),i=new $t(t,e),a=new $t(t,e+1);let o=Ve();return this.Kr.forEachInRange([i,a],u=>{o=o.add(u.key)}),o}containsKey(e){const t=new $t(e,0),i=this.$r.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class $t{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return Ee.comparator(e.key,t.key)||Oe(e.Zr,t.Zr)}static Wr(e,t){return Oe(e.Zr,t.Zr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Ut($t.Ur)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const o=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new JM(o,t,i,a);this.mutationQueue.push(u);for(const h of a)this.Xr=this.Xr.add(new $t(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,t){return re.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ti(i),o=a<0?0:a;return re.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?M_:this.nr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new $t(t,0),a=new $t(t,Number.POSITIVE_INFINITY),o=[];return this.Xr.forEachInRange([i,a],u=>{const h=this.ei(u.Zr);o.push(h)}),re.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ut(Oe);return t.forEach(a=>{const o=new $t(a,0),u=new $t(a,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([o,u],h=>{i=i.add(h.Zr)})}),re.resolve(this.ni(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let o=i;Ee.isDocumentKey(o)||(o=o.child(""));const u=new $t(new Ee(o),0);let h=new Ut(Oe);return this.Xr.forEachWhile(f=>{const m=f.key.path;return!!i.isPrefixOf(m)&&(m.length===a&&(h=h.add(f.Zr)),!0)},u),re.resolve(this.ni(h))}ni(e){const t=[];return e.forEach(i=>{const a=this.ei(i);a!==null&&t.push(a)}),t}removeMutationBatch(e,t){We(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Xr;return re.forEach(t.mutations,a=>{const o=new $t(a.key,t.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Xr=i})}sr(e){}containsKey(e,t){const i=new $t(t,0),a=this.Xr.firstAfterOrEqual(i);return re.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e){this.ii=e,this.docs=function(){return new xt(Ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),o=a?a.size:0,u=this.ii(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return re.resolve(i?i.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let i=Or();return t.forEach(a=>{const o=this.docs.get(a);i=i.insert(a,o?o.document.mutableCopy():un.newInvalidDocument(a))}),re.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let o=Or();const u=t.path,h=new Ee(u.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:m,value:{document:_}}=f.getNext();if(!u.isPrefixOf(m.path))break;m.path.length>u.length+1||fM(dM(_),i)<=0||(a.has(_.key)||Ef(t,_))&&(o=o.insert(_.key,_.mutableCopy()))}return re.resolve(o)}getAllFromCollectionGroup(e,t,i,a){Ae(9500)}si(e,t){return re.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new zP(this)}getSize(e){return re.resolve(this.size)}}class zP extends OP{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Br.addEntry(e,a)):this.Br.removeEntry(i)}),re.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e){this.persistence=e,this.oi=new ka(t=>L_(t),V_),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this._i=0,this.ai=new H_,this.targetCount=0,this.ui=el.cr()}forEachTarget(e,t){return this.oi.forEach((i,a)=>t(a)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this._i&&(this._i=t),re.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new el(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Tr(t),re.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,i){let a=0;const o=[];return this.oi.forEach((u,h)=>{h.sequenceNumber<=t&&i.get(h.targetId)===null&&(this.oi.delete(u),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)}),re.waitFor(o).next(()=>a)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const i=this.oi.get(t)||null;return re.resolve(i)}addMatchingKeys(e,t,i){return this.ai.Gr(t,i),re.resolve()}removeMatchingKeys(e,t,i){this.ai.jr(t,i);const a=this.persistence.referenceDelegate,o=[];return a&&t.forEach(u=>{o.push(a.markPotentiallyOrphaned(e,u))}),re.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const i=this.ai.Yr(t);return re.resolve(i)}containsKey(e,t){return re.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,t){this.ci={},this.overlays={},this.li=new mf(0),this.hi=!1,this.hi=!0,this.Pi=new LP,this.referenceDelegate=e(this),this.Ti=new BP(this),this.indexManager=new bP,this.remoteDocumentCache=function(a){return new UP(a)}(i=>this.referenceDelegate.Ii(i)),this.serializer=new wP(t),this.Ei=new PP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new kP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ci[e.toKey()];return i||(i=new VP(t,this.referenceDelegate),this.ci[e.toKey()]=i),i}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const a=new jP(this.li.next());return this.referenceDelegate.di(),i(a).next(o=>this.referenceDelegate.Ai(a).next(()=>o)).toPromise().then(o=>(a.raiseOnCommittedEvent(),o))}Ri(e,t){return re.or(Object.values(this.ci).map(i=>()=>i.containsKey(e,t)))}}class jP extends mM{constructor(e){super(),this.currentSequenceNumber=e}}class q_{constructor(e){this.persistence=e,this.Vi=new H_,this.mi=null}static fi(e){return new q_(e)}get gi(){if(this.mi)return this.mi;throw Ae(60996)}addReference(e,t,i){return this.Vi.addReference(i,t),this.gi.delete(i.toString()),re.resolve()}removeReference(e,t,i){return this.Vi.removeReference(i,t),this.gi.add(i.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(a=>this.gi.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(o=>this.gi.add(o.toString()))}).next(()=>i.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.gi,i=>{const a=Ee.fromPath(i);return this.pi(e,a).next(o=>{o||t.removeEntry(a,Ce.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(i=>{i?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return re.or([()=>re.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Fd{constructor(e,t){this.persistence=e,this.yi=new ka(i=>yM(i.path),(i,a)=>i.isEqual(a)),this.garbageCollector=NP(this,t)}static fi(e,t){return new Fd(e,t)}di(){}Ai(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.Sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}Sr(e){let t=0;return this.yr(e,i=>{t++}).next(()=>t)}yr(e,t){return re.forEach(this.yi,(i,a)=>this.Dr(e,i,a).next(o=>o?re.resolve():t(a)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.si(e,u=>this.Dr(e,u,t).next(h=>{h||(i++,o.removeEntry(u,Ce.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),re.resolve()}removeReference(e,t,i){return this.yi.set(i,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),re.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=_d(e.data.value)),t}Dr(e,t,i){return re.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.yi.get(t);return re.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.ds=i,this.As=a}static Rs(e,t){let i=Ve(),a=Ve();for(const o of t.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new G_(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return _N()?8:gM(fn())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,i,a){const o={result:null};return this.ws(e,t).next(u=>{o.result=u}).next(()=>{if(!o.result)return this.Ss(e,t,a,i).next(u=>{o.result=u})}).next(()=>{if(o.result)return;const u=new FP;return this.bs(e,t,u).next(h=>{if(o.result=h,this.fs)return this.Ds(e,t,u,h.size)})}).next(()=>o.result)}Ds(e,t,i,a){return i.documentReadCount<this.gs?(Po()<=ke.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",ko(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),re.resolve()):(Po()<=ke.DEBUG&&pe("QueryEngine","Query:",ko(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.ps*a?(Po()<=ke.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",ko(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bi(t))):re.resolve())}ws(e,t){if(iw(t))return re.resolve(null);let i=Bi(t);return this.indexManager.getIndexType(e,i).next(a=>a===0?null:(t.limit!==null&&a===1&&(t=kg(t,null,"F"),i=Bi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const u=Ve(...o);return this.ys.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,i).next(f=>{const m=this.vs(t,h);return this.Cs(t,m,u,f.readTime)?this.ws(e,kg(t,null,"F")):this.Fs(e,m,t,f)}))})))}Ss(e,t,i,a){return iw(t)||a.isEqual(Ce.min())?re.resolve(null):this.ys.getDocuments(e,i).next(o=>{const u=this.vs(t,o);return this.Cs(t,u,i,a)?re.resolve(null):(Po()<=ke.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ko(t)),this.Fs(e,u,t,hM(a,rc)).next(h=>h))})}vs(e,t){let i=new Ut(mA(e));return t.forEach((a,o)=>{Ef(e,o)&&(i=i.add(o))}),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}bs(e,t,i){return Po()<=ke.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",ko(t)),this.ys.getDocumentsMatchingQuery(e,t,Cs.min(),i)}Fs(e,t,i,a){return this.ys.getDocumentsMatchingQuery(e,i,a).next(o=>(t.forEach(u=>{o=o.insert(u.key,u)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="LocalStore",qP=3e8;class GP{constructor(e,t,i,a){this.persistence=e,this.Ms=t,this.serializer=a,this.xs=new xt(Oe),this.Os=new ka(o=>L_(o),V_),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(i)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MP(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function $P(n,e,t,i){return new GP(n,e,t,i)}async function zA(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(o=>(a=o,t.Ls(e),t.mutationQueue.getAllMutationBatches(i))).next(o=>{const u=[],h=[];let f=Ve();for(const m of a){u.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}for(const m of o){h.push(m.batchId);for(const _ of m.mutations)f=f.add(_.key)}return t.localDocuments.getDocuments(i,f).next(m=>({ks:m,removedBatchIds:u,addedBatchIds:h}))})})}function YP(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),o=t.Bs.newChangeBuffer({trackRemovals:!0});return function(h,f,m,_){const v=m.batch,E=v.keys();let A=re.resolve();return E.forEach(S=>{A=A.next(()=>_.getEntry(f,S)).next(D=>{const L=m.docVersions.get(S);We(L!==null,48541),D.version.compareTo(L)<0&&(v.applyToRemoteDocument(D,m),D.isValidDocument()&&(D.setReadTime(m.commitVersion),_.addEntry(D)))})}),A.next(()=>h.mutationQueue.removeMutationBatch(f,v))}(t,i,e,o).next(()=>o.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let f=Ve();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(f=f.add(h.batch.mutations[m].key));return f}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function BA(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function KP(n,e){const t=Re(n),i=e.snapshotVersion;let a=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const u=t.Bs.newChangeBuffer({trackRemovals:!0});a=t.xs;const h=[];e.targetChanges.forEach((_,v)=>{const E=a.get(v);if(!E)return;h.push(t.Ti.removeMatchingKeys(o,_.removedDocuments,v).next(()=>t.Ti.addMatchingKeys(o,_.addedDocuments,v)));let A=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?A=A.withResumeToken(nn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,i)),a=a.insert(v,A),function(D,L,M){return D.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=qP?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(E,A,_)&&h.push(t.Ti.updateTargetData(o,A))});let f=Or(),m=Ve();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(o,_))}),h.push(QP(o,u,e.documentUpdates).next(_=>{f=_.qs,m=_.Qs})),!i.isEqual(Ce.min())){const _=t.Ti.getLastRemoteSnapshotVersion(o).next(v=>t.Ti.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(_)}return re.waitFor(h).next(()=>u.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,f,m)).next(()=>f)}).then(o=>(t.xs=a,o))}function QP(n,e,t){let i=Ve(),a=Ve();return t.forEach(o=>i=i.add(o)),e.getEntries(n,i).next(o=>{let u=Or();return t.forEach((h,f)=>{const m=o.get(h);f.isFoundDocument()!==m.isFoundDocument()&&(a=a.add(h)),f.isNoDocument()&&f.version.isEqual(Ce.min())?(e.removeEntry(h,f.readTime),u=u.insert(h,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),u=u.insert(h,f)):pe($_,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",f.version)}),{qs:u,Qs:a}})}function WP(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=M_),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function XP(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Ti.getTargetData(i,e).next(o=>o?(a=o,re.resolve(a)):t.Ti.allocateTargetId(i).next(u=>(a=new gs(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.Ti.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.xs.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.xs=t.xs.insert(i.targetId,i),t.Os.set(e,i.targetId)),i})}async function Bg(n,e,t){const i=Re(n),a=i.xs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",o,u=>i.persistence.referenceDelegate.removeTarget(u,a))}catch(u){if(!gl(u))throw u;pe($_,`Failed to update sequence numbers for target ${e}: ${u}`)}i.xs=i.xs.remove(e),i.Os.delete(a.target)}function gw(n,e,t){const i=Re(n);let a=Ce.min(),o=Ve();return i.persistence.runTransaction("Execute query","readwrite",u=>function(f,m,_){const v=Re(f),E=v.Os.get(_);return E!==void 0?re.resolve(v.xs.get(E)):v.Ti.getTargetData(m,_)}(i,u,Bi(e)).next(h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,i.Ti.getMatchingKeysForTargetId(u,h.targetId).next(f=>{o=f})}).next(()=>i.Ms.getDocumentsMatchingQuery(u,e,t?a:Ce.min(),t?o:Ve())).next(h=>(ZP(i,UM(e),h),{documents:h,$s:o})))}function ZP(n,e,t){let i=n.Ns.get(e)||Ce.min();t.forEach((a,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),n.Ns.set(e,i)}class _w{constructor(){this.activeTargetIds=qM()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JP{constructor(){this.xo=new _w,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,i){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new _w,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw="ConnectivityMonitor";class vw{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){pe(yw,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){pe(yw,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd=null;function jg(){return sd===null?sd=function(){return 268435456+Math.round(2147483648*Math.random())}():sd++,"0x"+sd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm="RestConnection",tk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nk{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${i}/databases/${a}`,this.Go=this.databaseId.database===kd?`project_id=${i}`:`project_id=${i}&database_id=${a}`}zo(e,t,i,a,o){const u=jg(),h=this.jo(e,t.toUriEncodedString());pe(Zm,`Sending RPC '${e}' ${u}:`,h,i);const f={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(f,a,o);const{host:m}=new URL(h),_=Da(m);return this.Jo(e,h,f,i,_).then(v=>(pe(Zm,`Received RPC '${e}' ${u}: `,v),v),v=>{throw Wo(Zm,`RPC '${e}' ${u} failed with error: `,v,"url: ",h,"request:",i),v})}Yo(e,t,i,a,o,u){return this.zo(e,t,i,a,o)}Ho(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,o)=>e[o]=a),i&&i.headers.forEach((a,o)=>e[o]=a)}jo(e,t){const i=tk[e];return`${this.Ko}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class rk extends nk{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,o){const u=jg();return new Promise((h,f)=>{const m=new Hb;m.setWithCredentials(!0),m.listenOnce(qb.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case gd.NO_ERROR:const v=m.getResponseJson();pe(on,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(v)),h(v);break;case gd.TIMEOUT:pe(on,`RPC '${e}' ${u} timed out`),f(new ye(le.DEADLINE_EXCEEDED,"Request time out"));break;case gd.HTTP_ERROR:const E=m.getStatus();if(pe(on,`RPC '${e}' ${u} failed with status:`,E,"response text:",m.getResponseText()),E>0){let A=m.getResponseJson();Array.isArray(A)&&(A=A[0]);const S=A==null?void 0:A.error;if(S&&S.status&&S.message){const D=function(M){const H=M.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(H)>=0?H:le.UNKNOWN}(S.status);f(new ye(D,S.message))}else f(new ye(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new ye(le.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:u,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{pe(on,`RPC '${e}' ${u} completed.`)}});const _=JSON.stringify(a);pe(on,`RPC '${e}' ${u} sending request:`,a),m.send(t,"POST",_,i,15)})}T_(e,t,i){const a=jg(),o=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Yb(),h=$b(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Ho(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const _=o.join("");pe(on,`Creating RPC '${e}' stream ${a}: ${_}`,f);const v=u.createWebChannel(_,f);let E=!1,A=!1;const S=new ik({Zo:L=>{A?pe(on,`Not sending because RPC '${e}' stream ${a} is closed:`,L):(E||(pe(on,`Opening RPC '${e}' stream ${a} transport.`),v.open(),E=!0),pe(on,`RPC '${e}' stream ${a} sending:`,L),v.send(L))},Xo:()=>v.close()}),D=(L,M,H)=>{L.listen(M,j=>{try{H(j)}catch(ee){setTimeout(()=>{throw ee},0)}})};return D(v,zu.EventType.OPEN,()=>{A||(pe(on,`RPC '${e}' stream ${a} transport opened.`),S.__())}),D(v,zu.EventType.CLOSE,()=>{A||(A=!0,pe(on,`RPC '${e}' stream ${a} transport closed`),S.u_())}),D(v,zu.EventType.ERROR,L=>{A||(A=!0,Wo(on,`RPC '${e}' stream ${a} transport errored. Name:`,L.name,"Message:",L.message),S.u_(new ye(le.UNAVAILABLE,"The operation could not be completed")))}),D(v,zu.EventType.MESSAGE,L=>{var M;if(!A){const H=L.data[0];We(!!H,16349);const j=H,ee=(j==null?void 0:j.error)||((M=j[0])===null||M===void 0?void 0:M.error);if(ee){pe(on,`RPC '${e}' stream ${a} received error:`,ee);const Z=ee.status;let ue=function(I){const x=It[I];if(x!==void 0)return RA(x)}(Z),P=ee.message;ue===void 0&&(ue=le.INTERNAL,P="Unknown error status: "+Z+" with message "+ee.message),A=!0,S.u_(new ye(ue,P)),v.close()}else pe(on,`RPC '${e}' stream ${a} received:`,H),S.c_(H)}}),D(h,Gb.STAT_EVENT,L=>{L.stat===Ig.PROXY?pe(on,`RPC '${e}' stream ${a} detected buffering proxy`):L.stat===Ig.NOPROXY&&pe(on,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{S.a_()},0),S}}function Jm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(n){return new lP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t,i=1e3,a=1.5,o=6e4){this.xi=e,this.timerId=t,this.I_=i,this.E_=a,this.d_=o,this.A_=0,this.R_=null,this.V_=Date.now(),this.reset()}reset(){this.A_=0}m_(){this.A_=this.d_}f_(e){this.cancel();const t=Math.floor(this.A_+this.g_()),i=Math.max(0,Date.now()-this.V_),a=Math.max(0,t-i);a>0&&pe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.A_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.R_=this.xi.enqueueAfterDelay(this.timerId,a,()=>(this.V_=Date.now(),e())),this.A_*=this.E_,this.A_<this.I_&&(this.A_=this.I_),this.A_>this.d_&&(this.A_=this.d_)}p_(){this.R_!==null&&(this.R_.skipDelay(),this.R_=null)}cancel(){this.R_!==null&&(this.R_.cancel(),this.R_=null)}g_(){return(Math.random()-.5)*this.A_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew="PersistentStream";class FA{constructor(e,t,i,a,o,u,h,f){this.xi=e,this.y_=i,this.w_=a,this.connection=o,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.S_=0,this.b_=null,this.D_=null,this.stream=null,this.v_=0,this.C_=new jA(e,t)}F_(){return this.state===1||this.state===5||this.M_()}M_(){return this.state===2||this.state===3}start(){this.v_=0,this.state!==4?this.auth():this.x_()}async stop(){this.F_()&&await this.close(0)}O_(){this.state=0,this.C_.reset()}N_(){this.M_()&&this.b_===null&&(this.b_=this.xi.enqueueAfterDelay(this.y_,6e4,()=>this.B_()))}L_(e){this.k_(),this.stream.send(e)}async B_(){if(this.M_())return this.close(0)}k_(){this.b_&&(this.b_.cancel(),this.b_=null)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}async close(e,t){this.k_(),this.q_(),this.C_.cancel(),this.S_++,e!==4?this.C_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(Nr(t.toString()),Nr("Using maximum backoff delay to prevent overloading the backend."),this.C_.m_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Q_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}Q_(){}auth(){this.state=1;const e=this.U_(this.S_),t=this.S_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.S_===t&&this.K_(i,a)},i=>{e(()=>{const a=new ye(le.UNKNOWN,"Fetching auth token failed: "+i.message);return this.W_(a)})})}K_(e,t){const i=this.U_(this.S_);this.stream=this.G_(e,t),this.stream.e_(()=>{i(()=>this.listener.e_())}),this.stream.n_(()=>{i(()=>(this.state=2,this.D_=this.xi.enqueueAfterDelay(this.w_,1e4,()=>(this.M_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(a=>{i(()=>this.W_(a))}),this.stream.onMessage(a=>{i(()=>++this.v_==1?this.z_(a):this.onNext(a))})}x_(){this.state=5,this.C_.f_(async()=>{this.state=0,this.start()})}W_(e){return pe(Ew,`close with error: ${e}`),this.stream=null,this.close(4,e)}U_(e){return t=>{this.xi.enqueueAndForget(()=>this.S_===e?t():(pe(Ew,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sk extends FA{constructor(e,t,i,a,o,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,u),this.serializer=o}G_(e,t){return this.connection.T_("Listen",e,t)}z_(e){return this.onNext(e)}onNext(e){this.C_.reset();const t=hP(this.serializer,e),i=function(o){if(!("targetChange"in o))return Ce.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?Fi(u.readTime):Ce.min()}(e);return this.listener.j_(t,i)}H_(e){const t={};t.database=zg(this.serializer),t.addTarget=function(o,u){let h;const f=u.target;if(h=Pg(f)?{documents:pP(o,f)}:{query:mP(o,f).gt},h.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){h.resumeToken=NA(o,u.resumeToken);const m=Lg(o,u.expectedCount);m!==null&&(h.expectedCount=m)}else if(u.snapshotVersion.compareTo(Ce.min())>0){h.readTime=jd(o,u.snapshotVersion.toTimestamp());const m=Lg(o,u.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=_P(this.serializer,e);i&&(t.labels=i),this.L_(t)}J_(e){const t={};t.database=zg(this.serializer),t.removeTarget=e,this.L_(t)}}class ak extends FA{constructor(e,t,i,a,o,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,u),this.serializer=o}get Y_(){return this.v_>0}start(){this.lastStreamToken=void 0,super.start()}Q_(){this.Y_&&this.Z_([])}G_(e,t){return this.connection.T_("Write",e,t)}z_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.X_()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.C_.reset();const t=fP(e.writeResults,e.commitTime),i=Fi(e.commitTime);return this.listener.ea(i,t)}ta(){const e={};e.database=zg(this.serializer),this.L_(e)}Z_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>dP(this.serializer,i))};this.L_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{}class lk extends ok{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.na=!1}ra(){if(this.na)throw new ye(le.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,i,a){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.zo(e,Vg(t,i),a,o,u)).catch(o=>{throw o.name==="FirebaseError"?(o.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(le.UNKNOWN,o.toString())})}Yo(e,t,i,a,o){return this.ra(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,h])=>this.connection.Yo(e,Vg(t,i),a,u,h,o)).catch(u=>{throw u.name==="FirebaseError"?(u.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ye(le.UNKNOWN,u.toString())})}terminate(){this.na=!0,this.connection.terminate()}}class uk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ia=0,this.sa=null,this.oa=!0}_a(){this.ia===0&&(this.aa("Unknown"),this.sa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.sa=null,this.ua("Backend didn't respond within 10 seconds."),this.aa("Offline"),Promise.resolve())))}ca(e){this.state==="Online"?this.aa("Unknown"):(this.ia++,this.ia>=1&&(this.la(),this.ua(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.aa("Offline")))}set(e){this.la(),this.ia=0,e==="Online"&&(this.oa=!1),this.aa(e)}aa(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ua(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.oa?(Nr(t),this.oa=!1):pe("OnlineStateTracker",t)}la(){this.sa!==null&&(this.sa.cancel(),this.sa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="RemoteStore";class ck{constructor(e,t,i,a,o){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.ha=[],this.Pa=new Map,this.Ta=new Set,this.Ia=[],this.Ea=o,this.Ea.No(u=>{i.enqueueAndForget(async()=>{La(this)&&(pe(Ca,"Restarting streams for network reachability change."),await async function(f){const m=Re(f);m.Ta.add(4),await wc(m),m.da.set("Unknown"),m.Ta.delete(4),await Af(m)}(this))})}),this.da=new uk(i,a)}}async function Af(n){if(La(n))for(const e of n.Ia)await e(!0)}async function wc(n){for(const e of n.Ia)await e(!1)}function HA(n,e){const t=Re(n);t.Pa.has(e.targetId)||(t.Pa.set(e.targetId,e),W_(t)?Q_(t):_l(t).M_()&&K_(t,e))}function Y_(n,e){const t=Re(n),i=_l(t);t.Pa.delete(e),i.M_()&&qA(t,e),t.Pa.size===0&&(i.M_()?i.N_():La(t)&&t.da.set("Unknown"))}function K_(n,e){if(n.Aa.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_l(n).H_(e)}function qA(n,e){n.Aa.Ke(e),_l(n).J_(e)}function Q_(n){n.Aa=new rP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Pa.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),_l(n).start(),n.da._a()}function W_(n){return La(n)&&!_l(n).F_()&&n.Pa.size>0}function La(n){return Re(n).Ta.size===0}function GA(n){n.Aa=void 0}async function hk(n){n.da.set("Online")}async function dk(n){n.Pa.forEach((e,t)=>{K_(n,e)})}async function fk(n,e){GA(n),W_(n)?(n.da.ca(e),Q_(n)):n.da.set("Unknown")}async function pk(n,e,t){if(n.da.set("Online"),e instanceof xA&&e.state===2&&e.cause)try{await async function(a,o){const u=o.cause;for(const h of o.targetIds)a.Pa.has(h)&&(await a.remoteSyncer.rejectListen(h,u),a.Pa.delete(h),a.Aa.removeTarget(h))}(n,e)}catch(i){pe(Ca,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Hd(n,i)}else if(e instanceof Ed?n.Aa.Xe(e):e instanceof IA?n.Aa.ot(e):n.Aa.nt(e),!t.isEqual(Ce.min()))try{const i=await BA(n.localStore);t.compareTo(i)>=0&&await function(o,u){const h=o.Aa.It(u);return h.targetChanges.forEach((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const _=o.Pa.get(m);_&&o.Pa.set(m,_.withResumeToken(f.resumeToken,u))}}),h.targetMismatches.forEach((f,m)=>{const _=o.Pa.get(f);if(!_)return;o.Pa.set(f,_.withResumeToken(nn.EMPTY_BYTE_STRING,_.snapshotVersion)),qA(o,f);const v=new gs(_.target,f,m,_.sequenceNumber);K_(o,v)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t)}catch(i){pe(Ca,"Failed to raise snapshot:",i),await Hd(n,i)}}async function Hd(n,e,t){if(!gl(e))throw e;n.Ta.add(1),await wc(n),n.da.set("Offline"),t||(t=()=>BA(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{pe(Ca,"Retrying IndexedDB access"),await t(),n.Ta.delete(1),await Af(n)})}function $A(n,e){return e().catch(t=>Hd(n,t,e))}async function Cf(n){const e=Re(n),t=Ns(e);let i=e.ha.length>0?e.ha[e.ha.length-1].batchId:M_;for(;mk(e);)try{const a=await WP(e.localStore,i);if(a===null){e.ha.length===0&&t.N_();break}i=a.batchId,gk(e,a)}catch(a){await Hd(e,a)}YA(e)&&KA(e)}function mk(n){return La(n)&&n.ha.length<10}function gk(n,e){n.ha.push(e);const t=Ns(n);t.M_()&&t.Y_&&t.Z_(e.mutations)}function YA(n){return La(n)&&!Ns(n).F_()&&n.ha.length>0}function KA(n){Ns(n).start()}async function _k(n){Ns(n).ta()}async function yk(n){const e=Ns(n);for(const t of n.ha)e.Z_(t.mutations)}async function vk(n,e,t){const i=n.ha.shift(),a=B_.from(i,e,t);await $A(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),await Cf(n)}async function Ek(n,e){e&&Ns(n).Y_&&await async function(i,a){if(function(u){return nP(u)&&u!==le.ABORTED}(a.code)){const o=i.ha.shift();Ns(i).O_(),await $A(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,a)),await Cf(i)}}(n,e),YA(n)&&KA(n)}async function Tw(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),pe(Ca,"RemoteStore received new credentials");const i=La(t);t.Ta.add(3),await wc(t),i&&t.da.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ta.delete(3),await Af(t)}async function Tk(n,e){const t=Re(n);e?(t.Ta.delete(2),await Af(t)):e||(t.Ta.add(2),await wc(t),t.da.set("Unknown"))}function _l(n){return n.Ra||(n.Ra=function(t,i,a){const o=Re(t);return o.ra(),new sk(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{e_:hk.bind(null,n),n_:dk.bind(null,n),i_:fk.bind(null,n),j_:pk.bind(null,n)}),n.Ia.push(async e=>{e?(n.Ra.O_(),W_(n)?Q_(n):n.da.set("Unknown")):(await n.Ra.stop(),GA(n))})),n.Ra}function Ns(n){return n.Va||(n.Va=function(t,i,a){const o=Re(t);return o.ra(),new ak(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:_k.bind(null,n),i_:Ek.bind(null,n),X_:yk.bind(null,n),ea:vk.bind(null,n)}),n.Ia.push(async e=>{e?(n.Va.O_(),await Cf(n)):(await n.Va.stop(),n.ha.length>0&&(pe(Ca,`Stopping write stream with ${n.ha.length} pending writes`),n.ha=[]))})),n.Va}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,t,i,a,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=o,this.deferred=new Ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,o){const u=Date.now()+i,h=new X_(e,t,u,a,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Z_(n,e){if(Nr("AsyncQueue",`${e}: ${n}`),gl(n))return new ye(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{static emptySet(e){return new qo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=Bu(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,o=i.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new qo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww{constructor(){this.ma=new xt(Ee.comparator)}track(e){const t=e.doc.key,i=this.ma.get(t);i?e.type!==0&&i.type===3?this.ma=this.ma.insert(t,e):e.type===3&&i.type!==1?this.ma=this.ma.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ma=this.ma.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ma=this.ma.remove(t):e.type===1&&i.type===2?this.ma=this.ma.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ma=this.ma.insert(t,{type:2,doc:e.doc}):Ae(63341,{Vt:e,fa:i}):this.ma=this.ma.insert(t,e)}ga(){const e=[];return this.ma.inorderTraversal((t,i)=>{e.push(i)}),e}}class tl{constructor(e,t,i,a,o,u,h,f,m){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=o,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,i,a,o){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new tl(e,t,qo.emptySet(t),u,i,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.pa=void 0,this.ya=[]}wa(){return this.ya.some(e=>e.Sa())}}class Sk{constructor(){this.queries=Sw(),this.onlineState="Unknown",this.ba=new Set}terminate(){(function(t,i){const a=Re(t),o=a.queries;a.queries=Sw(),o.forEach((u,h)=>{for(const f of h.ya)f.onError(i)})})(this,new ye(le.ABORTED,"Firestore shutting down"))}}function Sw(){return new ka(n=>pA(n),vf)}async function bk(n,e){const t=Re(n);let i=3;const a=e.query;let o=t.queries.get(a);o?!o.wa()&&e.Sa()&&(i=2):(o=new wk,i=e.Sa()?0:1);try{switch(i){case 0:o.pa=await t.onListen(a,!0);break;case 1:o.pa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const h=Z_(u,`Initialization of query '${ko(e.query)}' failed`);return void e.onError(h)}t.queries.set(a,o),o.ya.push(e),e.Da(t.onlineState),o.pa&&e.va(o.pa)&&J_(t)}async function Ak(n,e){const t=Re(n),i=e.query;let a=3;const o=t.queries.get(i);if(o){const u=o.ya.indexOf(e);u>=0&&(o.ya.splice(u,1),o.ya.length===0?a=e.Sa()?0:1:!o.wa()&&e.Sa()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Ck(n,e){const t=Re(n);let i=!1;for(const a of e){const o=a.query,u=t.queries.get(o);if(u){for(const h of u.ya)h.va(a)&&(i=!0);u.pa=a}}i&&J_(t)}function Rk(n,e,t){const i=Re(n),a=i.queries.get(e);if(a)for(const o of a.ya)o.onError(t);i.queries.delete(e)}function J_(n){n.ba.forEach(e=>{e.next()})}var Fg,bw;(bw=Fg||(Fg={})).Ca="default",bw.Cache="cache";class Ik{constructor(e,t,i){this.query=e,this.Fa=t,this.Ma=!1,this.xa=null,this.onlineState="Unknown",this.options=i||{}}va(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new tl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Ma?this.Oa(e)&&(this.Fa.next(e),t=!0):this.Na(e,this.onlineState)&&(this.Ba(e),t=!0),this.xa=e,t}onError(e){this.Fa.error(e)}Da(e){this.onlineState=e;let t=!1;return this.xa&&!this.Ma&&this.Na(this.xa,e)&&(this.Ba(this.xa),t=!0),t}Na(e,t){if(!e.fromCache||!this.Sa())return!0;const i=t!=="Offline";return(!this.options.La||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Oa(e){if(e.docChanges.length>0)return!0;const t=this.xa&&this.xa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ba(e){e=tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Ma=!0,this.Fa.next(e)}Sa(){return this.options.source!==Fg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e){this.key=e}}class WA{constructor(e){this.key=e}}class xk{constructor(e,t){this.query=e,this.Ga=t,this.za=null,this.hasCachedResults=!1,this.current=!1,this.ja=Ve(),this.mutatedKeys=Ve(),this.Ha=mA(e),this.Ja=new qo(this.Ha)}get Ya(){return this.Ga}Za(e,t){const i=t?t.Xa:new ww,a=t?t.Ja:this.Ja;let o=t?t.mutatedKeys:this.mutatedKeys,u=a,h=!1;const f=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,m=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((_,v)=>{const E=a.get(_),A=Ef(this.query,v)?v:null,S=!!E&&this.mutatedKeys.has(E.key),D=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let L=!1;E&&A?E.data.isEqual(A.data)?S!==D&&(i.track({type:3,doc:A}),L=!0):this.eu(E,A)||(i.track({type:2,doc:A}),L=!0,(f&&this.Ha(A,f)>0||m&&this.Ha(A,m)<0)&&(h=!0)):!E&&A?(i.track({type:0,doc:A}),L=!0):E&&!A&&(i.track({type:1,doc:E}),L=!0,(f||m)&&(h=!0)),L&&(A?(u=u.add(A),o=D?o.add(_):o.delete(_)):(u=u.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),o=o.delete(_.key),i.track({type:1,doc:_})}return{Ja:u,Xa:i,Cs:h,mutatedKeys:o}}eu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const o=this.Ja;this.Ja=e.Ja,this.mutatedKeys=e.mutatedKeys;const u=e.Xa.ga();u.sort((_,v)=>function(A,S){const D=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:L})}};return D(A)-D(S)}(_.type,v.type)||this.Ha(_.doc,v.doc)),this.tu(i),a=a!=null&&a;const h=t&&!a?this.nu():[],f=this.ja.size===0&&this.current&&!a?1:0,m=f!==this.za;return this.za=f,u.length!==0||m?{snapshot:new tl(this.query,e.Ja,o,u,e.mutatedKeys,f===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),ru:h}:{ru:h}}Da(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ja:this.Ja,Xa:new ww,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ru:[]}}iu(e){return!this.Ga.has(e)&&!!this.Ja.has(e)&&!this.Ja.get(e).hasLocalMutations}tu(e){e&&(e.addedDocuments.forEach(t=>this.Ga=this.Ga.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ga=this.Ga.delete(t)),this.current=e.current)}nu(){if(!this.current)return[];const e=this.ja;this.ja=Ve(),this.Ja.forEach(i=>{this.iu(i.key)&&(this.ja=this.ja.add(i.key))});const t=[];return e.forEach(i=>{this.ja.has(i)||t.push(new WA(i))}),this.ja.forEach(i=>{e.has(i)||t.push(new QA(i))}),t}su(e){this.Ga=e.$s,this.ja=Ve();const t=this.Za(e.documents);return this.applyChanges(t,!0)}ou(){return tl.fromInitialDocuments(this.query,this.Ja,this.mutatedKeys,this.za===0,this.hasCachedResults)}}const ey="SyncEngine";class Nk{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class Ok{constructor(e){this.key=e,this._u=!1}}class Dk{constructor(e,t,i,a,o,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=u,this.au={},this.uu=new ka(h=>pA(h),vf),this.cu=new Map,this.lu=new Set,this.hu=new xt(Ee.comparator),this.Pu=new Map,this.Tu=new H_,this.Iu={},this.Eu=new Map,this.du=el.lr(),this.onlineState="Unknown",this.Au=void 0}get isPrimaryClient(){return this.Au===!0}}async function Mk(n,e,t=!0){const i=nC(n);let a;const o=i.uu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.ou()):a=await XA(i,e,t,!0),a}async function Pk(n,e){const t=nC(n);await XA(t,e,!0,!1)}async function XA(n,e,t,i){const a=await XP(n.localStore,Bi(e)),o=a.targetId,u=n.sharedClientState.addLocalQueryTarget(o,t);let h;return i&&(h=await kk(n,e,o,u==="current",a.resumeToken)),n.isPrimaryClient&&t&&HA(n.remoteStore,a),h}async function kk(n,e,t,i,a){n.Ru=(v,E,A)=>async function(D,L,M,H){let j=L.view.Za(M);j.Cs&&(j=await gw(D.localStore,L.query,!1).then(({documents:P})=>L.view.Za(P,j)));const ee=H&&H.targetChanges.get(L.targetId),Z=H&&H.targetMismatches.get(L.targetId)!=null,ue=L.view.applyChanges(j,D.isPrimaryClient,ee,Z);return Cw(D,L.targetId,ue.ru),ue.snapshot}(n,v,E,A);const o=await gw(n.localStore,e,!0),u=new xk(e,o.$s),h=u.Za(o.documents),f=Tc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",a),m=u.applyChanges(h,n.isPrimaryClient,f);Cw(n,t,m.ru);const _=new Nk(e,t,u);return n.uu.set(e,_),n.cu.has(t)?n.cu.get(t).push(e):n.cu.set(t,[e]),m.snapshot}async function Lk(n,e,t){const i=Re(n),a=i.uu.get(e),o=i.cu.get(a.targetId);if(o.length>1)return i.cu.set(a.targetId,o.filter(u=>!vf(u,e))),void i.uu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await Bg(i.localStore,a.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(a.targetId),t&&Y_(i.remoteStore,a.targetId),Hg(i,a.targetId)}).catch(ml)):(Hg(i,a.targetId),await Bg(i.localStore,a.targetId,!0))}async function Vk(n,e){const t=Re(n),i=t.uu.get(e),a=t.cu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Y_(t.remoteStore,i.targetId))}async function Uk(n,e,t){const i=Gk(n);try{const a=await function(u,h){const f=Re(u),m=Vt.now(),_=h.reduce((A,S)=>A.add(S.key),Ve());let v,E;return f.persistence.runTransaction("Locally write mutations","readwrite",A=>{let S=Or(),D=Ve();return f.Bs.getEntries(A,_).next(L=>{S=L,S.forEach((M,H)=>{H.isValidDocument()||(D=D.add(M))})}).next(()=>f.localDocuments.getOverlayedDocuments(A,S)).next(L=>{v=L;const M=[];for(const H of h){const j=XM(H,v.get(H.key).overlayedDocument);j!=null&&M.push(new ks(H.key,j,oA(j.value.mapValue),ji.exists(!0)))}return f.mutationQueue.addMutationBatch(A,m,M,h)}).next(L=>{E=L;const M=L.applyToLocalDocumentSet(v,D);return f.documentOverlayCache.saveOverlays(A,L.batchId,M)})}).then(()=>({batchId:E.batchId,changes:_A(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(u,h,f){let m=u.Iu[u.currentUser.toKey()];m||(m=new xt(Oe)),m=m.insert(h,f),u.Iu[u.currentUser.toKey()]=m}(i,a.batchId,t),await Sc(i,a.changes),await Cf(i.remoteStore)}catch(a){const o=Z_(a,"Failed to persist write");t.reject(o)}}async function ZA(n,e){const t=Re(n);try{const i=await KP(t.localStore,e);e.targetChanges.forEach((a,o)=>{const u=t.Pu.get(o);u&&(We(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u._u=!0:a.modifiedDocuments.size>0?We(u._u,14607):a.removedDocuments.size>0&&(We(u._u,42227),u._u=!1))}),await Sc(t,i,e)}catch(i){await ml(i)}}function Aw(n,e,t){const i=Re(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.uu.forEach((o,u)=>{const h=u.view.Da(e);h.snapshot&&a.push(h.snapshot)}),function(u,h){const f=Re(u);f.onlineState=h;let m=!1;f.queries.forEach((_,v)=>{for(const E of v.ya)E.Da(h)&&(m=!0)}),m&&J_(f)}(i.eventManager,e),a.length&&i.au.j_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function zk(n,e,t){const i=Re(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Pu.get(e),o=a&&a.key;if(o){let u=new xt(Ee.comparator);u=u.insert(o,un.newNoDocument(o,Ce.min()));const h=Ve().add(o),f=new Sf(Ce.min(),new Map,new xt(Oe),u,h);await ZA(i,f),i.hu=i.hu.remove(o),i.Pu.delete(e),ty(i)}else await Bg(i.localStore,e,!1).then(()=>Hg(i,e,t)).catch(ml)}async function Bk(n,e){const t=Re(n),i=e.batch.batchId;try{const a=await YP(t.localStore,e);eC(t,i,null),JA(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Sc(t,a)}catch(a){await ml(a)}}async function jk(n,e,t){const i=Re(n);try{const a=await function(u,h){const f=Re(u);return f.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let _;return f.mutationQueue.lookupMutationBatch(m,h).next(v=>(We(v!==null,37113),_=v.keys(),f.mutationQueue.removeMutationBatch(m,v))).next(()=>f.mutationQueue.performConsistencyCheck(m)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(m,_,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_)).next(()=>f.localDocuments.getDocuments(m,_))})}(i.localStore,e);eC(i,e,t),JA(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Sc(i,a)}catch(a){await ml(a)}}function JA(n,e){(n.Eu.get(e)||[]).forEach(t=>{t.resolve()}),n.Eu.delete(e)}function eC(n,e,t){const i=Re(n);let a=i.Iu[i.currentUser.toKey()];if(a){const o=a.get(e);o&&(t?o.reject(t):o.resolve(),a=a.remove(e)),i.Iu[i.currentUser.toKey()]=a}}function Hg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.cu.get(e))n.uu.delete(i),t&&n.au.Vu(i,t);n.cu.delete(e),n.isPrimaryClient&&n.Tu.Hr(e).forEach(i=>{n.Tu.containsKey(i)||tC(n,i)})}function tC(n,e){n.lu.delete(e.path.canonicalString());const t=n.hu.get(e);t!==null&&(Y_(n.remoteStore,t),n.hu=n.hu.remove(e),n.Pu.delete(t),ty(n))}function Cw(n,e,t){for(const i of t)i instanceof QA?(n.Tu.addReference(i.key,e),Fk(n,i)):i instanceof WA?(pe(ey,"Document no longer in limbo: "+i.key),n.Tu.removeReference(i.key,e),n.Tu.containsKey(i.key)||tC(n,i.key)):Ae(19791,{mu:i})}function Fk(n,e){const t=e.key,i=t.path.canonicalString();n.hu.get(t)||n.lu.has(i)||(pe(ey,"New document in limbo: "+t),n.lu.add(i),ty(n))}function ty(n){for(;n.lu.size>0&&n.hu.size<n.maxConcurrentLimboResolutions;){const e=n.lu.values().next().value;n.lu.delete(e);const t=new Ee(yt.fromString(e)),i=n.du.next();n.Pu.set(i,new Ok(t)),n.hu=n.hu.insert(t,i),HA(n.remoteStore,new gs(Bi(U_(t.path)),i,"TargetPurposeLimboResolution",mf.le))}}async function Sc(n,e,t){const i=Re(n),a=[],o=[],u=[];i.uu.isEmpty()||(i.uu.forEach((h,f)=>{u.push(i.Ru(f,e,t).then(m=>{var _;if((m||t)&&i.isPrimaryClient){const v=m?!m.fromCache:(_=t==null?void 0:t.targetChanges.get(f.targetId))===null||_===void 0?void 0:_.current;i.sharedClientState.updateQueryState(f.targetId,v?"current":"not-current")}if(m){a.push(m);const v=G_.Rs(f.targetId,m);o.push(v)}}))}),await Promise.all(u),i.au.j_(a),await async function(f,m){const _=Re(f);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>re.forEach(m,E=>re.forEach(E.ds,A=>_.persistence.referenceDelegate.addReference(v,E.targetId,A)).next(()=>re.forEach(E.As,A=>_.persistence.referenceDelegate.removeReference(v,E.targetId,A)))))}catch(v){if(!gl(v))throw v;pe($_,"Failed to update sequence numbers: "+v)}for(const v of m){const E=v.targetId;if(!v.fromCache){const A=_.xs.get(E),S=A.snapshotVersion,D=A.withLastLimboFreeSnapshotVersion(S);_.xs=_.xs.insert(E,D)}}}(i.localStore,o))}async function Hk(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){pe(ey,"User change. New user:",e.toKey());const i=await zA(t.localStore,e);t.currentUser=e,function(o,u){o.Eu.forEach(h=>{h.forEach(f=>{f.reject(new ye(le.CANCELLED,u))})}),o.Eu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Sc(t,i.ks)}}function qk(n,e){const t=Re(n),i=t.Pu.get(e);if(i&&i._u)return Ve().add(i.key);{let a=Ve();const o=t.cu.get(e);if(!o)return a;for(const u of o){const h=t.uu.get(u);a=a.unionWith(h.view.Ya)}return a}}function nC(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zk.bind(null,e),e.au.j_=Ck.bind(null,e.eventManager),e.au.Vu=Rk.bind(null,e.eventManager),e}function Gk(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Bk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jk.bind(null,e),e}class qd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bf(e.databaseInfo.databaseId),this.sharedClientState=this.pu(e),this.persistence=this.yu(e),await this.persistence.start(),this.localStore=this.wu(e),this.gcScheduler=this.Su(e,this.localStore),this.indexBackfillerScheduler=this.bu(e,this.localStore)}Su(e,t){return null}bu(e,t){return null}wu(e){return $P(this.persistence,new HP,e.initialUser,this.serializer)}yu(e){return new UA(q_.fi,this.serializer)}pu(e){return new JP}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qd.provider={build:()=>new qd};class $k extends qd{constructor(e){super(),this.cacheSizeBytes=e}Su(e,t){We(this.persistence.referenceDelegate instanceof Fd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new IP(i,e.asyncQueue,t)}yu(e){const t=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new UA(i=>Fd.fi(i,t),this.serializer)}}class qg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Aw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hk.bind(null,this.syncEngine),await Tk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Sk}()}createDatastore(e){const t=bf(e.databaseInfo.databaseId),i=function(o){return new rk(o)}(e.databaseInfo);return function(o,u,h,f){return new lk(o,u,h,f)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,a,o,u,h){return new ck(i,a,o,u,h)}(this.localStore,this.datastore,e.asyncQueue,t=>Aw(this.syncEngine,t,0),function(){return vw.C()?new vw:new ek}())}createSyncEngine(e,t){return function(a,o,u,h,f,m,_){const v=new Dk(a,o,u,h,f,m);return _&&(v.Au=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(a){const o=Re(a);pe(Ca,"RemoteStore shutting down."),o.Ta.add(5),await wc(o),o.Ea.shutdown(),o.da.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}qg.provider={build:()=>new qg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.vu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.vu(this.observer.error,e):Nr("Uncaught Error in snapshot listener:",e.toString()))}Cu(){this.muted=!0}vu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="FirestoreClient";class Kk{constructor(e,t,i,a,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=ln.UNAUTHENTICATED,this.clientId=Xb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async u=>{pe(Os,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(i,u=>(pe(Os,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Z_(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function eg(n,e){n.asyncQueue.verifyOperationInProgress(),pe(Os,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async a=>{i.isEqual(a)||(await zA(e.localStore,a),i=a)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Rw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Qk(n);pe(Os,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Tw(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>Tw(e.remoteStore,a)),n._onlineComponents=e}async function Qk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(Os,"Using user provided OfflineComponentProvider");try{await eg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(a){return a.name==="FirebaseError"?a.code===le.FAILED_PRECONDITION||a.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(t))throw t;Wo("Error using user provided cache. Falling back to memory cache: "+t),await eg(n,new qd)}}else pe(Os,"Using default OfflineComponentProvider"),await eg(n,new $k(void 0));return n._offlineComponents}async function iC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(Os,"Using user provided OnlineComponentProvider"),await Rw(n,n._uninitializedComponentsProvider._online)):(pe(Os,"Using default OnlineComponentProvider"),await Rw(n,new qg))),n._onlineComponents}function Wk(n){return iC(n).then(e=>e.syncEngine)}async function Xk(n){const e=await iC(n),t=e.eventManager;return t.onListen=Mk.bind(null,e.syncEngine),t.onUnlisten=Lk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Pk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Vk.bind(null,e.syncEngine),t}function Zk(n,e,t={}){const i=new Ts;return n.asyncQueue.enqueueAndForget(async()=>function(o,u,h,f,m){const _=new Yk({next:E=>{_.Cu(),u.enqueueAndForget(()=>Ak(o,v));const A=E.docs.has(h);!A&&E.fromCache?m.reject(new ye(le.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&E.fromCache&&f&&f.source==="server"?m.reject(new ye(le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(E)},error:E=>m.reject(E)}),v=new Ik(U_(h.path),_,{includeMetadataChanges:!0,La:!0});return bk(o,v)}(await Xk(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jk(n,e,t){if(!t)throw new ye(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eL(n,e,t,i){if(e===!0&&i===!0)throw new ye(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xw(n){if(!Ee.isDocumentKey(n))throw new ye(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ny(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function Ra(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ny(n);throw new ye(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="firestore.googleapis.com",Nw=!0;class Ow{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sC,this.ssl=Nw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Nw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<CP)throw new ye(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rC((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ye(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ye(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ye(le.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,a){return i.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class iy{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ow({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ow(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new nM;switch(i.type){case"firstParty":return new aM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Iw.get(t);i&&(pe("ComponentProvider","Removing Datastore"),Iw.delete(t),i.terminate())}(this),Promise.resolve()}}function tL(n,e,t,i={}){var a;n=Ra(n,iy);const o=Da(e),u=n._getSettings(),h=Object.assign(Object.assign({},u),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;o&&(y_(`https://${f}`),v_("Firestore",!0)),u.host!==sC&&u.host!==f&&Wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m=Object.assign(Object.assign({},u),{host:f,ssl:o,emulatorOptions:i});if(!bs(m,h)&&(n._setSettings(m),i.mockUserToken)){let _,v;if(typeof i.mockUserToken=="string")_=i.mockUserToken,v=ln.MOCK_USER;else{_=ZS(i.mockUserToken,(a=n._app)===null||a===void 0?void 0:a.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new ye(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new ln(E)}n._authCredentials=new iM(new Qb(_,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ry(this.firestore,e,this._query)}}class Vn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}}class cc extends ry{constructor(e,t,i){super(e,t,U_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new Ee(e))}withConverter(e){return new cc(this.firestore,e,this._path)}}function nl(n,e,...t){if(n=zt(n),arguments.length===1&&(e=Xb.newId()),Jk("doc","path",e),n instanceof iy){const i=yt.fromString(e,...t);return xw(i),new Vn(n,null,new Ee(i))}{if(!(n instanceof Vn||n instanceof cc))throw new ye(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(yt.fromString(e,...t));return xw(i),new Vn(n.firestore,n instanceof cc?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="AsyncQueue";class Mw{constructor(e=Promise.resolve()){this.zu=[],this.ju=!1,this.Hu=[],this.Ju=null,this.Yu=!1,this.Zu=!1,this.Xu=[],this.C_=new jA(this,"async_queue_retry"),this.ec=()=>{const i=Jm();i&&pe(Dw,"Visibility state changed to "+i.visibilityState),this.C_.p_()},this.tc=e;const t=Jm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ec)}get isShuttingDown(){return this.ju}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.nc(),this.rc(e)}enterRestrictedMode(e){if(!this.ju){this.ju=!0,this.Zu=e||!1;const t=Jm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ec)}}enqueue(e){if(this.nc(),this.ju)return new Promise(()=>{});const t=new Ts;return this.rc(()=>this.ju&&this.Zu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.zu.push(e),this.sc()))}async sc(){if(this.zu.length!==0){try{await this.zu[0](),this.zu.shift(),this.C_.reset()}catch(e){if(!gl(e))throw e;pe(Dw,"Operation failed with retryable error: "+e)}this.zu.length>0&&this.C_.f_(()=>this.sc())}}rc(e){const t=this.tc.then(()=>(this.Yu=!0,e().catch(i=>{throw this.Ju=i,this.Yu=!1,Nr("INTERNAL UNHANDLED ERROR: ",Pw(i)),i}).then(i=>(this.Yu=!1,i))));return this.tc=t,t}enqueueAfterDelay(e,t,i){this.nc(),this.Xu.indexOf(e)>-1&&(t=0);const a=X_.createAndSchedule(this,e,t,i,o=>this.oc(o));return this.Hu.push(a),a}nc(){this.Ju&&Ae(47125,{_c:Pw(this.Ju)})}verifyOperationInProgress(){}async ac(){let e;do e=this.tc,await e;while(e!==this.tc)}uc(e){for(const t of this.Hu)if(t.timerId===e)return!0;return!1}cc(e){return this.ac().then(()=>{this.Hu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.Hu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.ac()})}lc(e){this.Xu.push(e)}oc(e){const t=this.Hu.indexOf(e);this.Hu.splice(t,1)}}function Pw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Rf extends iy{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new Mw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Mw(e),this._firestoreClient=void 0,await e}}}function nL(n,e){const t=typeof n=="object"?n:w_(),i=typeof n=="string"?n:kd,a=hf(t,"firestore").getImmediate({identifier:i});if(!a._initialized){const o=QS("firestore");o&&tL(a,...o)}return a}function aC(n){if(n._terminated)throw new ye(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||iL(n),n._firestoreClient}function iL(n){var e,t,i;const a=n._freezeSettings(),o=function(h,f,m,_){return new TM(h,f,m,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,rC(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,a);n._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=a.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),n._firestoreClient=new Kk(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this._byteString=e}static fromBase64String(e){try{return new il(nn.fromBase64String(e))}catch(t){throw new ye(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new il(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,a){if(i.length!==a.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==a[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=/^__.*__$/;class sL{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ks(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ec(e,this.data,t,this.fieldTransforms)}}class oC{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ks(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{hc:n})}}class ly{constructor(e,t,i,a,o,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,o===void 0&&this.Pc(),this.fieldTransforms=o||[],this.fieldMask=u||[]}get path(){return this.settings.path}get hc(){return this.settings.hc}Tc(e){return new ly(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ic(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Tc({path:i,Ec:!1});return a.dc(e),a}Ac(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Tc({path:i,Ec:!1});return a.Pc(),a}Rc(e){return this.Tc({path:void 0,Ec:!0})}Vc(e){return Gd(e,this.settings.methodName,this.settings.mc||!1,this.path,this.settings.fc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pc(){if(this.path)for(let e=0;e<this.path.length;e++)this.dc(this.path.get(e))}dc(e){if(e.length===0)throw this.Vc("Document fields must not be empty");if(lC(this.hc)&&rL.test(e))throw this.Vc('Document fields cannot begin and end with "__"')}}class aL{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||bf(e)}gc(e,t,i,a=!1){return new ly({hc:e,methodName:t,fc:i,path:tn.emptyPath(),Ec:!1,mc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function uC(n){const e=n._freezeSettings(),t=bf(n._databaseId);return new aL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oL(n,e,t,i,a,o={}){const u=n.gc(o.merge||o.mergeFields?2:0,e,t,a);uy("Data must be an object, but it was:",u,i);const h=cC(i,u);let f,m;if(o.merge)f=new Ln(u.fieldMask),m=u.fieldTransforms;else if(o.mergeFields){const _=[];for(const v of o.mergeFields){const E=Gg(e,v,t);if(!u.contains(E))throw new ye(le.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);dC(_,E)||_.push(E)}f=new Ln(_),m=u.fieldTransforms.filter(v=>f.covers(v.field))}else f=null,m=u.fieldTransforms;return new sL(new Sn(h),f,m)}class xf extends sy{_toFieldTransform(e){if(e.hc!==2)throw e.hc===1?e.Vc(`${this._methodName}() can only appear at the top level of your update data`):e.Vc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xf}}function lL(n,e,t,i){const a=n.gc(1,e,t);uy("Data must be an object, but it was:",a,i);const o=[],u=Sn.empty();Ps(i,(f,m)=>{const _=cy(e,f,t);m=zt(m);const v=a.Ac(_);if(m instanceof xf)o.push(_);else{const E=Nf(m,v);E!=null&&(o.push(_),u.set(_,E))}});const h=new Ln(o);return new oC(u,h,a.fieldTransforms)}function uL(n,e,t,i,a,o){const u=n.gc(1,e,t),h=[Gg(e,i,t)],f=[a];if(o.length%2!=0)throw new ye(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<o.length;E+=2)h.push(Gg(e,o[E])),f.push(o[E+1]);const m=[],_=Sn.empty();for(let E=h.length-1;E>=0;--E)if(!dC(m,h[E])){const A=h[E];let S=f[E];S=zt(S);const D=u.Ac(A);if(S instanceof xf)m.push(A);else{const L=Nf(S,D);L!=null&&(m.push(A),_.set(A,L))}}const v=new Ln(m);return new oC(_,v,u.fieldTransforms)}function Nf(n,e){if(hC(n=zt(n)))return uy("Unsupported field value:",e,n),cC(n,e);if(n instanceof sy)return function(i,a){if(!lC(a.hc))throw a.Vc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Vc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(a);o&&a.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Ec&&e.hc!==4)throw e.Vc("Nested arrays are not supported");return function(i,a){const o=[];let u=0;for(const h of i){let f=Nf(h,a.Rc(u));f==null&&(f={nullValue:"NULL_VALUE"}),o.push(f),u++}return{arrayValue:{values:o}}}(n,e)}return function(i,a){if((i=zt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return GM(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Vt.fromDate(i);return{timestampValue:jd(a.serializer,o)}}if(i instanceof Vt){const o=new Vt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:jd(a.serializer,o)}}if(i instanceof ay)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof il)return{bytesValue:NA(a.serializer,i._byteString)};if(i instanceof Vn){const o=a.databaseId,u=i.firestore._databaseId;if(!u.isEqual(o))throw a.Vc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:F_(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof oy)return function(u,h){return{mapValue:{fields:{[sA]:{stringValue:aA},[Ld]:{arrayValue:{values:u.toArray().map(m=>{if(typeof m!="number")throw h.Vc("VectorValues must only contain numeric values.");return z_(h.serializer,m)})}}}}}}(i,a);throw a.Vc(`Unsupported field value: ${ny(i)}`)}(n,e)}function cC(n,e){const t={};return Jb(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ps(n,(i,a)=>{const o=Nf(a,e.Ic(i));o!=null&&(t[i]=o)}),{mapValue:{fields:t}}}function hC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Vt||n instanceof ay||n instanceof il||n instanceof Vn||n instanceof sy||n instanceof oy)}function uy(n,e,t){if(!hC(t)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(t)){const i=ny(t);throw i==="an object"?e.Vc(n+" a custom object"):e.Vc(n+" "+i)}}function Gg(n,e,t){if((e=zt(e))instanceof If)return e._internalPath;if(typeof e=="string")return cy(n,e);throw Gd("Field path arguments must be of type string or ",n,!1,void 0,t)}const cL=new RegExp("[~\\*/\\[\\]]");function cy(n,e,t){if(e.search(cL)>=0)throw Gd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new If(...e.split("."))._internalPath}catch{throw Gd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gd(n,e,t,i,a){const o=i&&!i.isEmpty(),u=a!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(o||u)&&(f+=" (found",o&&(f+=` in field ${i}`),u&&(f+=` in document ${a}`),f+=")"),new ye(le.INVALID_ARGUMENT,h+n+f)}function dC(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,t,i,a,o){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(pC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class hL extends fC{data(){return super.data()}}function pC(n,e){return typeof e=="string"?cy(n,e):e instanceof If?e._internalPath:e._delegate._internalPath}class dL{convertValue(e,t="none"){switch(xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ps(e,(a,o)=>{i[a]=this.convertValue(o,t)}),i}convertVectorValue(e){var t,i,a;const o=(a=(i=(t=e.fields)===null||t===void 0?void 0:t[Ld].arrayValue)===null||i===void 0?void 0:i.values)===null||a===void 0?void 0:a.map(u=>wt(u.doubleValue));return new oy(o)}convertGeoPoint(e){return new ay(wt(e.latitude),wt(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=_f(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(sc(e));default:return null}}convertTimestamp(e){const t=Rs(e);return new Vt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=yt.fromString(e);We(LA(i),9688,{name:e});const a=new ac(i.get(1),i.get(3)),o=new Ee(i.popFirst(5));return a.isEqual(t)||Nr(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fL(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mC extends fC{constructor(e,t,i,a,o,u){super(e,t,i,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new mL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(pC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class mL extends mC{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(n){n=Ra(n,Vn);const e=Ra(n.firestore,Rf);return Zk(aC(e),n._key).then(t=>yL(e,n,t))}class gL extends dL{constructor(e){super(),this.firestore=e}convertBytes(e){return new il(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,t)}}function hy(n,e,t){n=Ra(n,Vn);const i=Ra(n.firestore,Rf),a=fL(n.converter,e,t);return _C(i,[oL(uC(i),"setDoc",n._key,a,n.converter!==null,t).toMutation(n._key,ji.none())])}function _L(n,e,t,...i){n=Ra(n,Vn);const a=Ra(n.firestore,Rf),o=uC(a);let u;return u=typeof(e=zt(e))=="string"||e instanceof If?uL(o,"updateDoc",n._key,e,t,i):lL(o,"updateDoc",n._key,e),_C(a,[u.toMutation(n._key,ji.exists(!0))])}function _C(n,e){return function(i,a){const o=new Ts;return i.asyncQueue.enqueueAndForget(async()=>Uk(await Wk(i),a,o)),o.promise}(aC(n),e)}function yL(n,e,t){const i=t.docs.get(e._key),a=new gL(n);return new mC(n,a,e._key,i,new pL(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(a){pl=a})(Ma),wa(new As("firestore",(i,{instanceIdentifier:a,options:o})=>{const u=i.getProvider("app").getImmediate(),h=new Rf(new rM(i.getProvider("auth-internal")),new oM(u,i.getProvider("app-check-internal")),function(m,_){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ye(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ac(m.options.projectId,_)}(u,a),u);return o=Object.assign({useFetchStreams:t},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),Vi(BT,jT,e),Vi(BT,jT,"esm2017")})();var kw={};const Lw="@firebase/database",Vw="1.0.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yC="";function vL(n){yC=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),en(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:tc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return kr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new EL(e)}}catch{}return new TL},Ta=vC("localStorage"),wL=vC("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=new cf("@firebase/database"),SL=function(){let n=1;return function(){return n++}}(),EC=function(n){const e=NN(n),t=new AN;t.update(e);const i=t.digest();return g_.encodeByteArray(i)},bc=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=bc.apply(null,i):typeof i=="object"?e+=en(i):e+=i,e+=" "}return e};let Ku=null,Uw=!0;const bL=function(n,e){he(!0,"Can't turn on custom loggers persistently."),Go.logLevel=ke.VERBOSE,Ku=Go.log.bind(Go)},cn=function(...n){if(Uw===!0&&(Uw=!1,Ku===null&&wL.get("logging_enabled")===!0&&bL()),Ku){const e=bc.apply(null,n);Ku(e)}},Ac=function(n){return function(...e){cn(n,...e)}},$g=function(...n){const e="FIREBASE INTERNAL ERROR: "+bc(...n);Go.error(e)},Dr=function(...n){const e=`FIREBASE FATAL ERROR: ${bc(...n)}`;throw Go.error(e),new Error(e)},Un=function(...n){const e="FIREBASE WARNING: "+bc(...n);Go.warn(e)},AL=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Un("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},TC=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},CL=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},rl="[MIN_NAME]",Ia="[MAX_NAME]",yl=function(n,e){if(n===e)return 0;if(n===rl||e===Ia)return-1;if(e===rl||n===Ia)return 1;{const t=zw(n),i=zw(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},RL=function(n,e){return n===e?0:n<e?-1:1},Mu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+en(e))},dy=function(n){if(typeof n!="object"||n===null)return en(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=en(e[i]),t+=":",t+=dy(n[e[i]]);return t+="}",t},wC=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let a=0;a<t;a+=e)a+e>t?i.push(n.substring(a,t)):i.push(n.substring(a,a+e));return i};function ei(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const SC=function(n){he(!TC(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let a,o,u,h,f;n===0?(o=0,u=0,a=1/n===-1/0?1:0):(a=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),i),o=h+i,u=Math.round(n*Math.pow(2,t-h)-Math.pow(2,t))):(o=0,u=Math.round(n/Math.pow(2,1-i-t))));const m=[];for(f=t;f;f-=1)m.push(u%2?1:0),u=Math.floor(u/2);for(f=e;f;f-=1)m.push(o%2?1:0),o=Math.floor(o/2);m.push(a?1:0),m.reverse();const _=m.join("");let v="";for(f=0;f<64;f+=8){let E=parseInt(_.substr(f,8),2).toString(16);E.length===1&&(E="0"+E),v=v+E}return v.toLowerCase()},IL=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},xL=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},NL=new RegExp("^-?(0*)\\d{1,10}$"),OL=-2147483648,DL=2147483647,zw=function(n){if(NL.test(n)){const e=Number(n);if(e>=OL&&e<=DL)return e}return null},Cc=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Un("Exception was thrown by user callback.",t),e},Math.floor(0))}},ML=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Qu=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,kn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Un(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(cn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Un(e)}}class Td{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Td.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy="5",bC="v",AC="s",CC="r",RC="f",IC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,xC="ls",NC="p",Yg="ac",OC="websocket",DC="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,t,i,a,o=!1,u="",h=!1,f=!1,m=null){this.secure=t,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=o,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=f,this.emulatorOptions=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ta.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ta.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function LL(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function PC(n,e,t){he(typeof e=="string","typeof type must == string"),he(typeof t=="object","typeof params must == object");let i;if(e===OC)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===DC)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);LL(n)&&(t.ns=n.namespace);const a=[];return ei(t,(o,u)=>{a.push(o+"="+u)}),i+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(){this.counters_={}}incrementCounter(e,t=1){kr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return rN(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg={},ng={};function py(n){const e=n.toString();return tg[e]||(tg[e]=new VL),tg[e]}function UL(n,e){const t=n.toString();return ng[t]||(ng[t]=e()),ng[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&Cc(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw="start",BL="close",jL="pLPCommand",FL="pRTLPCB",kC="id",LC="pw",VC="ser",HL="cb",qL="seg",GL="ts",$L="d",YL="dframe",UC=1870,zC=30,KL=UC-zC,QL=25e3,WL=3e4;class zo{constructor(e,t,i,a,o,u,h){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=a,this.authToken=o,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ac(e),this.stats_=py(t),this.urlFn=f=>(this.appCheckToken&&(f[Yg]=this.appCheckToken),PC(t,DC,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new zL(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(WL)),CL(()=>{if(this.isClosed_)return;this.scriptTagHolder=new my((...o)=>{const[u,h,f,m,_]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,u===Bw)this.id=h,this.password=f;else if(u===BL)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+u)},(...o)=>{const[u,h]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const i={};i[Bw]="t",i[VC]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[HL]=this.scriptTagHolder.uniqueCallbackIdentifier),i[bC]=fy,this.transportSessionId&&(i[AC]=this.transportSessionId),this.lastSessionId&&(i[xC]=this.lastSessionId),this.applicationId&&(i[NC]=this.applicationId),this.appCheckToken&&(i[Yg]=this.appCheckToken),typeof location<"u"&&location.hostname&&IC.test(location.hostname)&&(i[CC]=RC);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){zo.forceAllow_=!0}static forceDisallow(){zo.forceDisallow_=!0}static isAvailable(){return zo.forceAllow_?!0:!zo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!IL()&&!xL()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=en(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=$S(t),a=wC(i,KL);for(let o=0;o<a.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[YL]="t",i[kC]=e,i[LC]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=en(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class my{constructor(e,t,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=SL(),window[jL+this.uniqueCallbackIdentifier]=e,window[FL+this.uniqueCallbackIdentifier]=t,this.myIFrame=my.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){cn("frame writing exception"),h.stack&&cn(h.stack),cn(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||cn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[kC]=this.myID,e[LC]=this.myPW,e[VC]=this.currentSerial;let t=this.urlFn(e),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+zC+i.length<=UC;){const u=this.pendingSegs.shift();i=i+"&"+qL+a+"="+u.seg+"&"+GL+a+"="+u.ts+"&"+$L+a+"="+u.d,a++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},a=setTimeout(i,Math.floor(QL)),o=()=>{clearTimeout(a),i()};this.addTag(e,o)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{cn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=16384,ZL=45e3;let $d=null;typeof MozWebSocket<"u"?$d=MozWebSocket:typeof WebSocket<"u"&&($d=WebSocket);class ui{constructor(e,t,i,a,o,u,h){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ac(this.connId),this.stats_=py(t),this.connURL=ui.connectionURL_(t,u,h,a,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,a,o){const u={};return u[bC]=fy,typeof location<"u"&&location.hostname&&IC.test(location.hostname)&&(u[CC]=RC),t&&(u[AC]=t),i&&(u[xC]=i),a&&(u[Yg]=a),o&&(u[NC]=o),PC(e,OC,u)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ta.set("previous_websocket_failure",!0);try{let i;gN(),this.mySock=new $d(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){ui.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&$d!==null&&!ui.forceDisallow_}static previouslyFailed(){return Ta.isInMemoryStorage||Ta.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ta.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=tc(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(he(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=en(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=wC(t,XL);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ZL))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ui.responsesRequiredToBeHealthy=2;ui.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{static get ALL_TRANSPORTS(){return[zo,ui]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=ui&&ui.isAvailable();let i=t&&!ui.previouslyFailed();if(e.webSocketOnly&&(t||Un("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ui];else{const a=this.transports_=[];for(const o of hc.ALL_TRANSPORTS)o&&o.isAvailable()&&a.push(o);hc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}hc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL=6e4,eV=5e3,tV=10*1024,nV=100*1024,ig="t",jw="d",iV="s",Fw="r",rV="e",Hw="o",qw="a",Gw="n",$w="p",sV="h";class aV{constructor(e,t,i,a,o,u,h,f,m,_){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=o,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=f,this.onKill_=m,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ac("c:"+this.id+":"),this.transportManager_=new hc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=Qu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>nV?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>tV?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ig in e){const t=e[ig];t===qw?this.upgradeIfSecondaryHealthy_():t===Fw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===Hw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Mu("t",e),i=Mu("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:$w,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:qw,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Gw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Mu("t",e),i=Mu("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Mu(ig,e);if(jw in e){const i=e[jw];if(t===sV){const a=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(t===Gw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===iV?this.onConnectionShutdown_(i):t===Fw?this.onReset_(i):t===rV?$g("Server Error: "+i):t===Hw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$g("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),fy!==i&&Un("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),Qu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(JL))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(eV))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:$w,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ta.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{put(e,t,i,a){}merge(e,t,i,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.allowedEvents_=e,this.listeners_={},he(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const a=this.getInitialEvent(e);a&&t.apply(i,a)}off(e,t,i){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let o=0;o<a.length;o++)if(a[o].callback===t&&(!i||i===a[o].context)){a.splice(o,1);return}}validateEventType_(e){he(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd extends jC{static getInstance(){return new Yd}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!E_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return he(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw=32,Kw=768;class ct{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function st(){return new ct("")}function He(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ds(n){return n.pieces_.length-n.pieceNum_}function ut(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ct(n.pieces_,e)}function FC(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function oV(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function HC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function qC(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ct(e,0)}function Kt(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof ct)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&t.push(i[a])}return new ct(t,0)}function Ue(n){return n.pieceNum_>=n.pieces_.length}function Jn(n,e){const t=He(n),i=He(e);if(t===null)return e;if(t===i)return Jn(ut(n),ut(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function GC(n,e){if(Ds(n)!==Ds(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function hi(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Ds(n)>Ds(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class lV{constructor(e,t){this.errorPrefix_=t,this.parts_=HC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=uf(this.parts_[i]);$C(this)}}function uV(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=uf(e),$C(n)}function cV(n){const e=n.parts_.pop();n.byteLength_-=uf(e),n.parts_.length>0&&(n.byteLength_-=1)}function $C(n){if(n.byteLength_>Kw)throw new Error(n.errorPrefix_+"has a key path longer than "+Kw+" bytes ("+n.byteLength_+").");if(n.parts_.length>Yw)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Yw+") or object contains a cycle "+va(n))}function va(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy extends jC{static getInstance(){return new gy}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return he(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=1e3,hV=60*5*1e3,Qw=30*1e3,dV=1.3,fV=3e4,pV="server_kill",Ww=3;class Cr extends BC{constructor(e,t,i,a,o,u,h,f){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=o,this.authTokenProvider_=u,this.appCheckTokenProvider_=h,this.authOverride_=f,this.id=Cr.nextPersistentConnectionId_++,this.log_=Ac("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Pu,this.maxReconnectDelay_=hV,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");gy.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Yd.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const a=++this.requestNumber_,o={r:a,a:e,b:t};this.log_(en(o)),he(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const t=new __,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:u=>{const h=u.d;u.s==="ok"?t.resolve(h):t.reject(h)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),t.promise}listen(e,t,i,a){this.initConnection_();const o=e._queryIdentifier,u=e._path.toString();this.log_("Listen called for "+u+" "+o),this.listens.has(u)||this.listens.set(u,new Map),he(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),he(!this.listens.get(u).has(o),"listen() called twice for same path/queryId.");const h={onComplete:a,hashFn:t,query:e,tag:i};this.listens.get(u).set(o,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),a=t._queryIdentifier;this.log_("Listen on "+i+" for "+a);const o={p:i},u="q";e.tag&&(o.q=t._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(u,o,h=>{const f=h.d,m=h.s;Cr.warnOnListenWarnings_(f,t),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",h),m!=="ok"&&this.removeListen_(i,a),e.onComplete&&e.onComplete(m,f))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&kr(e,"w")){const i=Ko(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();Un(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||bN(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Qw)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=SN(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,a=>{const o=a.s,u=a.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,u))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),he(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,t)}sendUnlisten_(e,t,i,a){this.log_("Unlisten on "+e+" for "+t);const o={p:e},u="n";a&&(o.q=i,o.t=a),this.sendRequest(u,o)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,a){const o={p:t,d:i};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,u=>{a&&setTimeout(()=>{a(u.s,u.d)},Math.floor(0))})}put(e,t,i,a){this.putInternal("p",e,t,i,a)}merge(e,t,i,a){this.putInternal("m",e,t,i,a)}putInternal(e,t,i,a,o){this.initConnection_();const u={p:t,d:i};o!==void 0&&(u.h=o),this.outstandingPuts_.push({action:e,request:u,onComplete:a}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(o.s,o.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+en(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):$g("Unrecognized action received from server: "+en(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){he(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pu,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Pu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>fV&&(this.reconnectDelay_=Pu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*dV)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+Cr.nextConnectionId_++,o=this.lastSessionId;let u=!1,h=null;const f=function(){h?h.close():(u=!0,i())},m=function(v){he(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(v)};this.realtime_={close:f,sendRequest:m};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[v,E]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);u?cn("getToken() completed but was canceled"):(cn("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=E&&E.token,h=new aV(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,A=>{Un(A+" ("+this.repoInfo_.toString()+")"),this.interrupt(pV)},o))}catch(v){this.log_("Failed to get token: "+v),u||(this.repoInfo_.nodeAdmin&&Un(v),f())}}}interrupt(e){cn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){cn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],yg(this.interruptReasons_)&&(this.reconnectDelay_=Pu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(o=>dy(o)).join("$"):i="default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,t){const i=new ct(e).toString();let a;if(this.listens.has(i)){const o=this.listens.get(i);a=o.get(t),o.delete(t),o.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,t){cn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ww&&(this.reconnectDelay_=Qw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){cn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ww&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+yC.replace(/\./g,"-")]=1,E_()?e["framework.cordova"]=1:JS()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Yd.getInstance().currentlyOnline();return yg(this.interruptReasons_)&&e}}Cr.nextPersistentConnectionId_=0;Cr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new qe(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new qe(rl,e),a=new qe(rl,t);return this.compare(i,a)!==0}minPost(){return qe.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad;class YC extends Of{static get __EMPTY_NODE(){return ad}static set __EMPTY_NODE(e){ad=e}compare(e,t){return yl(e.name,t.name)}isDefinedOn(e){throw hl("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return qe.MIN}maxPost(){return new qe(Ia,ad)}makePost(e,t){return he(typeof e=="string","KeyIndex indexValue must always be a string."),new qe(e,ad)}toString(){return".key"}}const $o=new YC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t,i,a,o=null){this.isReverse_=a,this.resultGenerator_=o,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?i(e.key,t):1,a&&(u*=-1),u<0)this.isReverse_?e=e.left:e=e.right;else if(u===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Yt{constructor(e,t,i,a,o){this.key=e,this.value=t,this.color=i??Yt.RED,this.left=a??bn.EMPTY_NODE,this.right=o??bn.EMPTY_NODE}copy(e,t,i,a,o){return new Yt(e??this.key,t??this.value,i??this.color,a??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const o=i(e,a.key);return o<0?a=a.copy(null,null,null,a.left.insert(e,t,i),null):o===0?a=a.copy(null,t,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return bn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,a;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return bn.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Yt.RED=!0;Yt.BLACK=!1;class mV{copy(e,t,i,a,o){return this}insert(e,t,i){return new Yt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class bn{constructor(e,t=bn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new bn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Yt.BLACK,null,null))}remove(e){return new bn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Yt.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,a=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new od(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new od(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new od(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new od(this.root_,null,this.comparator_,!0,e)}}bn.EMPTY_NODE=new mV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(n,e){return yl(n.name,e.name)}function _y(n,e){return yl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kg;function _V(n){Kg=n}const KC=function(n){return typeof n=="number"?"number:"+SC(n):"string:"+n},QC=function(n){if(n.isLeafNode()){const e=n.val();he(typeof e=="string"||typeof e=="number"||typeof e=="object"&&kr(e,".sv"),"Priority must be a string or number.")}else he(n===Kg||n.isEmpty(),"priority of unexpected type.");he(n===Kg||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xw;class Gt{static set __childrenNodeConstructor(e){Xw=e}static get __childrenNodeConstructor(){return Xw}constructor(e,t=Gt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,he(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),QC(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Gt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Gt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Ue(e)?this:He(e)===".priority"?this.priorityNode_:Gt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:Gt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=He(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(he(i!==".priority"||Ds(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Gt.__childrenNodeConstructor.EMPTY_NODE.updateChild(ut(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+KC(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=SC(this.value_):e+=this.value_,this.lazyHash_=EC(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Gt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Gt.__childrenNodeConstructor?-1:(he(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,a=Gt.VALUE_TYPE_ORDER.indexOf(t),o=Gt.VALUE_TYPE_ORDER.indexOf(i);return he(a>=0,"Unknown leaf type: "+t),he(o>=0,"Unknown leaf type: "+i),a===o?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}Gt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WC,XC;function yV(n){WC=n}function vV(n){XC=n}class EV extends Of{compare(e,t){const i=e.node.getPriority(),a=t.node.getPriority(),o=i.compareTo(a);return o===0?yl(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return qe.MIN}maxPost(){return new qe(Ia,new Gt("[PRIORITY-POST]",XC))}makePost(e,t){const i=WC(e);return new qe(t,new Gt("[PRIORITY-POST]",i))}toString(){return".priority"}}const dn=new EV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV=Math.log(2);class wV{constructor(e){const t=o=>parseInt(Math.log(o)/TV,10),i=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const a=i(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Kd=function(n,e,t,i){n.sort(e);const a=function(f,m){const _=m-f;let v,E;if(_===0)return null;if(_===1)return v=n[f],E=t?t(v):v,new Yt(E,v.node,Yt.BLACK,null,null);{const A=parseInt(_/2,10)+f,S=a(f,A),D=a(A+1,m);return v=n[A],E=t?t(v):v,new Yt(E,v.node,Yt.BLACK,S,D)}},o=function(f){let m=null,_=null,v=n.length;const E=function(S,D){const L=v-S,M=v;v-=S;const H=a(L+1,M),j=n[L],ee=t?t(j):j;A(new Yt(ee,j.node,D,null,H))},A=function(S){m?(m.left=S,m=S):(_=S,m=S)};for(let S=0;S<f.count;++S){const D=f.nextBitIsOne(),L=Math.pow(2,f.count-(S+1));D?E(L,Yt.BLACK):(E(L,Yt.BLACK),E(L,Yt.RED))}return _},u=new wV(n.length),h=o(u);return new bn(i||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rg;const Mo={};class Sr{static get Default(){return he(Mo&&dn,"ChildrenNode.ts has not been loaded"),rg=rg||new Sr({".priority":Mo},{".priority":dn}),rg}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=Ko(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof bn?t:null}hasIndex(e){return kr(this.indexSet_,e.toString())}addIndex(e,t){he(e!==$o,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const o=t.getIterator(qe.Wrap);let u=o.getNext();for(;u;)a=a||e.isDefinedOn(u.node),i.push(u),u=o.getNext();let h;a?h=Kd(i,e.getCompare()):h=Mo;const f=e.toString(),m=Object.assign({},this.indexSet_);m[f]=e;const _=Object.assign({},this.indexes_);return _[f]=h,new Sr(_,m)}addToIndexes(e,t){const i=Cd(this.indexes_,(a,o)=>{const u=Ko(this.indexSet_,o);if(he(u,"Missing index implementation for "+o),a===Mo)if(u.isDefinedOn(e.node)){const h=[],f=t.getIterator(qe.Wrap);let m=f.getNext();for(;m;)m.name!==e.name&&h.push(m),m=f.getNext();return h.push(e),Kd(h,u.getCompare())}else return Mo;else{const h=t.get(e.name);let f=a;return h&&(f=f.remove(new qe(e.name,h))),f.insert(e,e.node)}});return new Sr(i,this.indexSet_)}removeFromIndexes(e,t){const i=Cd(this.indexes_,a=>{if(a===Mo)return a;{const o=t.get(e.name);return o?a.remove(new qe(e.name,o)):a}});return new Sr(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ku;class Qe{static get EMPTY_NODE(){return ku||(ku=new Qe(new bn(_y),null,Sr.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&QC(this.priorityNode_),this.children_.isEmpty()&&he(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ku}updatePriority(e){return this.children_.isEmpty()?this:new Qe(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?ku:t}}getChild(e){const t=He(e);return t===null?this:this.getImmediateChild(t).getChild(ut(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(he(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new qe(e,t);let a,o;t.isEmpty()?(a=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,t),o=this.indexMap_.addToIndexes(i,this.children_));const u=a.isEmpty()?ku:this.priorityNode_;return new Qe(a,u,o)}}updateChild(e,t){const i=He(e);if(i===null)return t;{he(He(e)!==".priority"||Ds(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(ut(e),t);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,a=0,o=!0;if(this.forEachChild(dn,(u,h)=>{t[u]=h.val(e),i++,o&&Qe.INTEGER_REGEXP_.test(u)?a=Math.max(a,Number(u)):o=!1}),!e&&o&&a<2*i){const u=[];for(const h in t)u[h]=t[h];return u}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+KC(this.getPriority().val())+":"),this.forEachChild(dn,(t,i)=>{const a=i.hash();a!==""&&(e+=":"+t+":"+a)}),this.lazyHash_=e===""?"":EC(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const a=this.resolveIndex_(i);if(a){const o=a.getPredecessorKey(new qe(e,t));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new qe(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new qe(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>t(a.name,a.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,qe.Wrap);let o=a.peek();for(;o!=null&&t.compare(o,e)<0;)a.getNext(),o=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,qe.Wrap);let o=a.peek();for(;o!=null&&t.compare(o,e)>0;)a.getNext(),o=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Rc?-1:0}withIndex(e){if(e===$o||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Qe(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===$o||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(dn),a=t.getIterator(dn);let o=i.getNext(),u=a.getNext();for(;o&&u;){if(o.name!==u.name||!o.node.equals(u.node))return!1;o=i.getNext(),u=a.getNext()}return o===null&&u===null}else return!1;else return!1}}resolveIndex_(e){return e===$o?null:this.indexMap_.get(e.toString())}}Qe.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class SV extends Qe{constructor(){super(new bn(_y),Qe.EMPTY_NODE,Sr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Qe.EMPTY_NODE}isEmpty(){return!1}}const Rc=new SV;Object.defineProperties(qe,{MIN:{value:new qe(rl,Qe.EMPTY_NODE)},MAX:{value:new qe(Ia,Rc)}});YC.__EMPTY_NODE=Qe.EMPTY_NODE;Gt.__childrenNodeConstructor=Qe;_V(Rc);vV(Rc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=!0;function hn(n,e=null){if(n===null)return Qe.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),he(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new Gt(t,hn(e))}if(!(n instanceof Array)&&bV){const t=[];let i=!1;if(ei(n,(u,h)=>{if(u.substring(0,1)!=="."){const f=hn(h);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),t.push(new qe(u,f)))}}),t.length===0)return Qe.EMPTY_NODE;const o=Kd(t,gV,u=>u.name,_y);if(i){const u=Kd(t,dn.getCompare());return new Qe(o,hn(e),new Sr({".priority":u},{".priority":dn}))}else return new Qe(o,hn(e),Sr.Default)}else{let t=Qe.EMPTY_NODE;return ei(n,(i,a)=>{if(kr(n,i)&&i.substring(0,1)!=="."){const o=hn(a);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(i,o))}}),t.updatePriority(hn(e))}}yV(hn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV extends Of{constructor(e){super(),this.indexPath_=e,he(!Ue(e)&&He(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),a=this.extractChild(t.node),o=i.compareTo(a);return o===0?yl(e.name,t.name):o}makePost(e,t){const i=hn(e),a=Qe.EMPTY_NODE.updateChild(this.indexPath_,i);return new qe(t,a)}maxPost(){const e=Qe.EMPTY_NODE.updateChild(this.indexPath_,Rc);return new qe(Ia,e)}toString(){return HC(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV extends Of{compare(e,t){const i=e.node.compareTo(t.node);return i===0?yl(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return qe.MIN}maxPost(){return qe.MAX}makePost(e,t){const i=hn(e);return new qe(t,i)}toString(){return".value"}}const RV=new CV;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IV(n){return{type:"value",snapshotNode:n}}function xV(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function NV(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Zw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function OV(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=dn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return he(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return he(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rl}hasEnd(){return this.endSet_}getIndexEndValue(){return he(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return he(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ia}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return he(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===dn}copy(){const e=new yy;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Jw(n){const e={};if(n.isDefault())return e;let t;if(n.index_===dn?t="$priority":n.index_===RV?t="$value":n.index_===$o?t="$key":(he(n.index_ instanceof AV,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=en(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=en(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+en(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=en(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+en(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function eS(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==dn&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd extends BC{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(he(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,a){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=Ac("p:rest:"),this.listens_={}}listen(e,t,i,a){const o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);const u=Qd.getListenId_(e,i),h={};this.listens_[u]=h;const f=Jw(e._queryParams);this.restRequest_(o+".json",f,(m,_)=>{let v=_;if(m===404&&(v=null,m=null),m===null&&this.onDataUpdate_(o,v,!1,i),Ko(this.listens_,u)===h){let E;m?m===401?E="permission_denied":E="rest_error:"+m:E="ok",a(E,null)}})}unlisten(e,t){const i=Qd.getListenId_(e,t);delete this.listens_[i]}get(e){const t=Jw(e._queryParams),i=e._path.toString(),a=new __;return this.restRequest_(i+".json",t,(o,u)=>{let h=u;o===404&&(h=null,o=null),o===null?(this.onDataUpdate_(i,h,!1,null),a.resolve(h)):a.reject(new Error(h))}),a.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,o])=>{a&&a.accessToken&&(t.auth=a.accessToken),o&&o.token&&(t.ac=o.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+dl(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(i&&h.readyState===4){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let f=null;if(h.status>=200&&h.status<300){try{f=tc(h.responseText)}catch{Un("Failed to parse JSON response for "+u+": "+h.responseText)}i(null,f)}else h.status!==401&&h.status!==404&&Un("Got unsuccessful REST response for "+u+" Status: "+h.status),i(h.status);i=null}},h.open("GET",u,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(){this.rootNode_=Qe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(){return{value:null,children:new Map}}function ZC(n,e,t){if(Ue(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=He(e);n.children.has(i)||n.children.set(i,Wd());const a=n.children.get(i);e=ut(e),ZC(a,e,t)}}function Qg(n,e,t){n.value!==null?t(e,n.value):MV(n,(i,a)=>{const o=new ct(e.toString()+"/"+i);Qg(a,o,t)})}function MV(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ei(this.last_,(i,a)=>{t[i]=t[i]-a}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=10*1e3,kV=30*1e3,LV=5*60*1e3;class VV{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new PV(e);const i=tS+(kV-tS)*Math.random();Qu(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;ei(e,(a,o)=>{o>0&&kr(this.statsToReport_,a)&&(t[a]=o,i=!0)}),i&&this.server_.reportStats(t),Qu(this.reportStats_.bind(this),Math.floor(Math.random()*2*LV))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ki;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ki||(ki={}));function JC(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function e1(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function t1(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=ki.ACK_USER_WRITE,this.source=JC()}operationForChild(e){if(Ue(this.path)){if(this.affectedTree.value!=null)return he(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ct(e));return new Xd(st(),t,this.revert)}}else return he(He(this.path)===e,"operationForChild called for unrelated child."),new Xd(ut(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=ki.OVERWRITE}operationForChild(e){return Ue(this.path)?new xa(this.source,st(),this.snap.getImmediateChild(e)):new xa(this.source,ut(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=ki.MERGE}operationForChild(e){if(Ue(this.path)){const t=this.children.subtree(new ct(e));return t.isEmpty()?null:t.value?new xa(this.source,st(),t.value):new dc(this.source,st(),t)}else return he(He(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new dc(this.source,ut(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ue(e))return this.isFullyInitialized()&&!this.filtered_;const t=He(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function UV(n,e,t,i){const a=[],o=[];return e.forEach(u=>{u.type==="child_changed"&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&o.push(OV(u.childName,u.snapshotNode))}),Lu(n,a,"child_removed",e,i,t),Lu(n,a,"child_added",e,i,t),Lu(n,a,"child_moved",o,i,t),Lu(n,a,"child_changed",e,i,t),Lu(n,a,"value",e,i,t),a}function Lu(n,e,t,i,a,o){const u=i.filter(h=>h.type===t);u.sort((h,f)=>BV(n,h,f)),u.forEach(h=>{const f=zV(n,h,o);a.forEach(m=>{m.respondsTo(h.type)&&e.push(m.createEvent(f,n.query_))})})}function zV(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function BV(n,e,t){if(e.childName==null||t.childName==null)throw hl("Should only compare child_ events.");const i=new qe(e.childName,e.snapshotNode),a=new qe(t.childName,t.snapshotNode);return n.index_.compare(i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(n,e){return{eventCache:n,serverCache:e}}function Wu(n,e,t,i){return n1(new vy(e,t,i),n.serverCache)}function i1(n,e,t,i){return n1(n.eventCache,new vy(e,t,i))}function Wg(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Na(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sg;const jV=()=>(sg||(sg=new bn(RL)),sg);class lt{static fromObject(e){let t=new lt(null);return ei(e,(i,a)=>{t=t.set(new ct(i),a)}),t}constructor(e,t=jV()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:st(),value:this.value};if(Ue(e))return null;{const i=He(e),a=this.children.get(i);if(a!==null){const o=a.findRootMostMatchingPathAndValue(ut(e),t);return o!=null?{path:Kt(new ct(i),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ue(e))return this;{const t=He(e),i=this.children.get(t);return i!==null?i.subtree(ut(e)):new lt(null)}}set(e,t){if(Ue(e))return new lt(t,this.children);{const i=He(e),o=(this.children.get(i)||new lt(null)).set(ut(e),t),u=this.children.insert(i,o);return new lt(this.value,u)}}remove(e){if(Ue(e))return this.children.isEmpty()?new lt(null):new lt(null,this.children);{const t=He(e),i=this.children.get(t);if(i){const a=i.remove(ut(e));let o;return a.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,a),this.value===null&&o.isEmpty()?new lt(null):new lt(this.value,o)}else return this}}get(e){if(Ue(e))return this.value;{const t=He(e),i=this.children.get(t);return i?i.get(ut(e)):null}}setTree(e,t){if(Ue(e))return t;{const i=He(e),o=(this.children.get(i)||new lt(null)).setTree(ut(e),t);let u;return o.isEmpty()?u=this.children.remove(i):u=this.children.insert(i,o),new lt(this.value,u)}}fold(e){return this.fold_(st(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((a,o)=>{i[a]=o.fold_(Kt(e,a),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,st(),t)}findOnPath_(e,t,i){const a=this.value?i(t,this.value):!1;if(a)return a;if(Ue(e))return null;{const o=He(e),u=this.children.get(o);return u?u.findOnPath_(ut(e),Kt(t,o),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,st(),t)}foreachOnPath_(e,t,i){if(Ue(e))return this;{this.value&&i(t,this.value);const a=He(e),o=this.children.get(a);return o?o.foreachOnPath_(ut(e),Kt(t,a),i):new lt(null)}}foreach(e){this.foreach_(st(),e)}foreach_(e,t){this.children.inorderTraversal((i,a)=>{a.foreach_(Kt(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this.writeTree_=e}static empty(){return new di(new lt(null))}}function Xu(n,e,t){if(Ue(e))return new di(new lt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const a=i.path;let o=i.value;const u=Jn(a,e);return o=o.updateChild(u,t),new di(n.writeTree_.set(a,o))}else{const a=new lt(t),o=n.writeTree_.setTree(e,a);return new di(o)}}}function nS(n,e,t){let i=n;return ei(t,(a,o)=>{i=Xu(i,Kt(e,a),o)}),i}function iS(n,e){if(Ue(e))return di.empty();{const t=n.writeTree_.setTree(e,new lt(null));return new di(t)}}function Xg(n,e){return Va(n,e)!=null}function Va(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Jn(t.path,e)):null}function rS(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(dn,(i,a)=>{e.push(new qe(i,a))}):n.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&e.push(new qe(i,a.value))}),e}function Ss(n,e){if(Ue(e))return n;{const t=Va(n,e);return t!=null?new di(new lt(t)):new di(n.writeTree_.subtree(e))}}function Zg(n){return n.writeTree_.isEmpty()}function sl(n,e){return r1(st(),n.writeTree_,e)}function r1(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((a,o)=>{a===".priority"?(he(o.value!==null,"Priority writes must always be leaf nodes"),i=o.value):t=r1(Kt(n,a),o,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Kt(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(n,e){return c1(e,n)}function FV(n,e,t,i,a){he(i>n.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:a}),a&&(n.visibleWrites=Xu(n.visibleWrites,e,t)),n.lastWriteId=i}function HV(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function qV(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);he(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let a=i.visible,o=!1,u=n.allWrites.length-1;for(;a&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&GV(h,i.path)?a=!1:hi(i.path,h.path)&&(o=!0)),u--}if(a){if(o)return $V(n),!0;if(i.snap)n.visibleWrites=iS(n.visibleWrites,i.path);else{const h=i.children;ei(h,f=>{n.visibleWrites=iS(n.visibleWrites,Kt(i.path,f))})}return!0}else return!1}function GV(n,e){if(n.snap)return hi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&hi(Kt(n.path,t),e))return!0;return!1}function $V(n){n.visibleWrites=a1(n.allWrites,YV,st()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function YV(n){return n.visible}function a1(n,e,t){let i=di.empty();for(let a=0;a<n.length;++a){const o=n[a];if(e(o)){const u=o.path;let h;if(o.snap)hi(t,u)?(h=Jn(t,u),i=Xu(i,h,o.snap)):hi(u,t)&&(h=Jn(u,t),i=Xu(i,st(),o.snap.getChild(h)));else if(o.children){if(hi(t,u))h=Jn(t,u),i=nS(i,h,o.children);else if(hi(u,t))if(h=Jn(u,t),Ue(h))i=nS(i,st(),o.children);else{const f=Ko(o.children,He(h));if(f){const m=f.getChild(ut(h));i=Xu(i,st(),m)}}}else throw hl("WriteRecord should have .snap or .children")}}return i}function o1(n,e,t,i,a){if(!i&&!a){const o=Va(n.visibleWrites,e);if(o!=null)return o;{const u=Ss(n.visibleWrites,e);if(Zg(u))return t;if(t==null&&!Xg(u,st()))return null;{const h=t||Qe.EMPTY_NODE;return sl(u,h)}}}else{const o=Ss(n.visibleWrites,e);if(!a&&Zg(o))return t;if(!a&&t==null&&!Xg(o,st()))return null;{const u=function(m){return(m.visible||a)&&(!i||!~i.indexOf(m.writeId))&&(hi(m.path,e)||hi(e,m.path))},h=a1(n.allWrites,u,e),f=t||Qe.EMPTY_NODE;return sl(h,f)}}}function KV(n,e,t){let i=Qe.EMPTY_NODE;const a=Va(n.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(dn,(o,u)=>{i=i.updateImmediateChild(o,u)}),i;if(t){const o=Ss(n.visibleWrites,e);return t.forEachChild(dn,(u,h)=>{const f=sl(Ss(o,new ct(u)),h);i=i.updateImmediateChild(u,f)}),rS(o).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}else{const o=Ss(n.visibleWrites,e);return rS(o).forEach(u=>{i=i.updateImmediateChild(u.name,u.node)}),i}}function QV(n,e,t,i,a){he(i||a,"Either existingEventSnap or existingServerSnap must exist");const o=Kt(e,t);if(Xg(n.visibleWrites,o))return null;{const u=Ss(n.visibleWrites,o);return Zg(u)?a.getChild(t):sl(u,a.getChild(t))}}function WV(n,e,t,i){const a=Kt(e,t),o=Va(n.visibleWrites,a);if(o!=null)return o;if(i.isCompleteForChild(t)){const u=Ss(n.visibleWrites,a);return sl(u,i.getNode().getImmediateChild(t))}else return null}function XV(n,e){return Va(n.visibleWrites,e)}function ZV(n,e,t,i,a,o,u){let h;const f=Ss(n.visibleWrites,e),m=Va(f,st());if(m!=null)h=m;else if(t!=null)h=sl(f,t);else return[];if(h=h.withIndex(u),!h.isEmpty()&&!h.isLeafNode()){const _=[],v=u.getCompare(),E=o?h.getReverseIteratorFrom(i,u):h.getIteratorFrom(i,u);let A=E.getNext();for(;A&&_.length<a;)v(A,i)!==0&&_.push(A),A=E.getNext();return _}else return[]}function JV(){return{visibleWrites:di.empty(),allWrites:[],lastWriteId:-1}}function Jg(n,e,t,i){return o1(n.writeTree,n.treePath,e,t,i)}function l1(n,e){return KV(n.writeTree,n.treePath,e)}function sS(n,e,t,i){return QV(n.writeTree,n.treePath,e,t,i)}function Zd(n,e){return XV(n.writeTree,Kt(n.treePath,e))}function e4(n,e,t,i,a,o){return ZV(n.writeTree,n.treePath,e,t,i,a,o)}function Ey(n,e,t){return WV(n.writeTree,n.treePath,e,t)}function u1(n,e){return c1(Kt(n.treePath,e),n.writeTree)}function c1(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;he(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),he(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const o=a.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(i,Zw(i,e.snapshotNode,a.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(i,NV(i,a.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(i,xV(i,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(i,Zw(i,e.snapshotNode,a.oldSnap));else throw hl("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const h1=new n4;class Ty{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new vy(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ey(this.writes_,e,i)}}getChildAfterChild(e,t,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Na(this.viewCache_),o=e4(this.writes_,a,t,1,i,e);return o.length===0?null:o[0]}}function i4(n,e){he(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),he(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function r4(n,e,t,i,a){const o=new t4;let u,h;if(t.type===ki.OVERWRITE){const m=t;m.source.fromUser?u=e_(n,e,m.path,m.snap,i,a,o):(he(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered()&&!Ue(m.path),u=Jd(n,e,m.path,m.snap,i,a,h,o))}else if(t.type===ki.MERGE){const m=t;m.source.fromUser?u=a4(n,e,m.path,m.children,i,a,o):(he(m.source.fromServer,"Unknown source."),h=m.source.tagged||e.serverCache.isFiltered(),u=t_(n,e,m.path,m.children,i,a,h,o))}else if(t.type===ki.ACK_USER_WRITE){const m=t;m.revert?u=u4(n,e,m.path,i,a,o):u=o4(n,e,m.path,m.affectedTree,i,a,o)}else if(t.type===ki.LISTEN_COMPLETE)u=l4(n,e,t.path,i,o);else throw hl("Unknown operation type: "+t.type);const f=o.getChanges();return s4(e,u,f),{viewCache:u,changes:f}}function s4(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),o=Wg(n);(t.length>0||!n.eventCache.isFullyInitialized()||a&&!i.getNode().equals(o)||!i.getNode().getPriority().equals(o.getPriority()))&&t.push(IV(Wg(e)))}}function d1(n,e,t,i,a,o){const u=e.eventCache;if(Zd(i,t)!=null)return e;{let h,f;if(Ue(t))if(he(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const m=Na(e),_=m instanceof Qe?m:Qe.EMPTY_NODE,v=l1(i,_);h=n.filter.updateFullNode(e.eventCache.getNode(),v,o)}else{const m=Jg(i,Na(e));h=n.filter.updateFullNode(e.eventCache.getNode(),m,o)}else{const m=He(t);if(m===".priority"){he(Ds(t)===1,"Can't have a priority with additional path components");const _=u.getNode();f=e.serverCache.getNode();const v=sS(i,t,_,f);v!=null?h=n.filter.updatePriority(_,v):h=u.getNode()}else{const _=ut(t);let v;if(u.isCompleteForChild(m)){f=e.serverCache.getNode();const E=sS(i,t,u.getNode(),f);E!=null?v=u.getNode().getImmediateChild(m).updateChild(_,E):v=u.getNode().getImmediateChild(m)}else v=Ey(i,m,e.serverCache);v!=null?h=n.filter.updateChild(u.getNode(),m,v,_,a,o):h=u.getNode()}}return Wu(e,h,u.isFullyInitialized()||Ue(t),n.filter.filtersNodes())}}function Jd(n,e,t,i,a,o,u,h){const f=e.serverCache;let m;const _=u?n.filter:n.filter.getIndexedFilter();if(Ue(t))m=_.updateFullNode(f.getNode(),i,null);else if(_.filtersNodes()&&!f.isFiltered()){const A=f.getNode().updateChild(t,i);m=_.updateFullNode(f.getNode(),A,null)}else{const A=He(t);if(!f.isCompleteForPath(t)&&Ds(t)>1)return e;const S=ut(t),L=f.getNode().getImmediateChild(A).updateChild(S,i);A===".priority"?m=_.updatePriority(f.getNode(),L):m=_.updateChild(f.getNode(),A,L,S,h1,null)}const v=i1(e,m,f.isFullyInitialized()||Ue(t),_.filtersNodes()),E=new Ty(a,v,o);return d1(n,v,t,a,E,h)}function e_(n,e,t,i,a,o,u){const h=e.eventCache;let f,m;const _=new Ty(a,e,o);if(Ue(t))m=n.filter.updateFullNode(e.eventCache.getNode(),i,u),f=Wu(e,m,!0,n.filter.filtersNodes());else{const v=He(t);if(v===".priority")m=n.filter.updatePriority(e.eventCache.getNode(),i),f=Wu(e,m,h.isFullyInitialized(),h.isFiltered());else{const E=ut(t),A=h.getNode().getImmediateChild(v);let S;if(Ue(E))S=i;else{const D=_.getCompleteChild(v);D!=null?FC(E)===".priority"&&D.getChild(qC(E)).isEmpty()?S=D:S=D.updateChild(E,i):S=Qe.EMPTY_NODE}if(A.equals(S))f=e;else{const D=n.filter.updateChild(h.getNode(),v,S,E,_,u);f=Wu(e,D,h.isFullyInitialized(),n.filter.filtersNodes())}}}return f}function aS(n,e){return n.eventCache.isCompleteForChild(e)}function a4(n,e,t,i,a,o,u){let h=e;return i.foreach((f,m)=>{const _=Kt(t,f);aS(e,He(_))&&(h=e_(n,h,_,m,a,o,u))}),i.foreach((f,m)=>{const _=Kt(t,f);aS(e,He(_))||(h=e_(n,h,_,m,a,o,u))}),h}function oS(n,e,t){return t.foreach((i,a)=>{e=e.updateChild(i,a)}),e}function t_(n,e,t,i,a,o,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f=e,m;Ue(t)?m=i:m=new lt(null).setTree(t,i);const _=e.serverCache.getNode();return m.children.inorderTraversal((v,E)=>{if(_.hasChild(v)){const A=e.serverCache.getNode().getImmediateChild(v),S=oS(n,A,E);f=Jd(n,f,new ct(v),S,a,o,u,h)}}),m.children.inorderTraversal((v,E)=>{const A=!e.serverCache.isCompleteForChild(v)&&E.value===null;if(!_.hasChild(v)&&!A){const S=e.serverCache.getNode().getImmediateChild(v),D=oS(n,S,E);f=Jd(n,f,new ct(v),D,a,o,u,h)}}),f}function o4(n,e,t,i,a,o,u){if(Zd(a,t)!=null)return e;const h=e.serverCache.isFiltered(),f=e.serverCache;if(i.value!=null){if(Ue(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return Jd(n,e,t,f.getNode().getChild(t),a,o,h,u);if(Ue(t)){let m=new lt(null);return f.getNode().forEachChild($o,(_,v)=>{m=m.set(new ct(_),v)}),t_(n,e,t,m,a,o,h,u)}else return e}else{let m=new lt(null);return i.foreach((_,v)=>{const E=Kt(t,_);f.isCompleteForPath(E)&&(m=m.set(_,f.getNode().getChild(E)))}),t_(n,e,t,m,a,o,h,u)}}function l4(n,e,t,i,a){const o=e.serverCache,u=i1(e,o.getNode(),o.isFullyInitialized()||Ue(t),o.isFiltered());return d1(n,u,t,i,h1,a)}function u4(n,e,t,i,a,o){let u;if(Zd(i,t)!=null)return e;{const h=new Ty(i,e,a),f=e.eventCache.getNode();let m;if(Ue(t)||He(t)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=Jg(i,Na(e));else{const v=e.serverCache.getNode();he(v instanceof Qe,"serverChildren would be complete if leaf node"),_=l1(i,v)}_=_,m=n.filter.updateFullNode(f,_,o)}else{const _=He(t);let v=Ey(i,_,e.serverCache);v==null&&e.serverCache.isCompleteForChild(_)&&(v=f.getImmediateChild(_)),v!=null?m=n.filter.updateChild(f,_,v,ut(t),h,o):e.eventCache.getNode().hasChild(_)?m=n.filter.updateChild(f,_,Qe.EMPTY_NODE,ut(t),h,o):m=f,m.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Jg(i,Na(e)),u.isLeafNode()&&(m=n.filter.updateFullNode(m,u,o)))}return u=e.serverCache.isFullyInitialized()||Zd(i,st())!=null,Wu(e,m,u,n.filter.filtersNodes())}}function c4(n,e){const t=Na(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ue(e)&&!t.getImmediateChild(He(e)).isEmpty())?t.getChild(e):null}function lS(n,e,t,i){e.type===ki.MERGE&&e.source.queryId!==null&&(he(Na(n.viewCache_),"We should always have a full cache before handling merges"),he(Wg(n.viewCache_),"Missing event cache, even though we have a server cache"));const a=n.viewCache_,o=r4(n.processor_,a,e,t,i);return i4(n.processor_,o.viewCache),he(o.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,h4(n,o.changes,o.viewCache.eventCache.getNode())}function h4(n,e,t,i){const a=n.eventRegistrations_;return UV(n.eventGenerator_,e,t,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uS;function d4(n){he(!uS,"__referenceConstructor has already been defined"),uS=n}function wy(n,e,t,i){const a=e.source.queryId;if(a!==null){const o=n.views.get(a);return he(o!=null,"SyncTree gave us an op for an invalid query."),lS(o,e,t,i)}else{let o=[];for(const u of n.views.values())o=o.concat(lS(u,e,t,i));return o}}function Sy(n,e){let t=null;for(const i of n.views.values())t=t||c4(i,e);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cS;function f4(n){he(!cS,"__referenceConstructor has already been defined"),cS=n}class hS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new lt(null),this.pendingWriteTree_=JV(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function p4(n,e,t,i,a){return FV(n.pendingWriteTree_,e,t,i,a),a?Mf(n,new xa(JC(),e,t)):[]}function Bo(n,e,t=!1){const i=HV(n.pendingWriteTree_,e);if(qV(n.pendingWriteTree_,e)){let o=new lt(null);return i.snap!=null?o=o.set(st(),!0):ei(i.children,u=>{o=o.set(new ct(u),!0)}),Mf(n,new Xd(i.path,o,t))}else return[]}function Df(n,e,t){return Mf(n,new xa(e1(),e,t))}function m4(n,e,t){const i=lt.fromObject(t);return Mf(n,new dc(e1(),e,i))}function g4(n,e,t,i){const a=g1(n,i);if(a!=null){const o=_1(a),u=o.path,h=o.queryId,f=Jn(u,e),m=new xa(t1(h),f,t);return y1(n,u,m)}else return[]}function _4(n,e,t,i){const a=g1(n,i);if(a){const o=_1(a),u=o.path,h=o.queryId,f=Jn(u,e),m=lt.fromObject(t),_=new dc(t1(h),f,m);return y1(n,u,_)}else return[]}function f1(n,e,t){const a=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(u,h)=>{const f=Jn(u,e),m=Sy(h,f);if(m)return m});return o1(a,e,o,t,!0)}function Mf(n,e){return p1(e,n.syncPointTree_,null,s1(n.pendingWriteTree_,st()))}function p1(n,e,t,i){if(Ue(n.path))return m1(n,e,t,i);{const a=e.get(st());t==null&&a!=null&&(t=Sy(a,st()));let o=[];const u=He(n.path),h=n.operationForChild(u),f=e.children.get(u);if(f&&h){const m=t?t.getImmediateChild(u):null,_=u1(i,u);o=o.concat(p1(h,f,m,_))}return a&&(o=o.concat(wy(a,n,i,t))),o}}function m1(n,e,t,i){const a=e.get(st());t==null&&a!=null&&(t=Sy(a,st()));let o=[];return e.children.inorderTraversal((u,h)=>{const f=t?t.getImmediateChild(u):null,m=u1(i,u),_=n.operationForChild(u);_&&(o=o.concat(m1(_,h,f,m)))}),a&&(o=o.concat(wy(a,n,i,t))),o}function g1(n,e){return n.tagToQueryMap.get(e)}function _1(n){const e=n.indexOf("$");return he(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ct(n.substr(0,e))}}function y1(n,e,t){const i=n.syncPointTree_.get(e);he(i,"Missing sync point for query tag that we're tracking");const a=s1(n.pendingWriteTree_,e);return wy(i,t,a,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new by(t)}node(){return this.node_}}class Ay{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Kt(this.path_,e);return new Ay(this.syncTree_,t)}node(){return f1(this.syncTree_,this.path_)}}const y4=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},dS=function(n,e,t){if(!n||typeof n!="object")return n;if(he(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return v4(n[".sv"],e,t);if(typeof n[".sv"]=="object")return E4(n[".sv"],e);he(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},v4=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:he(!1,"Unexpected server value: "+n)}},E4=function(n,e,t){n.hasOwnProperty("increment")||he(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&he(!1,"Unexpected increment value: "+i);const a=e.node();if(he(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const u=a.getValue();return typeof u!="number"?i:u+i},T4=function(n,e,t,i){return Cy(e,new Ay(t,n),i)},w4=function(n,e,t){return Cy(n,new by(e),t)};function Cy(n,e,t){const i=n.getPriority().val(),a=dS(i,e.getImmediateChild(".priority"),t);let o;if(n.isLeafNode()){const u=n,h=dS(u.getValue(),e,t);return h!==u.getValue()||a!==u.getPriority().val()?new Gt(h,hn(a)):n}else{const u=n;return o=u,a!==u.getPriority().val()&&(o=o.updatePriority(new Gt(a))),u.forEachChild(dn,(h,f)=>{const m=Cy(f,e.getImmediateChild(h),t);m!==f&&(o=o.updateImmediateChild(h,m))}),o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Iy(n,e){let t=e instanceof ct?e:new ct(e),i=n,a=He(t);for(;a!==null;){const o=Ko(i.node.children,a)||{children:{},childCount:0};i=new Ry(a,i,o),t=ut(t),a=He(t)}return i}function vl(n){return n.node.value}function v1(n,e){n.node.value=e,n_(n)}function E1(n){return n.node.childCount>0}function S4(n){return vl(n)===void 0&&!E1(n)}function Pf(n,e){ei(n.node.children,(t,i)=>{e(new Ry(t,n,i))})}function T1(n,e,t,i){t&&e(n),Pf(n,a=>{T1(a,e,!0)})}function b4(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Ic(n){return new ct(n.parent===null?n.name:Ic(n.parent)+"/"+n.name)}function n_(n){n.parent!==null&&A4(n.parent,n.name,n)}function A4(n,e,t){const i=S4(t),a=kr(n.node.children,e);i&&a?(delete n.node.children[e],n.node.childCount--,n_(n)):!i&&!a&&(n.node.children[e]=t.node,n.node.childCount++,n_(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=/[\[\].#$\/\u0000-\u001F\u007F]/,R4=/[\[\].#$\u0000-\u001F\u007F]/,ag=10*1024*1024,w1=function(n){return typeof n=="string"&&n.length!==0&&!C4.test(n)},I4=function(n){return typeof n=="string"&&n.length!==0&&!R4.test(n)},x4=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),I4(n)},S1=function(n,e,t){const i=t instanceof ct?new lV(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+va(i));if(typeof e=="function")throw new Error(n+"contains a function "+va(i)+" with contents = "+e.toString());if(TC(e))throw new Error(n+"contains "+e.toString()+" "+va(i));if(typeof e=="string"&&e.length>ag/3&&uf(e)>ag)throw new Error(n+"contains a string greater than "+ag+" utf8 bytes "+va(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,o=!1;if(ei(e,(u,h)=>{if(u===".value")a=!0;else if(u!==".priority"&&u!==".sv"&&(o=!0,!w1(u)))throw new Error(n+" contains an invalid key ("+u+") "+va(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);uV(i,u),S1(n,h,i),cV(i)}),a&&o)throw new Error(n+' contains ".value" child '+va(i)+" in addition to actual children.")}},N4=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!w1(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!x4(t))throw new Error(xN(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function D4(n,e){let t=null;for(let i=0;i<e.length;i++){const a=e[i],o=a.getPath();t!==null&&!GC(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(a)}t&&n.eventLists_.push(t)}function Ua(n,e,t){D4(n,t),M4(n,i=>hi(i,e)||hi(e,i))}function M4(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const a=n.eventLists_[i];if(a){const o=a.path;e(o)?(P4(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function P4(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();Ku&&cn("event: "+t.toString()),Cc(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4="repo_interrupt",L4=25;class V4{constructor(e,t,i,a){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new O4,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Wd(),this.transactionQueueTree_=new Ry,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function U4(n,e,t){if(n.stats_=py(n.repoInfo_),n.forceRestClient_||ML())n.server_=new Qd(n.repoInfo_,(i,a,o,u)=>{fS(n,i,a,o,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>pS(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{en(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Cr(n.repoInfo_,e,(i,a,o,u)=>{fS(n,i,a,o,u)},i=>{pS(n,i)},i=>{B4(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=UL(n.repoInfo_,()=>new VV(n.stats_,n.server_)),n.infoData_=new DV,n.infoSyncTree_=new hS({startListening:(i,a,o,u)=>{let h=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(h=Df(n.infoSyncTree_,i._path,f),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),xy(n,"connected",!1),n.serverSyncTree_=new hS({startListening:(i,a,o,u)=>(n.server_.listen(i,o,a,(h,f)=>{const m=u(h,f);Ua(n.eventQueue_,i._path,m)}),[]),stopListening:(i,a)=>{n.server_.unlisten(i,a)}})}function z4(n){const t=n.infoData_.getNode(new ct(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function b1(n){return y4({timestamp:z4(n)})}function fS(n,e,t,i,a){n.dataUpdateCount++;const o=new ct(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(a)if(i){const f=Cd(t,m=>hn(m));u=_4(n.serverSyncTree_,o,f,a)}else{const f=hn(t);u=g4(n.serverSyncTree_,o,f,a)}else if(i){const f=Cd(t,m=>hn(m));u=m4(n.serverSyncTree_,o,f)}else{const f=hn(t);u=Df(n.serverSyncTree_,o,f)}let h=o;u.length>0&&(h=Oy(n,o)),Ua(n.eventQueue_,h,u)}function pS(n,e){xy(n,"connected",e),e===!1&&F4(n)}function B4(n,e){ei(e,(t,i)=>{xy(n,t,i)})}function xy(n,e,t){const i=new ct("/.info/"+e),a=hn(t);n.infoData_.updateSnapshot(i,a);const o=Df(n.infoSyncTree_,i,a);Ua(n.eventQueue_,i,o)}function j4(n){return n.nextWriteId_++}function F4(n){A1(n,"onDisconnectEvents");const e=b1(n),t=Wd();Qg(n.onDisconnect_,st(),(a,o)=>{const u=T4(a,o,n.serverSyncTree_,e);ZC(t,a,u)});let i=[];Qg(t,st(),(a,o)=>{i=i.concat(Df(n.serverSyncTree_,a,o));const u=$4(n,a);Oy(n,u)}),n.onDisconnect_=Wd(),Ua(n.eventQueue_,st(),i)}function H4(n){n.persistentConnection_&&n.persistentConnection_.interrupt(k4)}function A1(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),cn(t,...e)}function C1(n,e,t){return f1(n.serverSyncTree_,e,t)||Qe.EMPTY_NODE}function Ny(n,e=n.transactionQueueTree_){if(e||kf(n,e),vl(e)){const t=I1(n,e);he(t.length>0,"Sending zero length transaction queue"),t.every(a=>a.status===0)&&q4(n,Ic(e),t)}else E1(e)&&Pf(e,t=>{Ny(n,t)})}function q4(n,e,t){const i=t.map(m=>m.currentWriteId),a=C1(n,e,i);let o=a;const u=a.hash();for(let m=0;m<t.length;m++){const _=t[m];he(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const v=Jn(e,_.path);o=o.updateChild(v,_.currentOutputSnapshotRaw)}const h=o.val(!0),f=e;n.server_.put(f.toString(),h,m=>{A1(n,"transaction put response",{path:f.toString(),status:m});let _=[];if(m==="ok"){const v=[];for(let E=0;E<t.length;E++)t[E].status=2,_=_.concat(Bo(n.serverSyncTree_,t[E].currentWriteId)),t[E].onComplete&&v.push(()=>t[E].onComplete(null,!0,t[E].currentOutputSnapshotResolved)),t[E].unwatcher();kf(n,Iy(n.transactionQueueTree_,e)),Ny(n,n.transactionQueueTree_),Ua(n.eventQueue_,e,_);for(let E=0;E<v.length;E++)Cc(v[E])}else{if(m==="datastale")for(let v=0;v<t.length;v++)t[v].status===3?t[v].status=4:t[v].status=0;else{Un("transaction at "+f.toString()+" failed: "+m);for(let v=0;v<t.length;v++)t[v].status=4,t[v].abortReason=m}Oy(n,e)}},u)}function Oy(n,e){const t=R1(n,e),i=Ic(t),a=I1(n,t);return G4(n,a,i),i}function G4(n,e,t){if(e.length===0)return;const i=[];let a=[];const u=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const f=e[h],m=Jn(t,f.path);let _=!1,v;if(he(m!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)_=!0,v=f.abortReason,a=a.concat(Bo(n.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=L4)_=!0,v="maxretry",a=a.concat(Bo(n.serverSyncTree_,f.currentWriteId,!0));else{const E=C1(n,f.path,u);f.currentInputSnapshot=E;const A=e[h].update(E.val());if(A!==void 0){S1("transaction failed: Data returned ",A,f.path);let S=hn(A);typeof A=="object"&&A!=null&&kr(A,".priority")||(S=S.updatePriority(E.getPriority()));const L=f.currentWriteId,M=b1(n),H=w4(S,E,M);f.currentOutputSnapshotRaw=S,f.currentOutputSnapshotResolved=H,f.currentWriteId=j4(n),u.splice(u.indexOf(L),1),a=a.concat(p4(n.serverSyncTree_,f.path,H,f.currentWriteId,f.applyLocally)),a=a.concat(Bo(n.serverSyncTree_,L,!0))}else _=!0,v="nodata",a=a.concat(Bo(n.serverSyncTree_,f.currentWriteId,!0))}Ua(n.eventQueue_,t,a),a=[],_&&(e[h].status=2,function(E){setTimeout(E,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(v==="nodata"?i.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):i.push(()=>e[h].onComplete(new Error(v),!1,null))))}kf(n,n.transactionQueueTree_);for(let h=0;h<i.length;h++)Cc(i[h]);Ny(n,n.transactionQueueTree_)}function R1(n,e){let t,i=n.transactionQueueTree_;for(t=He(e);t!==null&&vl(i)===void 0;)i=Iy(i,t),e=ut(e),t=He(e);return i}function I1(n,e){const t=[];return x1(n,e,t),t.sort((i,a)=>i.order-a.order),t}function x1(n,e,t){const i=vl(e);if(i)for(let a=0;a<i.length;a++)t.push(i[a]);Pf(e,a=>{x1(n,a,t)})}function kf(n,e){const t=vl(e);if(t){let i=0;for(let a=0;a<t.length;a++)t[a].status!==2&&(t[i]=t[a],i++);t.length=i,v1(e,t.length>0?t:void 0)}Pf(e,i=>{kf(n,i)})}function $4(n,e){const t=Ic(R1(n,e)),i=Iy(n.transactionQueueTree_,e);return b4(i,a=>{og(n,a)}),og(n,i),T1(i,a=>{og(n,a)}),t}function og(n,e){const t=vl(e);if(t){const i=[];let a=[],o=-1;for(let u=0;u<t.length;u++)t[u].status===3||(t[u].status===1?(he(o===u-1,"All SENT items should be at beginning of queue."),o=u,t[u].status=3,t[u].abortReason="set"):(he(t[u].status===0,"Unexpected transaction status in abort"),t[u].unwatcher(),a=a.concat(Bo(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&i.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));o===-1?v1(e,void 0):t.length=o+1,Ua(n.eventQueue_,Ic(e),a);for(let u=0;u<i.length;u++)Cc(i[u])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let a=t[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function K4(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Un(`Invalid query segment '${t}' in query '${n}'`)}return e}const mS=function(n,e){const t=Q4(n),i=t.namespace;t.domain==="firebase.com"&&Dr(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Dr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||AL();const a=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new MC(t.host,t.secure,i,a,e,"",i!==t.subdomain),path:new ct(t.pathString)}},Q4=function(n){let e="",t="",i="",a="",o="",u=!0,h="https",f=443;if(typeof n=="string"){let m=n.indexOf("//");m>=0&&(h=n.substring(0,m-1),n=n.substring(m+2));let _=n.indexOf("/");_===-1&&(_=n.length);let v=n.indexOf("?");v===-1&&(v=n.length),e=n.substring(0,Math.min(_,v)),_<v&&(a=Y4(n.substring(_,v)));const E=K4(n.substring(Math.min(n.length,v)));m=e.indexOf(":"),m>=0?(u=h==="https"||h==="wss",f=parseInt(e.substring(m+1),10)):m=e.length;const A=e.slice(0,m);if(A.toLowerCase()==="localhost")t="localhost";else if(A.split(".").length<=2)t=A;else{const S=e.indexOf(".");i=e.substring(0,S).toLowerCase(),t=e.substring(S+1),o=i}"ns"in E&&(o=E.ns)}return{host:e,port:f,domain:t,subdomain:i,secure:u,scheme:h,pathString:a,namespace:o}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,t,i,a){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=a}get key(){return Ue(this._path)?null:FC(this._path)}get ref(){return new El(this._repo,this._path)}get _queryIdentifier(){const e=eS(this._queryParams),t=dy(e);return t==="{}"?"default":t}get _queryObject(){return eS(this._queryParams)}isEqual(e){if(e=zt(e),!(e instanceof Dy))return!1;const t=this._repo===e._repo,i=GC(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return t&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+oV(this._path)}}class El extends Dy{constructor(e,t){super(e,t,new yy,!1)}get parent(){const e=qC(this._path);return e===null?null:new El(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}d4(El);f4(El);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="FIREBASE_DATABASE_EMULATOR_HOST",i_={};let X4=!1;function Z4(n,e,t,i){const a=e.lastIndexOf(":"),o=e.substring(0,a),u=Da(o);n.repoInfo_=new MC(e,u,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function J4(n,e,t,i,a){let o=i||n.options.databaseURL;o===void 0&&(n.options.projectId||Dr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let u=mS(o,a),h=u.repoInfo,f;typeof process<"u"&&kw&&(f=kw[W4]),f?(o=`http://${f}?ns=${h.namespace}`,u=mS(o,a),h=u.repoInfo):u.repoInfo.secure;const m=new kL(n.name,n.options,e);N4("Invalid Firebase Database URL",u),Ue(u.path)||Dr("Database URL must point to the root of a Firebase Database (not including a child path).");const _=t6(h,n,m,new PL(n,t));return new n6(_,n)}function e6(n,e){const t=i_[e];(!t||t[n.key]!==n)&&Dr(`Database ${e}(${n.repoInfo_}) has already been deleted.`),H4(n),delete t[n.key]}function t6(n,e,t,i){let a=i_[e.name];a||(a={},i_[e.name]=a);let o=a[n.toURLString()];return o&&Dr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new V4(n,X4,t,i),a[n.toURLString()]=o,o}class n6{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(U4(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new El(this._repo,st())),this._rootInternal}_delete(){return this._rootInternal!==null&&(e6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Dr("Cannot call "+e+" on a deleted database.")}}function i6(n=w_(),e){const t=hf(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=QS("database");i&&r6(t,...i)}return t}function r6(n,e,t,i={}){n=zt(n),n._checkNotDeleted("useEmulator");const a=`${e}:${t}`,o=n._repoInternal;if(n._instanceStarted){if(a===n._repoInternal.repoInfo_.host&&bs(i,o.repoInfo_.emulatorOptions))return;Dr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let u;if(o.repoInfo_.nodeAdmin)i.mockUserToken&&Dr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new Td(Td.OWNER);else if(i.mockUserToken){const h=typeof i.mockUserToken=="string"?i.mockUserToken:ZS(i.mockUserToken,n.app.options.projectId);u=new Td(h)}Da(e)&&(y_(e),v_("Database",!0)),Z4(o,a,i,u)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(n){vL(Ma),wa(new As("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return J4(i,a,o,t)},"PUBLIC").setMultipleInstances(!0)),Vi(Lw,Vw,n),Vi(Lw,Vw,"esm2017")}Cr.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};Cr.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};s6();const a6={apiKey:"AIzaSyBxPvWkOKgztI0WWXgwS-UC1P-yCHk1RYw",authDomain:"book-app-5ac5e.firebaseapp.com",databaseURL:"https://book-app-5ac5e-default-rtdb.firebaseio.com",projectId:"book-app-5ac5e",storageBucket:"book-app-5ac5e.appspot.com",messagingSenderId:"887453576180",appId:"1:887453576180:web:ca6fed8e023bc53ed667a1"},My=ib(a6),Zu=jb(My),al=nL(My);i6(My);function o6({title:n,titleId:e,...t},i){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const l6=B.forwardRef(o6);function u6({title:n,titleId:e,...t},i){return B.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":e},t),n?B.createElement("title",{id:e},n):null,B.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const gS=B.forwardRef(u6);function _S(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function Py(n,e){n===void 0&&(n={}),e===void 0&&(e={});const t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof n[i]>"u"?n[i]=e[i]:_S(e[i])&&_S(n[i])&&Object.keys(e[i]).length>0&&Py(n[i],e[i])})}const N1={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function za(){const n=typeof document<"u"?document:{};return Py(n,N1),n}const c6={document:N1,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function yn(){const n=typeof window<"u"?window:{};return Py(n,c6),n}function h6(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function d6(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function r_(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function ef(){return Date.now()}function f6(n){const e=yn();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function p6(n,e){e===void 0&&(e="x");const t=yn();let i,a,o;const u=f6(n);return t.WebKitCSSMatrix?(a=u.transform||u.webkitTransform,a.split(",").length>6&&(a=a.split(", ").map(h=>h.replace(",",".")).join(", ")),o=new t.WebKitCSSMatrix(a==="none"?"":a)):(o=u.MozTransform||u.OTransform||u.MsTransform||u.msTransform||u.transform||u.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=o.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?a=o.m41:i.length===16?a=parseFloat(i[12]):a=parseFloat(i[4])),e==="y"&&(t.WebKitCSSMatrix?a=o.m42:i.length===16?a=parseFloat(i[13]):a=parseFloat(i[5])),a||0}function ld(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function m6(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function Pn(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const i=t<0||arguments.length<=t?void 0:arguments[t];if(i!=null&&!m6(i)){const a=Object.keys(Object(i)).filter(o=>e.indexOf(o)<0);for(let o=0,u=a.length;o<u;o+=1){const h=a[o],f=Object.getOwnPropertyDescriptor(i,h);f!==void 0&&f.enumerable&&(ld(n[h])&&ld(i[h])?i[h].__swiper__?n[h]=i[h]:Pn(n[h],i[h]):!ld(n[h])&&ld(i[h])?(n[h]={},i[h].__swiper__?n[h]=i[h]:Pn(n[h],i[h])):n[h]=i[h])}}}return n}function ud(n,e,t){n.style.setProperty(e,t)}function O1(n){let{swiper:e,targetPosition:t,side:i}=n;const a=yn(),o=-e.translate;let u=null,h;const f=e.params.speed;e.wrapperEl.style.scrollSnapType="none",a.cancelAnimationFrame(e.cssModeFrameID);const m=t>o?"next":"prev",_=(E,A)=>m==="next"&&E>=A||m==="prev"&&E<=A,v=()=>{h=new Date().getTime(),u===null&&(u=h);const E=Math.max(Math.min((h-u)/f,1),0),A=.5-Math.cos(E*Math.PI)/2;let S=o+A*(t-o);if(_(S,t)&&(S=t),e.wrapperEl.scrollTo({[i]:S}),_(S,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[i]:S})}),a.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=a.requestAnimationFrame(v)};v()}function Li(n,e){e===void 0&&(e="");const t=yn(),i=[...n.children];return t.HTMLSlotElement&&n instanceof HTMLSlotElement&&i.push(...n.assignedElements()),e?i.filter(a=>a.matches(e)):i}function g6(n,e){const t=[e];for(;t.length>0;){const i=t.shift();if(n===i)return!0;t.push(...i.children,...i.shadowRoot?i.shadowRoot.children:[],...i.assignedElements?i.assignedElements():[])}}function _6(n,e){const t=yn();let i=e.contains(n);return!i&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(i=[...e.assignedElements()].includes(n),i||(i=g6(n,e))),i}function tf(n){try{console.warn(n);return}catch{}}function nf(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:h6(e)),t}function y6(n,e){const t=[];for(;n.previousElementSibling;){const i=n.previousElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function v6(n,e){const t=[];for(;n.nextElementSibling;){const i=n.nextElementSibling;e?i.matches(e)&&t.push(i):t.push(i),n=i}return t}function _s(n,e){return yn().getComputedStyle(n,null).getPropertyValue(e)}function yS(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function E6(n,e){const t=[];let i=n.parentElement;for(;i;)t.push(i),i=i.parentElement;return t}function vS(n,e,t){const i=yn();return n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(i.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function yr(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}function ES(n,e){e===void 0&&(e=""),typeof trustedTypes<"u"?n.innerHTML=trustedTypes.createPolicy("html",{createHTML:t=>t}).createHTML(e):n.innerHTML=e}let lg;function T6(){const n=yn(),e=za();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function D1(){return lg||(lg=T6()),lg}let ug;function w6(n){let{userAgent:e}=n===void 0?{}:n;const t=D1(),i=yn(),a=i.navigator.platform,o=e||i.navigator.userAgent,u={ios:!1,android:!1},h=i.screen.width,f=i.screen.height,m=o.match(/(Android);?[\s\/]+([\d.]+)?/);let _=o.match(/(iPad).*OS\s([\d_]+)/);const v=o.match(/(iPod)(.*OS\s([\d_]+))?/),E=!_&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),A=a==="Win32";let S=a==="MacIntel";const D=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!_&&S&&t.touch&&D.indexOf(`${h}x${f}`)>=0&&(_=o.match(/(Version)\/([\d.]+)/),_||(_=[0,1,"13_0_0"]),S=!1),m&&!A&&(u.os="android",u.android=!0),(_||E||v)&&(u.os="ios",u.ios=!0),u}function M1(n){return n===void 0&&(n={}),ug||(ug=w6(n)),ug}let cg;function S6(){const n=yn(),e=M1();let t=!1;function i(){const h=n.navigator.userAgent.toLowerCase();return h.indexOf("safari")>=0&&h.indexOf("chrome")<0&&h.indexOf("android")<0}if(i()){const h=String(n.navigator.userAgent);if(h.includes("Version/")){const[f,m]=h.split("Version/")[1].split(" ")[0].split(".").map(_=>Number(_));t=f<16||f===16&&m<2}}const a=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),o=i(),u=o||a&&e.ios;return{isSafari:t||o,needPerspectiveFix:t,need3dFix:u,isWebView:a}}function P1(){return cg||(cg=S6()),cg}function b6(n){let{swiper:e,on:t,emit:i}=n;const a=yn();let o=null,u=null;const h=()=>{!e||e.destroyed||!e.initialized||(i("beforeResize"),i("resize"))},f=()=>{!e||e.destroyed||!e.initialized||(o=new ResizeObserver(v=>{u=a.requestAnimationFrame(()=>{const{width:E,height:A}=e;let S=E,D=A;v.forEach(L=>{let{contentBoxSize:M,contentRect:H,target:j}=L;j&&j!==e.el||(S=H?H.width:(M[0]||M).inlineSize,D=H?H.height:(M[0]||M).blockSize)}),(S!==E||D!==A)&&h()})}),o.observe(e.el))},m=()=>{u&&a.cancelAnimationFrame(u),o&&o.unobserve&&e.el&&(o.unobserve(e.el),o=null)},_=()=>{!e||e.destroyed||!e.initialized||i("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof a.ResizeObserver<"u"){f();return}a.addEventListener("resize",h),a.addEventListener("orientationchange",_)}),t("destroy",()=>{m(),a.removeEventListener("resize",h),a.removeEventListener("orientationchange",_)})}function A6(n){let{swiper:e,extendParams:t,on:i,emit:a}=n;const o=[],u=yn(),h=function(_,v){v===void 0&&(v={});const E=u.MutationObserver||u.WebkitMutationObserver,A=new E(S=>{if(e.__preventObserver__)return;if(S.length===1){a("observerUpdate",S[0]);return}const D=function(){a("observerUpdate",S[0])};u.requestAnimationFrame?u.requestAnimationFrame(D):u.setTimeout(D,0)});A.observe(_,{attributes:typeof v.attributes>"u"?!0:v.attributes,childList:e.isElement||(typeof v.childList>"u"?!0:v).childList,characterData:typeof v.characterData>"u"?!0:v.characterData}),o.push(A)},f=()=>{if(e.params.observer){if(e.params.observeParents){const _=E6(e.hostEl);for(let v=0;v<_.length;v+=1)h(_[v])}h(e.hostEl,{childList:e.params.observeSlideChildren}),h(e.wrapperEl,{attributes:!1})}},m=()=>{o.forEach(_=>{_.disconnect()}),o.splice(0,o.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),i("init",f),i("destroy",m)}var C6={on(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;const a=t?"unshift":"push";return n.split(" ").forEach(o=>{i.eventsListeners[o]||(i.eventsListeners[o]=[]),i.eventsListeners[o][a](e)}),i},once(n,e,t){const i=this;if(!i.eventsListeners||i.destroyed||typeof e!="function")return i;function a(){i.off(n,a),a.__emitterProxy&&delete a.__emitterProxy;for(var o=arguments.length,u=new Array(o),h=0;h<o;h++)u[h]=arguments[h];e.apply(i,u)}return a.__emitterProxy=e,i.on(n,a,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const i=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[i](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(i=>{typeof e>"u"?t.eventsListeners[i]=[]:t.eventsListeners[i]&&t.eventsListeners[i].forEach((a,o)=>{(a===e||a.__emitterProxy&&a.__emitterProxy===e)&&t.eventsListeners[i].splice(o,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,i;for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return typeof o[0]=="string"||Array.isArray(o[0])?(e=o[0],t=o.slice(1,o.length),i=n):(e=o[0].events,t=o[0].data,i=o[0].context||n),t.unshift(i),(Array.isArray(e)?e:e.split(" ")).forEach(f=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(m=>{m.apply(i,[f,...t])}),n.eventsListeners&&n.eventsListeners[f]&&n.eventsListeners[f].forEach(m=>{m.apply(i,t)})}),n}};function R6(){const n=this;let e,t;const i=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=i.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=i.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(_s(i,"padding-left")||0,10)-parseInt(_s(i,"padding-right")||0,10),t=t-parseInt(_s(i,"padding-top")||0,10)-parseInt(_s(i,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function I6(){const n=this;function e(x,k){return parseFloat(x.getPropertyValue(n.getDirectionLabel(k))||0)}const t=n.params,{wrapperEl:i,slidesEl:a,size:o,rtlTranslate:u,wrongRTL:h}=n,f=n.virtual&&t.virtual.enabled,m=f?n.virtual.slides.length:n.slides.length,_=Li(a,`.${n.params.slideClass}, swiper-slide`),v=f?n.virtual.slides.length:_.length;let E=[];const A=[],S=[];let D=t.slidesOffsetBefore;typeof D=="function"&&(D=t.slidesOffsetBefore.call(n));let L=t.slidesOffsetAfter;typeof L=="function"&&(L=t.slidesOffsetAfter.call(n));const M=n.snapGrid.length,H=n.slidesGrid.length;let j=t.spaceBetween,ee=-D,Z=0,ue=0;if(typeof o>"u")return;typeof j=="string"&&j.indexOf("%")>=0?j=parseFloat(j.replace("%",""))/100*o:typeof j=="string"&&(j=parseFloat(j)),n.virtualSize=-j,_.forEach(x=>{u?x.style.marginLeft="":x.style.marginRight="",x.style.marginBottom="",x.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(ud(i,"--swiper-centered-offset-before",""),ud(i,"--swiper-centered-offset-after",""));const P=t.grid&&t.grid.rows>1&&n.grid;P?n.grid.initSlides(_):n.grid&&n.grid.unsetSlides();let R;const I=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(x=>typeof t.breakpoints[x].slidesPerView<"u").length>0;for(let x=0;x<v;x+=1){R=0;let k;if(_[x]&&(k=_[x]),P&&n.grid.updateSlide(x,k,_),!(_[x]&&_s(k,"display")==="none")){if(t.slidesPerView==="auto"){I&&(_[x].style[n.getDirectionLabel("width")]="");const U=getComputedStyle(k),N=k.style.transform,$e=k.style.webkitTransform;if(N&&(k.style.transform="none"),$e&&(k.style.webkitTransform="none"),t.roundLengths)R=n.isHorizontal()?vS(k,"width"):vS(k,"height");else{const Le=e(U,"width"),$=e(U,"padding-left"),oe=e(U,"padding-right"),de=e(U,"margin-left"),ge=e(U,"margin-right"),O=U.getPropertyValue("box-sizing");if(O&&O==="border-box")R=Le+de+ge;else{const{clientWidth:te,offsetWidth:ae}=k;R=Le+$+oe+de+ge+(ae-te)}}N&&(k.style.transform=N),$e&&(k.style.webkitTransform=$e),t.roundLengths&&(R=Math.floor(R))}else R=(o-(t.slidesPerView-1)*j)/t.slidesPerView,t.roundLengths&&(R=Math.floor(R)),_[x]&&(_[x].style[n.getDirectionLabel("width")]=`${R}px`);_[x]&&(_[x].swiperSlideSize=R),S.push(R),t.centeredSlides?(ee=ee+R/2+Z/2+j,Z===0&&x!==0&&(ee=ee-o/2-j),x===0&&(ee=ee-o/2-j),Math.abs(ee)<1/1e3&&(ee=0),t.roundLengths&&(ee=Math.floor(ee)),ue%t.slidesPerGroup===0&&E.push(ee),A.push(ee)):(t.roundLengths&&(ee=Math.floor(ee)),(ue-Math.min(n.params.slidesPerGroupSkip,ue))%n.params.slidesPerGroup===0&&E.push(ee),A.push(ee),ee=ee+R+j),n.virtualSize+=R+j,Z=R,ue+=1}}if(n.virtualSize=Math.max(n.virtualSize,o)+L,u&&h&&(t.effect==="slide"||t.effect==="coverflow")&&(i.style.width=`${n.virtualSize+j}px`),t.setWrapperSize&&(i.style[n.getDirectionLabel("width")]=`${n.virtualSize+j}px`),P&&n.grid.updateWrapperSize(R,E),!t.centeredSlides){const x=[];for(let k=0;k<E.length;k+=1){let U=E[k];t.roundLengths&&(U=Math.floor(U)),E[k]<=n.virtualSize-o&&x.push(U)}E=x,Math.floor(n.virtualSize-o)-Math.floor(E[E.length-1])>1&&E.push(n.virtualSize-o)}if(f&&t.loop){const x=S[0]+j;if(t.slidesPerGroup>1){const k=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),U=x*t.slidesPerGroup;for(let N=0;N<k;N+=1)E.push(E[E.length-1]+U)}for(let k=0;k<n.virtual.slidesBefore+n.virtual.slidesAfter;k+=1)t.slidesPerGroup===1&&E.push(E[E.length-1]+x),A.push(A[A.length-1]+x),n.virtualSize+=x}if(E.length===0&&(E=[0]),j!==0){const x=n.isHorizontal()&&u?"marginLeft":n.getDirectionLabel("marginRight");_.filter((k,U)=>!t.cssMode||t.loop?!0:U!==_.length-1).forEach(k=>{k.style[x]=`${j}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let x=0;S.forEach(U=>{x+=U+(j||0)}),x-=j;const k=x>o?x-o:0;E=E.map(U=>U<=0?-D:U>k?k+L:U)}if(t.centerInsufficientSlides){let x=0;S.forEach(U=>{x+=U+(j||0)}),x-=j;const k=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(x+k<o){const U=(o-x-k)/2;E.forEach((N,$e)=>{E[$e]=N-U}),A.forEach((N,$e)=>{A[$e]=N+U})}}if(Object.assign(n,{slides:_,snapGrid:E,slidesGrid:A,slidesSizesGrid:S}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){ud(i,"--swiper-centered-offset-before",`${-E[0]}px`),ud(i,"--swiper-centered-offset-after",`${n.size/2-S[S.length-1]/2}px`);const x=-n.snapGrid[0],k=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(U=>U+x),n.slidesGrid=n.slidesGrid.map(U=>U+k)}if(v!==m&&n.emit("slidesLengthChange"),E.length!==M&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),A.length!==H&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!f&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const x=`${t.containerModifierClass}backface-hidden`,k=n.el.classList.contains(x);v<=t.maxBackfaceHiddenSlides?k||n.el.classList.add(x):k&&n.el.classList.remove(x)}}function x6(n){const e=this,t=[],i=e.virtual&&e.params.virtual.enabled;let a=0,o;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const u=h=>i?e.slides[e.getSlideIndexByData(h)]:e.slides[h];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(h=>{t.push(h)});else for(o=0;o<Math.ceil(e.params.slidesPerView);o+=1){const h=e.activeIndex+o;if(h>e.slides.length&&!i)break;t.push(u(h))}else t.push(u(e.activeIndex));for(o=0;o<t.length;o+=1)if(typeof t[o]<"u"){const h=t[o].offsetHeight;a=h>a?h:a}(a||a===0)&&(e.wrapperEl.style.height=`${a}px`)}function N6(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let i=0;i<e.length;i+=1)e[i].swiperSlideOffset=(n.isHorizontal()?e[i].offsetLeft:e[i].offsetTop)-t-n.cssOverflowAdjustment()}const TS=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function O6(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:i,rtlTranslate:a,snapGrid:o}=e;if(i.length===0)return;typeof i[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let u=-n;a&&(u=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let h=t.spaceBetween;typeof h=="string"&&h.indexOf("%")>=0?h=parseFloat(h.replace("%",""))/100*e.size:typeof h=="string"&&(h=parseFloat(h));for(let f=0;f<i.length;f+=1){const m=i[f];let _=m.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(_-=i[0].swiperSlideOffset);const v=(u+(t.centeredSlides?e.minTranslate():0)-_)/(m.swiperSlideSize+h),E=(u-o[0]+(t.centeredSlides?e.minTranslate():0)-_)/(m.swiperSlideSize+h),A=-(u-_),S=A+e.slidesSizesGrid[f],D=A>=0&&A<=e.size-e.slidesSizesGrid[f],L=A>=0&&A<e.size-1||S>1&&S<=e.size||A<=0&&S>=e.size;L&&(e.visibleSlides.push(m),e.visibleSlidesIndexes.push(f)),TS(m,L,t.slideVisibleClass),TS(m,D,t.slideFullyVisibleClass),m.progress=a?-v:v,m.originalProgress=a?-E:E}}function D6(n){const e=this;if(typeof n>"u"){const _=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*_||0}const t=e.params,i=e.maxTranslate()-e.minTranslate();let{progress:a,isBeginning:o,isEnd:u,progressLoop:h}=e;const f=o,m=u;if(i===0)a=0,o=!0,u=!0;else{a=(n-e.minTranslate())/i;const _=Math.abs(n-e.minTranslate())<1,v=Math.abs(n-e.maxTranslate())<1;o=_||a<=0,u=v||a>=1,_&&(a=0),v&&(a=1)}if(t.loop){const _=e.getSlideIndexByData(0),v=e.getSlideIndexByData(e.slides.length-1),E=e.slidesGrid[_],A=e.slidesGrid[v],S=e.slidesGrid[e.slidesGrid.length-1],D=Math.abs(n);D>=E?h=(D-E)/S:h=(D+S-A)/S,h>1&&(h-=1)}Object.assign(e,{progress:a,progressLoop:h,isBeginning:o,isEnd:u}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),o&&!f&&e.emit("reachBeginning toEdge"),u&&!m&&e.emit("reachEnd toEdge"),(f&&!o||m&&!u)&&e.emit("fromEdge"),e.emit("progress",a)}const hg=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function M6(){const n=this,{slides:e,params:t,slidesEl:i,activeIndex:a}=n,o=n.virtual&&t.virtual.enabled,u=n.grid&&t.grid&&t.grid.rows>1,h=v=>Li(i,`.${t.slideClass}${v}, swiper-slide${v}`)[0];let f,m,_;if(o)if(t.loop){let v=a-n.virtual.slidesBefore;v<0&&(v=n.virtual.slides.length+v),v>=n.virtual.slides.length&&(v-=n.virtual.slides.length),f=h(`[data-swiper-slide-index="${v}"]`)}else f=h(`[data-swiper-slide-index="${a}"]`);else u?(f=e.find(v=>v.column===a),_=e.find(v=>v.column===a+1),m=e.find(v=>v.column===a-1)):f=e[a];f&&(u||(_=v6(f,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!_&&(_=e[0]),m=y6(f,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!m===0&&(m=e[e.length-1]))),e.forEach(v=>{hg(v,v===f,t.slideActiveClass),hg(v,v===_,t.slideNextClass),hg(v,v===m,t.slidePrevClass)}),n.emitSlidesClasses()}const wd=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,i=e.closest(t());if(i){let a=i.querySelector(`.${n.params.lazyPreloaderClass}`);!a&&n.isElement&&(i.shadowRoot?a=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(a=i.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),a&&a.remove())})),a&&a.remove()}},dg=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},s_=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const i=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),a=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const u=a,h=[u-e];h.push(...Array.from({length:e}).map((f,m)=>u+i+m)),n.slides.forEach((f,m)=>{h.includes(f.column)&&dg(n,m)});return}const o=a+i-1;if(n.params.rewind||n.params.loop)for(let u=a-e;u<=o+e;u+=1){const h=(u%t+t)%t;(h<a||h>o)&&dg(n,h)}else for(let u=Math.max(a-e,0);u<=Math.min(o+e,t-1);u+=1)u!==a&&(u>o||u<a)&&dg(n,u)};function P6(n){const{slidesGrid:e,params:t}=n,i=n.rtlTranslate?n.translate:-n.translate;let a;for(let o=0;o<e.length;o+=1)typeof e[o+1]<"u"?i>=e[o]&&i<e[o+1]-(e[o+1]-e[o])/2?a=o:i>=e[o]&&i<e[o+1]&&(a=o+1):i>=e[o]&&(a=o);return t.normalizeSlideIndex&&(a<0||typeof a>"u")&&(a=0),a}function k6(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:i,params:a,activeIndex:o,realIndex:u,snapIndex:h}=e;let f=n,m;const _=A=>{let S=A-e.virtual.slidesBefore;return S<0&&(S=e.virtual.slides.length+S),S>=e.virtual.slides.length&&(S-=e.virtual.slides.length),S};if(typeof f>"u"&&(f=P6(e)),i.indexOf(t)>=0)m=i.indexOf(t);else{const A=Math.min(a.slidesPerGroupSkip,f);m=A+Math.floor((f-A)/a.slidesPerGroup)}if(m>=i.length&&(m=i.length-1),f===o&&!e.params.loop){m!==h&&(e.snapIndex=m,e.emit("snapIndexChange"));return}if(f===o&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=_(f);return}const v=e.grid&&a.grid&&a.grid.rows>1;let E;if(e.virtual&&a.virtual.enabled&&a.loop)E=_(f);else if(v){const A=e.slides.find(D=>D.column===f);let S=parseInt(A.getAttribute("data-swiper-slide-index"),10);Number.isNaN(S)&&(S=Math.max(e.slides.indexOf(A),0)),E=Math.floor(S/a.grid.rows)}else if(e.slides[f]){const A=e.slides[f].getAttribute("data-swiper-slide-index");A?E=parseInt(A,10):E=f}else E=f;Object.assign(e,{previousSnapIndex:h,snapIndex:m,previousRealIndex:u,realIndex:E,previousIndex:o,activeIndex:f}),e.initialized&&s_(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(u!==E&&e.emit("realIndexChange"),e.emit("slideChange"))}function L6(n,e){const t=this,i=t.params;let a=n.closest(`.${i.slideClass}, swiper-slide`);!a&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(h=>{!a&&h.matches&&h.matches(`.${i.slideClass}, swiper-slide`)&&(a=h)});let o=!1,u;if(a){for(let h=0;h<t.slides.length;h+=1)if(t.slides[h]===a){o=!0,u=h;break}}if(a&&o)t.clickedSlide=a,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(a.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=u;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}i.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var V6={updateSize:R6,updateSlides:I6,updateAutoHeight:x6,updateSlidesOffset:N6,updateSlidesProgress:O6,updateProgress:D6,updateSlidesClasses:M6,updateActiveIndex:k6,updateClickedSlide:L6};function U6(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:i,translate:a,wrapperEl:o}=e;if(t.virtualTranslate)return i?-a:a;if(t.cssMode)return a;let u=p6(o,n);return u+=e.cssOverflowAdjustment(),i&&(u=-u),u||0}function z6(n,e){const t=this,{rtlTranslate:i,params:a,wrapperEl:o,progress:u}=t;let h=0,f=0;const m=0;t.isHorizontal()?h=i?-n:n:f=n,a.roundLengths&&(h=Math.floor(h),f=Math.floor(f)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?h:f,a.cssMode?o[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-h:-f:a.virtualTranslate||(t.isHorizontal()?h-=t.cssOverflowAdjustment():f-=t.cssOverflowAdjustment(),o.style.transform=`translate3d(${h}px, ${f}px, ${m}px)`);let _;const v=t.maxTranslate()-t.minTranslate();v===0?_=0:_=(n-t.minTranslate())/v,_!==u&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function B6(){return-this.snapGrid[0]}function j6(){return-this.snapGrid[this.snapGrid.length-1]}function F6(n,e,t,i,a){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),i===void 0&&(i=!0);const o=this,{params:u,wrapperEl:h}=o;if(o.animating&&u.preventInteractionOnTransition)return!1;const f=o.minTranslate(),m=o.maxTranslate();let _;if(i&&n>f?_=f:i&&n<m?_=m:_=n,o.updateProgress(_),u.cssMode){const v=o.isHorizontal();if(e===0)h[v?"scrollLeft":"scrollTop"]=-_;else{if(!o.support.smoothScroll)return O1({swiper:o,targetPosition:-_,side:v?"left":"top"}),!0;h.scrollTo({[v?"left":"top"]:-_,behavior:"smooth"})}return!0}return e===0?(o.setTransition(0),o.setTranslate(_),t&&(o.emit("beforeTransitionStart",e,a),o.emit("transitionEnd"))):(o.setTransition(e),o.setTranslate(_),t&&(o.emit("beforeTransitionStart",e,a),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(E){!o||o.destroyed||E.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,o.animating=!1,t&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}var H6={getTranslate:U6,setTranslate:z6,minTranslate:B6,maxTranslate:j6,translateTo:F6};function q6(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function k1(n){let{swiper:e,runCallbacks:t,direction:i,step:a}=n;const{activeIndex:o,previousIndex:u}=e;let h=i;h||(o>u?h="next":o<u?h="prev":h="reset"),e.emit(`transition${a}`),t&&h==="reset"?e.emit(`slideResetTransition${a}`):t&&o!==u&&(e.emit(`slideChangeTransition${a}`),h==="next"?e.emit(`slideNextTransition${a}`):e.emit(`slidePrevTransition${a}`))}function G6(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;i.cssMode||(i.autoHeight&&t.updateAutoHeight(),k1({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function $6(n,e){n===void 0&&(n=!0);const t=this,{params:i}=t;t.animating=!1,!i.cssMode&&(t.setTransition(0),k1({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var Y6={setTransition:q6,transitionStart:G6,transitionEnd:$6};function K6(n,e,t,i,a){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const o=this;let u=n;u<0&&(u=0);const{params:h,snapGrid:f,slidesGrid:m,previousIndex:_,activeIndex:v,rtlTranslate:E,wrapperEl:A,enabled:S}=o;if(!S&&!i&&!a||o.destroyed||o.animating&&h.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=o.params.speed);const D=Math.min(o.params.slidesPerGroupSkip,u);let L=D+Math.floor((u-D)/o.params.slidesPerGroup);L>=f.length&&(L=f.length-1);const M=-f[L];if(h.normalizeSlideIndex)for(let P=0;P<m.length;P+=1){const R=-Math.floor(M*100),I=Math.floor(m[P]*100),x=Math.floor(m[P+1]*100);typeof m[P+1]<"u"?R>=I&&R<x-(x-I)/2?u=P:R>=I&&R<x&&(u=P+1):R>=I&&(u=P)}if(o.initialized&&u!==v&&(!o.allowSlideNext&&(E?M>o.translate&&M>o.minTranslate():M<o.translate&&M<o.minTranslate())||!o.allowSlidePrev&&M>o.translate&&M>o.maxTranslate()&&(v||0)!==u))return!1;u!==(_||0)&&t&&o.emit("beforeSlideChangeStart"),o.updateProgress(M);let H;u>v?H="next":u<v?H="prev":H="reset";const j=o.virtual&&o.params.virtual.enabled;if(!(j&&a)&&(E&&-M===o.translate||!E&&M===o.translate))return o.updateActiveIndex(u),h.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),h.effect!=="slide"&&o.setTranslate(M),H!=="reset"&&(o.transitionStart(t,H),o.transitionEnd(t,H)),!1;if(h.cssMode){const P=o.isHorizontal(),R=E?M:-M;if(e===0)j&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),j&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{A[P?"scrollLeft":"scrollTop"]=R})):A[P?"scrollLeft":"scrollTop"]=R,j&&requestAnimationFrame(()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1});else{if(!o.support.smoothScroll)return O1({swiper:o,targetPosition:R,side:P?"left":"top"}),!0;A.scrollTo({[P?"left":"top"]:R,behavior:"smooth"})}return!0}const ue=P1().isSafari;return j&&!a&&ue&&o.isElement&&o.virtual.update(!1,!1,u),o.setTransition(e),o.setTranslate(M),o.updateActiveIndex(u),o.updateSlidesClasses(),o.emit("beforeTransitionStart",e,i),o.transitionStart(t,H),e===0?o.transitionEnd(t,H):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(R){!o||o.destroyed||R.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(t,H))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0}function Q6(n,e,t,i){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const a=this;if(a.destroyed)return;typeof e>"u"&&(e=a.params.speed);const o=a.grid&&a.params.grid&&a.params.grid.rows>1;let u=n;if(a.params.loop)if(a.virtual&&a.params.virtual.enabled)u=u+a.virtual.slidesBefore;else{let h;if(o){const E=u*a.params.grid.rows;h=a.slides.find(A=>A.getAttribute("data-swiper-slide-index")*1===E).column}else h=a.getSlideIndexByData(u);const f=o?Math.ceil(a.slides.length/a.params.grid.rows):a.slides.length,{centeredSlides:m}=a.params;let _=a.params.slidesPerView;_==="auto"?_=a.slidesPerViewDynamic():(_=Math.ceil(parseFloat(a.params.slidesPerView,10)),m&&_%2===0&&(_=_+1));let v=f-h<_;if(m&&(v=v||h<Math.ceil(_/2)),i&&m&&a.params.slidesPerView!=="auto"&&!o&&(v=!1),v){const E=m?h<a.activeIndex?"prev":"next":h-a.activeIndex-1<a.params.slidesPerView?"next":"prev";a.loopFix({direction:E,slideTo:!0,activeSlideIndex:E==="next"?h+1:h-f+1,slideRealIndex:E==="next"?a.realIndex:void 0})}if(o){const E=u*a.params.grid.rows;u=a.slides.find(A=>A.getAttribute("data-swiper-slide-index")*1===E).column}else u=a.getSlideIndexByData(u)}return requestAnimationFrame(()=>{a.slideTo(u,e,t,i)}),a}function W6(n,e,t){e===void 0&&(e=!0);const i=this,{enabled:a,params:o,animating:u}=i;if(!a||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);let h=o.slidesPerGroup;o.slidesPerView==="auto"&&o.slidesPerGroup===1&&o.slidesPerGroupAuto&&(h=Math.max(i.slidesPerViewDynamic("current",!0),1));const f=i.activeIndex<o.slidesPerGroupSkip?1:h,m=i.virtual&&o.virtual.enabled;if(o.loop){if(u&&!m&&o.loopPreventsSliding)return!1;if(i.loopFix({direction:"next"}),i._clientLeft=i.wrapperEl.clientLeft,i.activeIndex===i.slides.length-1&&o.cssMode)return requestAnimationFrame(()=>{i.slideTo(i.activeIndex+f,n,e,t)}),!0}return o.rewind&&i.isEnd?i.slideTo(0,n,e,t):i.slideTo(i.activeIndex+f,n,e,t)}function X6(n,e,t){e===void 0&&(e=!0);const i=this,{params:a,snapGrid:o,slidesGrid:u,rtlTranslate:h,enabled:f,animating:m}=i;if(!f||i.destroyed)return i;typeof n>"u"&&(n=i.params.speed);const _=i.virtual&&a.virtual.enabled;if(a.loop){if(m&&!_&&a.loopPreventsSliding)return!1;i.loopFix({direction:"prev"}),i._clientLeft=i.wrapperEl.clientLeft}const v=h?i.translate:-i.translate;function E(H){return H<0?-Math.floor(Math.abs(H)):Math.floor(H)}const A=E(v),S=o.map(H=>E(H)),D=a.freeMode&&a.freeMode.enabled;let L=o[S.indexOf(A)-1];if(typeof L>"u"&&(a.cssMode||D)){let H;o.forEach((j,ee)=>{A>=j&&(H=ee)}),typeof H<"u"&&(L=D?o[H]:o[H>0?H-1:H])}let M=0;if(typeof L<"u"&&(M=u.indexOf(L),M<0&&(M=i.activeIndex-1),a.slidesPerView==="auto"&&a.slidesPerGroup===1&&a.slidesPerGroupAuto&&(M=M-i.slidesPerViewDynamic("previous",!0)+1,M=Math.max(M,0))),a.rewind&&i.isBeginning){const H=i.params.virtual&&i.params.virtual.enabled&&i.virtual?i.virtual.slides.length-1:i.slides.length-1;return i.slideTo(H,n,e,t)}else if(a.loop&&i.activeIndex===0&&a.cssMode)return requestAnimationFrame(()=>{i.slideTo(M,n,e,t)}),!0;return i.slideTo(M,n,e,t)}function Z6(n,e,t){e===void 0&&(e=!0);const i=this;if(!i.destroyed)return typeof n>"u"&&(n=i.params.speed),i.slideTo(i.activeIndex,n,e,t)}function J6(n,e,t,i){e===void 0&&(e=!0),i===void 0&&(i=.5);const a=this;if(a.destroyed)return;typeof n>"u"&&(n=a.params.speed);let o=a.activeIndex;const u=Math.min(a.params.slidesPerGroupSkip,o),h=u+Math.floor((o-u)/a.params.slidesPerGroup),f=a.rtlTranslate?a.translate:-a.translate;if(f>=a.snapGrid[h]){const m=a.snapGrid[h],_=a.snapGrid[h+1];f-m>(_-m)*i&&(o+=a.params.slidesPerGroup)}else{const m=a.snapGrid[h-1],_=a.snapGrid[h];f-m<=(_-m)*i&&(o-=a.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,a.slidesGrid.length-1),a.slideTo(o,n,e,t)}function e3(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,i=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let a=n.clickedIndex,o;const u=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;o=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?a<n.loopedSlides-i/2||a>n.slides.length-n.loopedSlides+i/2?(n.loopFix(),a=n.getSlideIndex(Li(t,`${u}[data-swiper-slide-index="${o}"]`)[0]),r_(()=>{n.slideTo(a)})):n.slideTo(a):a>n.slides.length-i?(n.loopFix(),a=n.getSlideIndex(Li(t,`${u}[data-swiper-slide-index="${o}"]`)[0]),r_(()=>{n.slideTo(a)})):n.slideTo(a)}else n.slideTo(a)}var t3={slideTo:K6,slideToLoop:Q6,slideNext:W6,slidePrev:X6,slideReset:Z6,slideToClosest:J6,slideToClickedSlide:e3};function n3(n,e){const t=this,{params:i,slidesEl:a}=t;if(!i.loop||t.virtual&&t.params.virtual.enabled)return;const o=()=>{Li(a,`.${i.slideClass}, swiper-slide`).forEach((E,A)=>{E.setAttribute("data-swiper-slide-index",A)})},u=t.grid&&i.grid&&i.grid.rows>1,h=i.slidesPerGroup*(u?i.grid.rows:1),f=t.slides.length%h!==0,m=u&&t.slides.length%i.grid.rows!==0,_=v=>{for(let E=0;E<v;E+=1){const A=t.isElement?nf("swiper-slide",[i.slideBlankClass]):nf("div",[i.slideClass,i.slideBlankClass]);t.slidesEl.append(A)}};if(f){if(i.loopAddBlankSlides){const v=h-t.slides.length%h;_(v),t.recalcSlides(),t.updateSlides()}else tf("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");o()}else if(m){if(i.loopAddBlankSlides){const v=i.grid.rows-t.slides.length%i.grid.rows;_(v),t.recalcSlides(),t.updateSlides()}else tf("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");o()}else o();t.loopFix({slideRealIndex:n,direction:i.centeredSlides?void 0:"next",initial:e})}function i3(n){let{slideRealIndex:e,slideTo:t=!0,direction:i,setTranslate:a,activeSlideIndex:o,initial:u,byController:h,byMousewheel:f}=n===void 0?{}:n;const m=this;if(!m.params.loop)return;m.emit("beforeLoopFix");const{slides:_,allowSlidePrev:v,allowSlideNext:E,slidesEl:A,params:S}=m,{centeredSlides:D,initialSlide:L}=S;if(m.allowSlidePrev=!0,m.allowSlideNext=!0,m.virtual&&S.virtual.enabled){t&&(!S.centeredSlides&&m.snapIndex===0?m.slideTo(m.virtual.slides.length,0,!1,!0):S.centeredSlides&&m.snapIndex<S.slidesPerView?m.slideTo(m.virtual.slides.length+m.snapIndex,0,!1,!0):m.snapIndex===m.snapGrid.length-1&&m.slideTo(m.virtual.slidesBefore,0,!1,!0)),m.allowSlidePrev=v,m.allowSlideNext=E,m.emit("loopFix");return}let M=S.slidesPerView;M==="auto"?M=m.slidesPerViewDynamic():(M=Math.ceil(parseFloat(S.slidesPerView,10)),D&&M%2===0&&(M=M+1));const H=S.slidesPerGroupAuto?M:S.slidesPerGroup;let j=H;j%H!==0&&(j+=H-j%H),j+=S.loopAdditionalSlides,m.loopedSlides=j;const ee=m.grid&&S.grid&&S.grid.rows>1;_.length<M+j||m.params.effect==="cards"&&_.length<M+j*2?tf("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):ee&&S.grid.fill==="row"&&tf("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const Z=[],ue=[],P=ee?Math.ceil(_.length/S.grid.rows):_.length,R=u&&P-L<M&&!D;let I=R?L:m.activeIndex;typeof o>"u"?o=m.getSlideIndex(_.find($=>$.classList.contains(S.slideActiveClass))):I=o;const x=i==="next"||!i,k=i==="prev"||!i;let U=0,N=0;const Le=(ee?_[o].column:o)+(D&&typeof a>"u"?-M/2+.5:0);if(Le<j){U=Math.max(j-Le,H);for(let $=0;$<j-Le;$+=1){const oe=$-Math.floor($/P)*P;if(ee){const de=P-oe-1;for(let ge=_.length-1;ge>=0;ge-=1)_[ge].column===de&&Z.push(ge)}else Z.push(P-oe-1)}}else if(Le+M>P-j){N=Math.max(Le-(P-j*2),H),R&&(N=Math.max(N,M-P+L+1));for(let $=0;$<N;$+=1){const oe=$-Math.floor($/P)*P;ee?_.forEach((de,ge)=>{de.column===oe&&ue.push(ge)}):ue.push(oe)}}if(m.__preventObserver__=!0,requestAnimationFrame(()=>{m.__preventObserver__=!1}),m.params.effect==="cards"&&_.length<M+j*2&&(ue.includes(o)&&ue.splice(ue.indexOf(o),1),Z.includes(o)&&Z.splice(Z.indexOf(o),1)),k&&Z.forEach($=>{_[$].swiperLoopMoveDOM=!0,A.prepend(_[$]),_[$].swiperLoopMoveDOM=!1}),x&&ue.forEach($=>{_[$].swiperLoopMoveDOM=!0,A.append(_[$]),_[$].swiperLoopMoveDOM=!1}),m.recalcSlides(),S.slidesPerView==="auto"?m.updateSlides():ee&&(Z.length>0&&k||ue.length>0&&x)&&m.slides.forEach(($,oe)=>{m.grid.updateSlide(oe,$,m.slides)}),S.watchSlidesProgress&&m.updateSlidesOffset(),t){if(Z.length>0&&k){if(typeof e>"u"){const $=m.slidesGrid[I],de=m.slidesGrid[I+U]-$;f?m.setTranslate(m.translate-de):(m.slideTo(I+Math.ceil(U),0,!1,!0),a&&(m.touchEventsData.startTranslate=m.touchEventsData.startTranslate-de,m.touchEventsData.currentTranslate=m.touchEventsData.currentTranslate-de))}else if(a){const $=ee?Z.length/S.grid.rows:Z.length;m.slideTo(m.activeIndex+$,0,!1,!0),m.touchEventsData.currentTranslate=m.translate}}else if(ue.length>0&&x)if(typeof e>"u"){const $=m.slidesGrid[I],de=m.slidesGrid[I-N]-$;f?m.setTranslate(m.translate-de):(m.slideTo(I-N,0,!1,!0),a&&(m.touchEventsData.startTranslate=m.touchEventsData.startTranslate-de,m.touchEventsData.currentTranslate=m.touchEventsData.currentTranslate-de))}else{const $=ee?ue.length/S.grid.rows:ue.length;m.slideTo(m.activeIndex-$,0,!1,!0)}}if(m.allowSlidePrev=v,m.allowSlideNext=E,m.controller&&m.controller.control&&!h){const $={slideRealIndex:e,direction:i,setTranslate:a,activeSlideIndex:o,byController:!0};Array.isArray(m.controller.control)?m.controller.control.forEach(oe=>{!oe.destroyed&&oe.params.loop&&oe.loopFix({...$,slideTo:oe.params.slidesPerView===S.slidesPerView?t:!1})}):m.controller.control instanceof m.constructor&&m.controller.control.params.loop&&m.controller.control.loopFix({...$,slideTo:m.controller.control.params.slidesPerView===S.slidesPerView?t:!1})}m.emit("loopFix")}function r3(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||!t||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const i=[];n.slides.forEach(a=>{const o=typeof a.swiperSlideIndex>"u"?a.getAttribute("data-swiper-slide-index")*1:a.swiperSlideIndex;i[o]=a}),n.slides.forEach(a=>{a.removeAttribute("data-swiper-slide-index")}),i.forEach(a=>{t.append(a)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var s3={loopCreate:n3,loopFix:i3,loopDestroy:r3};function a3(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function o3(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var l3={setGrabCursor:a3,unsetGrabCursor:o3};function u3(n,e){e===void 0&&(e=this);function t(i){if(!i||i===za()||i===yn())return null;i.assignedSlot&&(i=i.assignedSlot);const a=i.closest(n);return!a&&!i.getRootNode?null:a||t(i.getRootNode().host)}return t(e)}function wS(n,e,t){const i=yn(),{params:a}=n,o=a.edgeSwipeDetection,u=a.edgeSwipeThreshold;return o&&(t<=u||t>=i.innerWidth-u)?o==="prevent"?(e.preventDefault(),!0):!1:!0}function c3(n){const e=this,t=za();let i=n;i.originalEvent&&(i=i.originalEvent);const a=e.touchEventsData;if(i.type==="pointerdown"){if(a.pointerId!==null&&a.pointerId!==i.pointerId)return;a.pointerId=i.pointerId}else i.type==="touchstart"&&i.targetTouches.length===1&&(a.touchId=i.targetTouches[0].identifier);if(i.type==="touchstart"){wS(e,i,i.targetTouches[0].pageX);return}const{params:o,touches:u,enabled:h}=e;if(!h||!o.simulateTouch&&i.pointerType==="mouse"||e.animating&&o.preventInteractionOnTransition)return;!e.animating&&o.cssMode&&o.loop&&e.loopFix();let f=i.target;if(o.touchEventsTarget==="wrapper"&&!_6(f,e.wrapperEl)||"which"in i&&i.which===3||"button"in i&&i.button>0||a.isTouched&&a.isMoved)return;const m=!!o.noSwipingClass&&o.noSwipingClass!=="",_=i.composedPath?i.composedPath():i.path;m&&i.target&&i.target.shadowRoot&&_&&(f=_[0]);const v=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,E=!!(i.target&&i.target.shadowRoot);if(o.noSwiping&&(E?u3(v,f):f.closest(v))){e.allowClick=!0;return}if(o.swipeHandler&&!f.closest(o.swipeHandler))return;u.currentX=i.pageX,u.currentY=i.pageY;const A=u.currentX,S=u.currentY;if(!wS(e,i,A))return;Object.assign(a,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),u.startX=A,u.startY=S,a.touchStartTime=ef(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,o.threshold>0&&(a.allowThresholdMove=!1);let D=!0;f.matches(a.focusableElements)&&(D=!1,f.nodeName==="SELECT"&&(a.isTouched=!1)),t.activeElement&&t.activeElement.matches(a.focusableElements)&&t.activeElement!==f&&(i.pointerType==="mouse"||i.pointerType!=="mouse"&&!f.matches(a.focusableElements))&&t.activeElement.blur();const L=D&&e.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||L)&&!f.isContentEditable&&i.preventDefault(),o.freeMode&&o.freeMode.enabled&&e.freeMode&&e.animating&&!o.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",i)}function h3(n){const e=za(),t=this,i=t.touchEventsData,{params:a,touches:o,rtlTranslate:u,enabled:h}=t;if(!h||!a.simulateTouch&&n.pointerType==="mouse")return;let f=n;if(f.originalEvent&&(f=f.originalEvent),f.type==="pointermove"&&(i.touchId!==null||f.pointerId!==i.pointerId))return;let m;if(f.type==="touchmove"){if(m=[...f.changedTouches].find(Z=>Z.identifier===i.touchId),!m||m.identifier!==i.touchId)return}else m=f;if(!i.isTouched){i.startMoving&&i.isScrolling&&t.emit("touchMoveOpposite",f);return}const _=m.pageX,v=m.pageY;if(f.preventedByNestedSwiper){o.startX=_,o.startY=v;return}if(!t.allowTouchMove){f.target.matches(i.focusableElements)||(t.allowClick=!1),i.isTouched&&(Object.assign(o,{startX:_,startY:v,currentX:_,currentY:v}),i.touchStartTime=ef());return}if(a.touchReleaseOnEdges&&!a.loop)if(t.isVertical()){if(v<o.startY&&t.translate<=t.maxTranslate()||v>o.startY&&t.translate>=t.minTranslate()){i.isTouched=!1,i.isMoved=!1;return}}else{if(u&&(_>o.startX&&-t.translate<=t.maxTranslate()||_<o.startX&&-t.translate>=t.minTranslate()))return;if(!u&&(_<o.startX&&t.translate<=t.maxTranslate()||_>o.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(i.focusableElements)&&e.activeElement!==f.target&&f.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&f.target===e.activeElement&&f.target.matches(i.focusableElements)){i.isMoved=!0,t.allowClick=!1;return}i.allowTouchCallbacks&&t.emit("touchMove",f),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=_,o.currentY=v;const E=o.currentX-o.startX,A=o.currentY-o.startY;if(t.params.threshold&&Math.sqrt(E**2+A**2)<t.params.threshold)return;if(typeof i.isScrolling>"u"){let Z;t.isHorizontal()&&o.currentY===o.startY||t.isVertical()&&o.currentX===o.startX?i.isScrolling=!1:E*E+A*A>=25&&(Z=Math.atan2(Math.abs(A),Math.abs(E))*180/Math.PI,i.isScrolling=t.isHorizontal()?Z>a.touchAngle:90-Z>a.touchAngle)}if(i.isScrolling&&t.emit("touchMoveOpposite",f),typeof i.startMoving>"u"&&(o.currentX!==o.startX||o.currentY!==o.startY)&&(i.startMoving=!0),i.isScrolling||f.type==="touchmove"&&i.preventTouchMoveFromPointerMove){i.isTouched=!1;return}if(!i.startMoving)return;t.allowClick=!1,!a.cssMode&&f.cancelable&&f.preventDefault(),a.touchMoveStopPropagation&&!a.nested&&f.stopPropagation();let S=t.isHorizontal()?E:A,D=t.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;a.oneWayMovement&&(S=Math.abs(S)*(u?1:-1),D=Math.abs(D)*(u?1:-1)),o.diff=S,S*=a.touchRatio,u&&(S=-S,D=-D);const L=t.touchesDirection;t.swipeDirection=S>0?"prev":"next",t.touchesDirection=D>0?"prev":"next";const M=t.params.loop&&!a.cssMode,H=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!i.isMoved){if(M&&H&&t.loopFix({direction:t.swipeDirection}),i.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const Z=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(Z)}i.allowMomentumBounce=!1,a.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",f)}if(new Date().getTime(),a._loopSwapReset!==!1&&i.isMoved&&i.allowThresholdMove&&L!==t.touchesDirection&&M&&H&&Math.abs(S)>=1){Object.assign(o,{startX:_,startY:v,currentX:_,currentY:v,startTranslate:i.currentTranslate}),i.loopSwapReset=!0,i.startTranslate=i.currentTranslate;return}t.emit("sliderMove",f),i.isMoved=!0,i.currentTranslate=S+i.startTranslate;let j=!0,ee=a.resistanceRatio;if(a.touchReleaseOnEdges&&(ee=0),S>0?(M&&H&&i.allowThresholdMove&&i.currentTranslate>(a.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(a.slidesPerView!=="auto"&&t.slides.length-a.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),i.currentTranslate>t.minTranslate()&&(j=!1,a.resistance&&(i.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+i.startTranslate+S)**ee))):S<0&&(M&&H&&i.allowThresholdMove&&i.currentTranslate<(a.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(a.slidesPerView!=="auto"&&t.slides.length-a.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(a.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(a.slidesPerView,10)))}),i.currentTranslate<t.maxTranslate()&&(j=!1,a.resistance&&(i.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-i.startTranslate-S)**ee))),j&&(f.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&i.currentTranslate<i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&i.currentTranslate>i.startTranslate&&(i.currentTranslate=i.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(i.currentTranslate=i.startTranslate),a.threshold>0)if(Math.abs(S)>a.threshold||i.allowThresholdMove){if(!i.allowThresholdMove){i.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,i.currentTranslate=i.startTranslate,o.diff=t.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY;return}}else{i.currentTranslate=i.startTranslate;return}!a.followFinger||a.cssMode||((a.freeMode&&a.freeMode.enabled&&t.freeMode||a.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),a.freeMode&&a.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(i.currentTranslate),t.setTranslate(i.currentTranslate))}function d3(n){const e=this,t=e.touchEventsData;let i=n;i.originalEvent&&(i=i.originalEvent);let a;if(i.type==="touchend"||i.type==="touchcancel"){if(a=[...i.changedTouches].find(Z=>Z.identifier===t.touchId),!a||a.identifier!==t.touchId)return}else{if(t.touchId!==null||i.pointerId!==t.pointerId)return;a=i}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(i.type)&&!(["pointercancel","contextmenu"].includes(i.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:u,touches:h,rtlTranslate:f,slidesGrid:m,enabled:_}=e;if(!_||!u.simulateTouch&&i.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",i),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&u.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}u.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const v=ef(),E=v-t.touchStartTime;if(e.allowClick){const Z=i.path||i.composedPath&&i.composedPath();e.updateClickedSlide(Z&&Z[0]||i.target,Z),e.emit("tap click",i),E<300&&v-t.lastClickTime<300&&e.emit("doubleTap doubleClick",i)}if(t.lastClickTime=ef(),r_(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||h.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let A;if(u.followFinger?A=f?e.translate:-e.translate:A=-t.currentTranslate,u.cssMode)return;if(u.freeMode&&u.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:A});return}const S=A>=-e.maxTranslate()&&!e.params.loop;let D=0,L=e.slidesSizesGrid[0];for(let Z=0;Z<m.length;Z+=Z<u.slidesPerGroupSkip?1:u.slidesPerGroup){const ue=Z<u.slidesPerGroupSkip-1?1:u.slidesPerGroup;typeof m[Z+ue]<"u"?(S||A>=m[Z]&&A<m[Z+ue])&&(D=Z,L=m[Z+ue]-m[Z]):(S||A>=m[Z])&&(D=Z,L=m[m.length-1]-m[m.length-2])}let M=null,H=null;u.rewind&&(e.isBeginning?H=u.virtual&&u.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(M=0));const j=(A-m[D])/L,ee=D<u.slidesPerGroupSkip-1?1:u.slidesPerGroup;if(E>u.longSwipesMs){if(!u.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(j>=u.longSwipesRatio?e.slideTo(u.rewind&&e.isEnd?M:D+ee):e.slideTo(D)),e.swipeDirection==="prev"&&(j>1-u.longSwipesRatio?e.slideTo(D+ee):H!==null&&j<0&&Math.abs(j)>u.longSwipesRatio?e.slideTo(H):e.slideTo(D))}else{if(!u.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(i.target===e.navigation.nextEl||i.target===e.navigation.prevEl)?i.target===e.navigation.nextEl?e.slideTo(D+ee):e.slideTo(D):(e.swipeDirection==="next"&&e.slideTo(M!==null?M:D+ee),e.swipeDirection==="prev"&&e.slideTo(H!==null?H:D))}}function SS(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:i,allowSlidePrev:a,snapGrid:o}=n,u=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const h=u&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!h?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!u?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=a,n.allowSlideNext=i,n.params.watchOverflow&&o!==n.snapGrid&&n.checkOverflow()}function f3(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function p3(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:i}=n;if(!i)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let a;const o=n.maxTranslate()-n.minTranslate();o===0?a=0:a=(n.translate-n.minTranslate())/o,a!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function m3(n){const e=this;wd(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function g3(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const L1=(n,e)=>{const t=za(),{params:i,el:a,wrapperEl:o,device:u}=n,h=!!i.nested,f=e==="on"?"addEventListener":"removeEventListener",m=e;!a||typeof a=="string"||(t[f]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:h}),a[f]("touchstart",n.onTouchStart,{passive:!1}),a[f]("pointerdown",n.onTouchStart,{passive:!1}),t[f]("touchmove",n.onTouchMove,{passive:!1,capture:h}),t[f]("pointermove",n.onTouchMove,{passive:!1,capture:h}),t[f]("touchend",n.onTouchEnd,{passive:!0}),t[f]("pointerup",n.onTouchEnd,{passive:!0}),t[f]("pointercancel",n.onTouchEnd,{passive:!0}),t[f]("touchcancel",n.onTouchEnd,{passive:!0}),t[f]("pointerout",n.onTouchEnd,{passive:!0}),t[f]("pointerleave",n.onTouchEnd,{passive:!0}),t[f]("contextmenu",n.onTouchEnd,{passive:!0}),(i.preventClicks||i.preventClicksPropagation)&&a[f]("click",n.onClick,!0),i.cssMode&&o[f]("scroll",n.onScroll),i.updateOnWindowResize?n[m](u.ios||u.android?"resize orientationchange observerUpdate":"resize observerUpdate",SS,!0):n[m]("observerUpdate",SS,!0),a[f]("load",n.onLoad,{capture:!0}))};function _3(){const n=this,{params:e}=n;n.onTouchStart=c3.bind(n),n.onTouchMove=h3.bind(n),n.onTouchEnd=d3.bind(n),n.onDocumentTouchStart=g3.bind(n),e.cssMode&&(n.onScroll=p3.bind(n)),n.onClick=f3.bind(n),n.onLoad=m3.bind(n),L1(n,"on")}function y3(){L1(this,"off")}var v3={attachEvents:_3,detachEvents:y3};const bS=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function E3(){const n=this,{realIndex:e,initialized:t,params:i,el:a}=n,o=i.breakpoints;if(!o||o&&Object.keys(o).length===0)return;const u=za(),h=i.breakpointsBase==="window"||!i.breakpointsBase?i.breakpointsBase:"container",f=["window","container"].includes(i.breakpointsBase)||!i.breakpointsBase?n.el:u.querySelector(i.breakpointsBase),m=n.getBreakpoint(o,h,f);if(!m||n.currentBreakpoint===m)return;const v=(m in o?o[m]:void 0)||n.originalParams,E=bS(n,i),A=bS(n,v),S=n.params.grabCursor,D=v.grabCursor,L=i.enabled;E&&!A?(a.classList.remove(`${i.containerModifierClass}grid`,`${i.containerModifierClass}grid-column`),n.emitContainerClasses()):!E&&A&&(a.classList.add(`${i.containerModifierClass}grid`),(v.grid.fill&&v.grid.fill==="column"||!v.grid.fill&&i.grid.fill==="column")&&a.classList.add(`${i.containerModifierClass}grid-column`),n.emitContainerClasses()),S&&!D?n.unsetGrabCursor():!S&&D&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(ue=>{if(typeof v[ue]>"u")return;const P=i[ue]&&i[ue].enabled,R=v[ue]&&v[ue].enabled;P&&!R&&n[ue].disable(),!P&&R&&n[ue].enable()});const M=v.direction&&v.direction!==i.direction,H=i.loop&&(v.slidesPerView!==i.slidesPerView||M),j=i.loop;M&&t&&n.changeDirection(),Pn(n.params,v);const ee=n.params.enabled,Z=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),L&&!ee?n.disable():!L&&ee&&n.enable(),n.currentBreakpoint=m,n.emit("_beforeBreakpoint",v),t&&(H?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!j&&Z?(n.loopCreate(e),n.updateSlides()):j&&!Z&&n.loopDestroy()),n.emit("breakpoint",v)}function T3(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let i=!1;const a=yn(),o=e==="window"?a.innerHeight:t.clientHeight,u=Object.keys(n).map(h=>{if(typeof h=="string"&&h.indexOf("@")===0){const f=parseFloat(h.substr(1));return{value:o*f,point:h}}return{value:h,point:h}});u.sort((h,f)=>parseInt(h.value,10)-parseInt(f.value,10));for(let h=0;h<u.length;h+=1){const{point:f,value:m}=u[h];e==="window"?a.matchMedia(`(min-width: ${m}px)`).matches&&(i=f):m<=t.clientWidth&&(i=f)}return i||"max"}var w3={setBreakpoint:E3,getBreakpoint:T3};function S3(n,e){const t=[];return n.forEach(i=>{typeof i=="object"?Object.keys(i).forEach(a=>{i[a]&&t.push(e+a)}):typeof i=="string"&&t.push(e+i)}),t}function b3(){const n=this,{classNames:e,params:t,rtl:i,el:a,device:o}=n,u=S3(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:i},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:o.android},{ios:o.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...u),a.classList.add(...e),n.emitContainerClasses()}function A3(){const n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var C3={addClasses:b3,removeClasses:A3};function R3(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:i}=t;if(i){const a=n.slides.length-1,o=n.slidesGrid[a]+n.slidesSizesGrid[a]+i*2;n.isLocked=n.size>o}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var I3={checkOverflow:R3},a_={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function x3(n,e){return function(i){i===void 0&&(i={});const a=Object.keys(i)[0],o=i[a];if(typeof o!="object"||o===null){Pn(e,i);return}if(n[a]===!0&&(n[a]={enabled:!0}),a==="navigation"&&n[a]&&n[a].enabled&&!n[a].prevEl&&!n[a].nextEl&&(n[a].auto=!0),["pagination","scrollbar"].indexOf(a)>=0&&n[a]&&n[a].enabled&&!n[a].el&&(n[a].auto=!0),!(a in n&&"enabled"in o)){Pn(e,i);return}typeof n[a]=="object"&&!("enabled"in n[a])&&(n[a].enabled=!0),n[a]||(n[a]={enabled:!1}),Pn(e,i)}}const fg={eventsEmitter:C6,update:V6,translate:H6,transition:Y6,slide:t3,loop:s3,grabCursor:l3,events:v3,breakpoints:w3,checkOverflow:I3,classes:C3},pg={};let ky=class Er{constructor(){let e,t;for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.length===1&&a[0].constructor&&Object.prototype.toString.call(a[0]).slice(8,-1)==="Object"?t=a[0]:[e,t]=a,t||(t={}),t=Pn({},t),e&&!t.el&&(t.el=e);const u=za();if(t.el&&typeof t.el=="string"&&u.querySelectorAll(t.el).length>1){const _=[];return u.querySelectorAll(t.el).forEach(v=>{const E=Pn({},t,{el:v});_.push(new Er(E))}),_}const h=this;h.__swiper__=!0,h.support=D1(),h.device=M1({userAgent:t.userAgent}),h.browser=P1(),h.eventsListeners={},h.eventsAnyListeners=[],h.modules=[...h.__modules__],t.modules&&Array.isArray(t.modules)&&h.modules.push(...t.modules);const f={};h.modules.forEach(_=>{_({params:t,swiper:h,extendParams:x3(t,f),on:h.on.bind(h),once:h.once.bind(h),off:h.off.bind(h),emit:h.emit.bind(h)})});const m=Pn({},a_,f);return h.params=Pn({},m,pg,t),h.originalParams=Pn({},h.params),h.passedParams=Pn({},t),h.params&&h.params.on&&Object.keys(h.params.on).forEach(_=>{h.on(_,h.params.on[_])}),h.params&&h.params.onAny&&h.onAny(h.params.onAny),Object.assign(h,{enabled:h.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return h.params.direction==="horizontal"},isVertical(){return h.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:h.params.allowSlideNext,allowSlidePrev:h.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:h.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:h.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),h.emit("_swiper"),h.params.init&&h.init(),h}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:i}=this,a=Li(t,`.${i.slideClass}, swiper-slide`),o=yS(a[0]);return yS(e)-o}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}recalcSlides(){const e=this,{slidesEl:t,params:i}=e;e.slides=Li(t,`.${i.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const a=i.minTranslate(),u=(i.maxTranslate()-a)*e+a;i.translateTo(u,typeof t>"u"?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(i=>i.indexOf("swiper")===0||i.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(i=>i.indexOf("swiper-slide")===0||i.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const a=e.getSlideClasses(i);t.push({slideEl:i,classNames:a}),e.emit("_slideClass",i,a)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const i=this,{params:a,slides:o,slidesGrid:u,slidesSizesGrid:h,size:f,activeIndex:m}=i;let _=1;if(typeof a.slidesPerView=="number")return a.slidesPerView;if(a.centeredSlides){let v=o[m]?Math.ceil(o[m].swiperSlideSize):0,E;for(let A=m+1;A<o.length;A+=1)o[A]&&!E&&(v+=Math.ceil(o[A].swiperSlideSize),_+=1,v>f&&(E=!0));for(let A=m-1;A>=0;A-=1)o[A]&&!E&&(v+=o[A].swiperSlideSize,_+=1,v>f&&(E=!0))}else if(e==="current")for(let v=m+1;v<o.length;v+=1)(t?u[v]+h[v]-u[m]<f:u[v]-u[m]<f)&&(_+=1);else for(let v=m-1;v>=0;v-=1)u[m]-u[v]<f&&(_+=1);return _}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(u=>{u.complete&&wd(e,u)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function a(){const u=e.rtlTranslate?e.translate*-1:e.translate,h=Math.min(Math.max(u,e.maxTranslate()),e.minTranslate());e.setTranslate(h),e.updateActiveIndex(),e.updateSlidesClasses()}let o;if(i.freeMode&&i.freeMode.enabled&&!i.cssMode)a(),i.autoHeight&&e.updateAutoHeight();else{if((i.slidesPerView==="auto"||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const u=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;o=e.slideTo(u.length-1,0,!1,!0)}else o=e.slideTo(e.activeIndex,0,!1,!0);o||a()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const i=this,a=i.params.direction;return e||(e=a==="horizontal"?"vertical":"horizontal"),e===a||e!=="horizontal"&&e!=="vertical"||(i.el.classList.remove(`${i.params.containerModifierClass}${a}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(o=>{e==="vertical"?o.style.width="":o.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if(typeof i=="string"&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const a=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let u=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(a()):Li(i,a())[0];return!u&&t.params.createElements&&(u=nf("div",t.params.wrapperClass),i.append(u),Li(i,`.${t.params.slideClass}`).forEach(h=>{u.append(h)})),Object.assign(t,{el:i,wrapperEl:u,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:u,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:i.dir.toLowerCase()==="rtl"||_s(i,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(i.dir.toLowerCase()==="rtl"||_s(i,"direction")==="rtl"),wrongRTL:_s(u,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const a=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&a.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),a.forEach(o=>{o.complete?wd(t,o):o.addEventListener("load",u=>{wd(t,u.target)})}),s_(t),t.initialized=!0,s_(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const i=this,{params:a,el:o,wrapperEl:u,slides:h}=i;return typeof i.params>"u"||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),a.loop&&i.loopDestroy(),t&&(i.removeClasses(),o&&typeof o!="string"&&o.removeAttribute("style"),u&&u.removeAttribute("style"),h&&h.length&&h.forEach(f=>{f.classList.remove(a.slideVisibleClass,a.slideFullyVisibleClass,a.slideActiveClass,a.slideNextClass,a.slidePrevClass),f.removeAttribute("style"),f.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(f=>{i.off(f)}),e!==!1&&(i.el&&typeof i.el!="string"&&(i.el.swiper=null),d6(i)),i.destroyed=!0),null}static extendDefaults(e){Pn(pg,e)}static get extendedDefaults(){return pg}static get defaults(){return a_}static installModule(e){Er.prototype.__modules__||(Er.prototype.__modules__=[]);const t=Er.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>Er.installModule(t)),Er):(Er.installModule(e),Er)}};Object.keys(fg).forEach(n=>{Object.keys(fg[n]).forEach(e=>{ky.prototype[e]=fg[n][e]})});ky.use([b6,A6]);const V1=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Oa(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function Yo(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(i=>t.indexOf(i)<0).forEach(i=>{typeof n[i]>"u"?n[i]=e[i]:Oa(e[i])&&Oa(n[i])&&Object.keys(e[i]).length>0?e[i].__swiper__?n[i]=e[i]:Yo(n[i],e[i]):n[i]=e[i]})}function U1(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function z1(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function B1(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function j1(n){n===void 0&&(n="");const e=n.split(" ").map(i=>i.trim()).filter(i=>!!i),t=[];return e.forEach(i=>{t.indexOf(i)<0&&t.push(i)}),t.join(" ")}function N3(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function O3(n){let{swiper:e,slides:t,passedParams:i,changedParams:a,nextEl:o,prevEl:u,scrollbarEl:h,paginationEl:f}=n;const m=a.filter(I=>I!=="children"&&I!=="direction"&&I!=="wrapperClass"),{params:_,pagination:v,navigation:E,scrollbar:A,virtual:S,thumbs:D}=e;let L,M,H,j,ee,Z,ue,P;a.includes("thumbs")&&i.thumbs&&i.thumbs.swiper&&!i.thumbs.swiper.destroyed&&_.thumbs&&(!_.thumbs.swiper||_.thumbs.swiper.destroyed)&&(L=!0),a.includes("controller")&&i.controller&&i.controller.control&&_.controller&&!_.controller.control&&(M=!0),a.includes("pagination")&&i.pagination&&(i.pagination.el||f)&&(_.pagination||_.pagination===!1)&&v&&!v.el&&(H=!0),a.includes("scrollbar")&&i.scrollbar&&(i.scrollbar.el||h)&&(_.scrollbar||_.scrollbar===!1)&&A&&!A.el&&(j=!0),a.includes("navigation")&&i.navigation&&(i.navigation.prevEl||u)&&(i.navigation.nextEl||o)&&(_.navigation||_.navigation===!1)&&E&&!E.prevEl&&!E.nextEl&&(ee=!0);const R=I=>{e[I]&&(e[I].destroy(),I==="navigation"?(e.isElement&&(e[I].prevEl.remove(),e[I].nextEl.remove()),_[I].prevEl=void 0,_[I].nextEl=void 0,e[I].prevEl=void 0,e[I].nextEl=void 0):(e.isElement&&e[I].el.remove(),_[I].el=void 0,e[I].el=void 0))};a.includes("loop")&&e.isElement&&(_.loop&&!i.loop?Z=!0:!_.loop&&i.loop?ue=!0:P=!0),m.forEach(I=>{if(Oa(_[I])&&Oa(i[I]))Object.assign(_[I],i[I]),(I==="navigation"||I==="pagination"||I==="scrollbar")&&"enabled"in i[I]&&!i[I].enabled&&R(I);else{const x=i[I];(x===!0||x===!1)&&(I==="navigation"||I==="pagination"||I==="scrollbar")?x===!1&&R(I):_[I]=i[I]}}),m.includes("controller")&&!M&&e.controller&&e.controller.control&&_.controller&&_.controller.control&&(e.controller.control=_.controller.control),a.includes("children")&&t&&S&&_.virtual.enabled?(S.slides=t,S.update(!0)):a.includes("virtual")&&S&&_.virtual.enabled&&(t&&(S.slides=t),S.update(!0)),a.includes("children")&&t&&_.loop&&(P=!0),L&&D.init()&&D.update(!0),M&&(e.controller.control=_.controller.control),H&&(e.isElement&&(!f||typeof f=="string")&&(f=document.createElement("div"),f.classList.add("swiper-pagination"),f.part.add("pagination"),e.el.appendChild(f)),f&&(_.pagination.el=f),v.init(),v.render(),v.update()),j&&(e.isElement&&(!h||typeof h=="string")&&(h=document.createElement("div"),h.classList.add("swiper-scrollbar"),h.part.add("scrollbar"),e.el.appendChild(h)),h&&(_.scrollbar.el=h),A.init(),A.updateSize(),A.setTranslate()),ee&&(e.isElement&&((!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-next"),ES(o,e.hostEl.constructor.nextButtonSvg),o.part.add("button-next"),e.el.appendChild(o)),(!u||typeof u=="string")&&(u=document.createElement("div"),u.classList.add("swiper-button-prev"),ES(u,e.hostEl.constructor.prevButtonSvg),u.part.add("button-prev"),e.el.appendChild(u))),o&&(_.navigation.nextEl=o),u&&(_.navigation.prevEl=u),E.init(),E.update()),a.includes("allowSlideNext")&&(e.allowSlideNext=i.allowSlideNext),a.includes("allowSlidePrev")&&(e.allowSlidePrev=i.allowSlidePrev),a.includes("direction")&&e.changeDirection(i.direction,!1),(Z||P)&&e.loopDestroy(),(ue||P)&&e.loopCreate(),e.update()}function D3(n,e){n===void 0&&(n={}),e===void 0&&(e=!0);const t={on:{}},i={},a={};Yo(t,a_),t._emitClasses=!0,t.init=!1;const o={},u=V1.map(f=>f.replace(/_/,"")),h=Object.assign({},n);return Object.keys(h).forEach(f=>{typeof n[f]>"u"||(u.indexOf(f)>=0?Oa(n[f])?(t[f]={},a[f]={},Yo(t[f],n[f]),Yo(a[f],n[f])):(t[f]=n[f],a[f]=n[f]):f.search(/on[A-Z]/)===0&&typeof n[f]=="function"?e?i[`${f[2].toLowerCase()}${f.substr(3)}`]=n[f]:t.on[`${f[2].toLowerCase()}${f.substr(3)}`]=n[f]:o[f]=n[f])}),["navigation","pagination","scrollbar"].forEach(f=>{t[f]===!0&&(t[f]={}),t[f]===!1&&delete t[f]}),{params:t,passedParams:a,rest:o,events:i}}function M3(n,e){let{el:t,nextEl:i,prevEl:a,paginationEl:o,scrollbarEl:u,swiper:h}=n;U1(e)&&i&&a&&(h.params.navigation.nextEl=i,h.originalParams.navigation.nextEl=i,h.params.navigation.prevEl=a,h.originalParams.navigation.prevEl=a),z1(e)&&o&&(h.params.pagination.el=o,h.originalParams.pagination.el=o),B1(e)&&u&&(h.params.scrollbar.el=u,h.originalParams.scrollbar.el=u),h.init(t)}function P3(n,e,t,i,a){const o=[];if(!e)return o;const u=f=>{o.indexOf(f)<0&&o.push(f)};if(t&&i){const f=i.map(a),m=t.map(a);f.join("")!==m.join("")&&u("children"),i.length!==t.length&&u("children")}return V1.filter(f=>f[0]==="_").map(f=>f.replace(/_/,"")).forEach(f=>{if(f in n&&f in e)if(Oa(n[f])&&Oa(e[f])){const m=Object.keys(n[f]),_=Object.keys(e[f]);m.length!==_.length?u(f):(m.forEach(v=>{n[f][v]!==e[f][v]&&u(f)}),_.forEach(v=>{n[f][v]!==e[f][v]&&u(f)}))}else n[f]!==e[f]&&u(f)}),o}const k3=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.emit("_virtualUpdated"),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function rf(){return rf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},rf.apply(this,arguments)}function F1(n){return n.type&&n.type.displayName&&n.type.displayName.includes("SwiperSlide")}function H1(n){const e=[];return kt.Children.toArray(n).forEach(t=>{F1(t)?e.push(t):t.props&&t.props.children&&H1(t.props.children).forEach(i=>e.push(i))}),e}function L3(n){const e=[],t={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]};return kt.Children.toArray(n).forEach(i=>{if(F1(i))e.push(i);else if(i.props&&i.props.slot&&t[i.props.slot])t[i.props.slot].push(i);else if(i.props&&i.props.children){const a=H1(i.props.children);a.length>0?a.forEach(o=>e.push(o)):t["container-end"].push(i)}else t["container-end"].push(i)}),{slides:e,slots:t}}function V3(n,e,t){if(!t)return null;const i=_=>{let v=_;return _<0?v=e.length+_:v>=e.length&&(v=v-e.length),v},a=n.isHorizontal()?{[n.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:o,to:u}=t,h=n.params.loop?-e.length:0,f=n.params.loop?e.length*2:e.length,m=[];for(let _=h;_<f;_+=1)_>=o&&_<=u&&m.push(e[i(_)]);return m.map((_,v)=>kt.cloneElement(_,{swiper:n,style:a,key:_.props.virtualIndex||_.key||`slide-${v}`}))}function Ju(n,e){return typeof window>"u"?B.useEffect(n,e):B.useLayoutEffect(n,e)}const AS=B.createContext(null),U3=B.createContext(null),q1=B.forwardRef(function(n,e){let{className:t,tag:i="div",wrapperTag:a="div",children:o,onSwiper:u,...h}=n===void 0?{}:n,f=!1;const[m,_]=B.useState("swiper"),[v,E]=B.useState(null),[A,S]=B.useState(!1),D=B.useRef(!1),L=B.useRef(null),M=B.useRef(null),H=B.useRef(null),j=B.useRef(null),ee=B.useRef(null),Z=B.useRef(null),ue=B.useRef(null),P=B.useRef(null),{params:R,passedParams:I,rest:x,events:k}=D3(h),{slides:U,slots:N}=L3(o),$e=()=>{S(!A)};Object.assign(R.on,{_containerClasses(ge,O){_(O)}});const Le=()=>{Object.assign(R.on,k),f=!0;const ge={...R};if(delete ge.wrapperClass,M.current=new ky(ge),M.current.virtual&&M.current.params.virtual.enabled){M.current.virtual.slides=U;const O={cache:!1,slides:U,renderExternal:E,renderExternalUpdate:!1};Yo(M.current.params.virtual,O),Yo(M.current.originalParams.virtual,O)}};L.current||Le(),M.current&&M.current.on("_beforeBreakpoint",$e);const $=()=>{f||!k||!M.current||Object.keys(k).forEach(ge=>{M.current.on(ge,k[ge])})},oe=()=>{!k||!M.current||Object.keys(k).forEach(ge=>{M.current.off(ge,k[ge])})};B.useEffect(()=>()=>{M.current&&M.current.off("_beforeBreakpoint",$e)}),B.useEffect(()=>{!D.current&&M.current&&(M.current.emitSlidesClasses(),D.current=!0)}),Ju(()=>{if(e&&(e.current=L.current),!!L.current)return M.current.destroyed&&Le(),M3({el:L.current,nextEl:ee.current,prevEl:Z.current,paginationEl:ue.current,scrollbarEl:P.current,swiper:M.current},R),u&&!M.current.destroyed&&u(M.current),()=>{M.current&&!M.current.destroyed&&M.current.destroy(!0,!1)}},[]),Ju(()=>{$();const ge=P3(I,H.current,U,j.current,O=>O.key);return H.current=I,j.current=U,ge.length&&M.current&&!M.current.destroyed&&O3({swiper:M.current,slides:U,passedParams:I,changedParams:ge,nextEl:ee.current,prevEl:Z.current,scrollbarEl:P.current,paginationEl:ue.current}),()=>{oe()}}),Ju(()=>{k3(M.current)},[v]);function de(){return R.virtual?V3(M.current,U,v):U.map((ge,O)=>kt.cloneElement(ge,{swiper:M.current,swiperSlideIndex:O}))}return kt.createElement(i,rf({ref:L,className:j1(`${m}${t?` ${t}`:""}`)},x),kt.createElement(U3.Provider,{value:M.current},N["container-start"],kt.createElement(a,{className:N3(R.wrapperClass)},N["wrapper-start"],de(),N["wrapper-end"]),U1(R)&&kt.createElement(kt.Fragment,null,kt.createElement("div",{ref:Z,className:"swiper-button-prev"}),kt.createElement("div",{ref:ee,className:"swiper-button-next"})),B1(R)&&kt.createElement("div",{ref:P,className:"swiper-scrollbar"}),z1(R)&&kt.createElement("div",{ref:ue,className:"swiper-pagination"}),N["container-end"]))});q1.displayName="Swiper";const G1=B.forwardRef(function(n,e){let{tag:t="div",children:i,className:a="",swiper:o,zoom:u,lazy:h,virtualIndex:f,swiperSlideIndex:m,..._}=n===void 0?{}:n;const v=B.useRef(null),[E,A]=B.useState("swiper-slide"),[S,D]=B.useState(!1);function L(ee,Z,ue){Z===v.current&&A(ue)}Ju(()=>{if(typeof m<"u"&&(v.current.swiperSlideIndex=m),e&&(e.current=v.current),!(!v.current||!o)){if(o.destroyed){E!=="swiper-slide"&&A("swiper-slide");return}return o.on("_slideClass",L),()=>{o&&o.off("_slideClass",L)}}}),Ju(()=>{o&&v.current&&!o.destroyed&&A(o.getSlideClasses(v.current))},[o]);const M={isActive:E.indexOf("swiper-slide-active")>=0,isVisible:E.indexOf("swiper-slide-visible")>=0,isPrev:E.indexOf("swiper-slide-prev")>=0,isNext:E.indexOf("swiper-slide-next")>=0},H=()=>typeof i=="function"?i(M):i,j=()=>{D(!0)};return kt.createElement(t,rf({ref:v,className:j1(`${E}${a?` ${a}`:""}`),"data-swiper-slide-index":f,onLoad:j},_),u&&kt.createElement(AS.Provider,{value:M},kt.createElement("div",{className:"swiper-zoom-container","data-swiper-zoom":typeof u=="number"?u:void 0},H(),h&&!S&&kt.createElement("div",{className:"swiper-lazy-preloader"}))),!u&&kt.createElement(AS.Provider,{value:M},H(),h&&!S&&kt.createElement("div",{className:"swiper-lazy-preloader"})))});G1.displayName="SwiperSlide";function z3(n,e,t,i){return n.params.createElements&&Object.keys(i).forEach(a=>{if(!t[a]&&t.auto===!0){let o=Li(n.el,`.${i[a]}`)[0];o||(o=nf("div",i[a]),o.className=i[a],n.el.append(o)),t[a]=o,e[a]=o}}),t}function B3(n){let{swiper:e,extendParams:t,on:i,emit:a}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function o(S){let D;return S&&typeof S=="string"&&e.isElement&&(D=e.el.querySelector(S)||e.hostEl.querySelector(S),D)?D:(S&&(typeof S=="string"&&(D=[...document.querySelectorAll(S)]),e.params.uniqueNavElements&&typeof S=="string"&&D&&D.length>1&&e.el.querySelectorAll(S).length===1?D=e.el.querySelector(S):D&&D.length===1&&(D=D[0])),S&&!D?S:D)}function u(S,D){const L=e.params.navigation;S=yr(S),S.forEach(M=>{M&&(M.classList[D?"add":"remove"](...L.disabledClass.split(" ")),M.tagName==="BUTTON"&&(M.disabled=D),e.params.watchOverflow&&e.enabled&&M.classList[e.isLocked?"add":"remove"](L.lockClass))})}function h(){const{nextEl:S,prevEl:D}=e.navigation;if(e.params.loop){u(D,!1),u(S,!1);return}u(D,e.isBeginning&&!e.params.rewind),u(S,e.isEnd&&!e.params.rewind)}function f(S){S.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),a("navigationPrev"))}function m(S){S.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),a("navigationNext"))}function _(){const S=e.params.navigation;if(e.params.navigation=z3(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(S.nextEl||S.prevEl))return;let D=o(S.nextEl),L=o(S.prevEl);Object.assign(e.navigation,{nextEl:D,prevEl:L}),D=yr(D),L=yr(L);const M=(H,j)=>{H&&H.addEventListener("click",j==="next"?m:f),!e.enabled&&H&&H.classList.add(...S.lockClass.split(" "))};D.forEach(H=>M(H,"next")),L.forEach(H=>M(H,"prev"))}function v(){let{nextEl:S,prevEl:D}=e.navigation;S=yr(S),D=yr(D);const L=(M,H)=>{M.removeEventListener("click",H==="next"?m:f),M.classList.remove(...e.params.navigation.disabledClass.split(" "))};S.forEach(M=>L(M,"next")),D.forEach(M=>L(M,"prev"))}i("init",()=>{e.params.navigation.enabled===!1?A():(_(),h())}),i("toEdge fromEdge lock unlock",()=>{h()}),i("destroy",()=>{v()}),i("enable disable",()=>{let{nextEl:S,prevEl:D}=e.navigation;if(S=yr(S),D=yr(D),e.enabled){h();return}[...S,...D].filter(L=>!!L).forEach(L=>L.classList.add(e.params.navigation.lockClass))}),i("click",(S,D)=>{let{nextEl:L,prevEl:M}=e.navigation;L=yr(L),M=yr(M);const H=D.target;let j=M.includes(H)||L.includes(H);if(e.isElement&&!j){const ee=D.path||D.composedPath&&D.composedPath();ee&&(j=ee.find(Z=>L.includes(Z)||M.includes(Z)))}if(e.params.navigation.hideOnClick&&!j){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===H||e.pagination.el.contains(H)))return;let ee;L.length?ee=L[0].classList.contains(e.params.navigation.hiddenClass):M.length&&(ee=M[0].classList.contains(e.params.navigation.hiddenClass)),a(ee===!0?"navigationShow":"navigationHide"),[...L,...M].filter(Z=>!!Z).forEach(Z=>Z.classList.toggle(e.params.navigation.hiddenClass))}});const E=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),_(),h()},A=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),v()};Object.assign(e.navigation,{enable:E,disable:A,update:h,init:_,destroy:v})}function $1(){const n=cl(),[e,t]=B.useState(!1),[i,a]=B.useState(""),[o,u]=B.useState(""),[h,f]=B.useState(!0),[m,_]=B.useState("home"),[v,E]=B.useState([]),[A,S]=B.useState(!0),[D,L]=B.useState([]),[M,H]=B.useState(!1),[j,ee]=B.useState(""),[Z,ue]=B.useState([]),[P,R]=B.useState([]),[I,x]=B.useState([]),[k,U]=B.useState(""),[N,$e]=B.useState(()=>localStorage.getItem("theme")||"light");B.useEffect(()=>{ue(JSON.parse(localStorage.getItem("toRead")||"[]")),R(JSON.parse(localStorage.getItem("read")||"[]")),x(JSON.parse(localStorage.getItem("favorites")||"[]"));const O=N==="dark";document.documentElement.classList.toggle("dark",O),localStorage.setItem("theme",N)},[]),B.useEffect(()=>{localStorage.setItem("toRead",JSON.stringify(Z)),localStorage.setItem("read",JSON.stringify(P)),localStorage.setItem("favorites",JSON.stringify(I))},[Z,P,I]),B.useEffect(()=>{const O=N==="dark";document.documentElement.classList.toggle("dark",O),localStorage.setItem("theme",N)},[N]);const Le=()=>$e(O=>O==="light"?"dark":"light");B.useEffect(()=>{const O=Nb(Zu,async te=>{if(te){const ae=nl(al,"users",te.uid),se=await gC(ae),fe=se.exists()?se.data():{};ue(fe.toRead||[]),R(fe.read||[]),x(fe.favorites||[]),u(fe.name||te.displayName||"lector");const xe=fe.favoriteGenres||[],we=[];for(let St of xe.slice(0,3))try{((await(await fetch(`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(St)}&maxResults=3&key=AIzaSyBpptqQjtR7bmb4LRV7Mi3R-vvRsh9XQaM`)).json()).items||[]).forEach(zn=>{var gi;const ni=zn.volumeInfo;we.push({id:zn.id,title:ni.title,authors:ni.authors||["Autor desconocido"],thumbnail:((gi=ni.imageLinks)==null?void 0:gi.thumbnail)||null})})}catch(Xe){console.error("Error recomendando:",Xe)}E(we)}f(!1),S(!1)});return()=>O()},[]);const $=async(O,te)=>{const ae={toRead:[...Z],read:[...P],favorites:[...I]};ae.toRead=ae.toRead.filter(fe=>fe.id!==O.id),ae.read=ae.read.filter(fe=>fe.id!==O.id),ae.favorites=ae.favorites.filter(fe=>fe.id!==O.id),ae[te]=[...ae[te],O],ue(ae.toRead),R(ae.read),x(ae.favorites),U(`Libro agregado a "${te==="toRead"?"Por leer":te==="read"?"Ledos":"Favoritos"}"`),setTimeout(()=>U(""),2e3);const se=Zu.currentUser;if(se){const fe=nl(al,"users",se.uid);await hy(fe,{toRead:ae.toRead,read:ae.read,favorites:ae.favorites},{merge:!0})}},oe=async()=>{await qD(Zu),n("/login")},de=async O=>{H(!0),ee(""),L([]);try{const se=await(await fetch(`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(O)}&maxResults=10&key=AIzaSyBpptqQjtR7bmb4LRV7Mi3R-vvRsh9XQaM`)).json();L(se.items||[])}catch{ee("Error al buscar libros")}finally{H(!1)}},ge=O=>{O.preventDefault(),i.trim()&&de(i.trim())};return h?q.jsx("div",{className:"p-6",children:"Cargando datos..."}):q.jsxs("div",{className:"flex",children:[q.jsx("aside",{className:`
    fixed top-0 left-0 h-full w-64
    bg-white dark:bg-gray-800 shadow-lg z-30
    transform transition-transform duration-300 ease-in-out
    ${e?"translate-x-0":"-translate-x-full"}
  `,children:q.jsxs("nav",{className:"p-6 space-y-4",children:[q.jsx("button",{onClick:()=>t(!1),className:"mb-4 p-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700 lg:hidden","aria-label":"Cerrar sidebar",children:q.jsx(gS,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),q.jsx("div",{className:"text-xl font-semibold mb-6 text-gray-800 dark:text-white",children:" Book App"}),q.jsx("button",{onClick:()=>{_("toRead"),a(""),L([]),t(!1)},className:"block w-full text-left px-4 py-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700",children:"Por leer"}),q.jsx("button",{onClick:()=>{_("read"),a(""),L([]),t(!1)},className:"block w-full text-left px-4 py-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700",children:"Ledos"}),q.jsx("button",{onClick:()=>{_("favorites"),a(""),L([]),t(!1)},className:"block w-full text-left px-4 py-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700",children:"Favoritos"})]})}),q.jsxs("div",{className:`
      flex flex-col flex-1 min-h-screen
      bg-gray-100 dark:bg-neutral-900 text-gray-900 dark:text-white
      transition-all duration-300 ease-in-out
      overflow-x-hidden            /* evita scroll horizontal */
      px-4 sm:px-6 lg:px-8         /* padding lateral en mviles/tablet */
      ${h?"opacity-0":""}
      ${e?"lg:ml-64 lg:opacity-90 lg:scale-[0.97] lg:overflow-hidden":"lg:ml-0 lg:opacity-100 lg:scale-100"}
    `,children:[q.jsxs("header",{className:`
    w-full flex flex-wrap items-center justify-between
    px-6 py-3
    bg-white bg-opacity-80 dark:bg-gray-800 dark:bg-opacity-80
    backdrop-blur-sm
    border-b border-gray-200 dark:border-gray-700
    shadow-md hover:shadow-xl
    transition-all duration-300 ease-in-out
    ${e?"opacity-90 scale-[0.99]":"opacity-100 scale-100"}
    overflow-visible
  `,children:[q.jsxs("div",{className:"flex items-center gap-4",children:[q.jsx("button",{onClick:()=>t(O=>!O),className:"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-700 transition","aria-label":"Toggle sidebar",children:e?q.jsx(gS,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"}):q.jsx(l6,{className:"w-6 h-6 text-gray-700 dark:text-gray-300"})}),q.jsx("h1",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-100",children:h?"Cargando...":`Hola, ${o}!`})]}),q.jsxs("form",{onSubmit:ge,className:"relative flex-1 max-w-lg mx-6",children:[q.jsx("input",{type:"text",placeholder:"Buscar libros por ttulo, autor...",value:i,onChange:O=>a(O.target.value),className:`\r
      w-full pl-4 pr-12 py-2 rounded-full\r
      border border-gray-300 dark:border-gray-600\r
      bg-gray-50 dark:bg-gray-700\r
      text-gray-900 dark:text-gray-100\r
      placeholder-gray-500 dark:placeholder-gray-400\r
      focus:outline-none focus:ring-2 focus:ring-blue-400\r
      transition-shadow duration-200\r
      shadow-sm hover:shadow-md\r
    `}),q.jsx("button",{type:"submit",className:`\r
      absolute right-3 top-1/2 -translate-y-1/2\r
      p-2 rounded-full\r
      bg-blue-500 hover:bg-blue-600\r
      text-white\r
      shadow-md hover:shadow-lg\r
      transition-all duration-200\r
    `,"aria-label":"Buscar",children:q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:q.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-4.35-4.35M17 11a6 6 0 11-12 0 6 6 0 0112 0z"})})})]}),q.jsxs("div",{className:"flex items-center gap-4",children:[q.jsxs("label",{htmlFor:"theme-toggle",className:"flex items-center cursor-pointer",children:[q.jsx("input",{id:"theme-toggle",type:"checkbox",className:"sr-only",checked:N==="dark",onChange:Le}),q.jsx("div",{className:"w-11 h-6 bg-gray-300 dark:bg-gray-600 rounded-full transition-colors duration-200 flex items-center p-1",children:q.jsx("span",{className:`
        block w-4 h-4 bg-white dark:bg-gray-300 rounded-full
        transform transition-transform duration-200
        ${N==="dark"?"translate-x-5":"translate-x-0"}
      `})}),q.jsxs("span",{className:"sr-only",children:["Activar modo ",N==="light"?"oscuro":"claro"]})]}),q.jsxs("button",{onClick:oe,className:`\r
    flex items-center gap-2\r
    px-2 py-1 text-sm            /* tamao pequeo en mvil */\r
    sm:px-4 sm:py-2 sm:text-base /* a partir de 640px vuelve al original */\r
    bg-red-500 hover:bg-red-600\r
    text-white font-medium\r
    rounded-full\r
    shadow-md hover:shadow-lg\r
    transition-all duration-200\r
    focus:outline-none focus:ring-2 focus:ring-red-400 max-[410px]:ml-20\r
    max-[410px]:mt-5 max-[327px]:ml-1\r
\r
  `,children:[q.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[q.jsx("path",{fillRule:"evenodd",d:"M3 4.5A1.5 1.5 0 014.5 3h5a1.5 1.5 0 011.5 1.5V7a.5.5 0 001 0V4.5A2.5 2.5 0 009.5 2h-5A2.5 2.5 0 002 4.5v11A2.5 2.5 0 004.5 18h5a2.5 2.5 0 002.5-2.5V13a.5.5 0 00-1 0v2.5A1.5 1.5 0 019.5 17h-5A1.5 1.5 0 013 15.5v-11z",clipRule:"evenodd"}),q.jsx("path",{d:"M13.854 10.354a.5.5 0 000-.708L11.172 7H17.5a.5.5 0 000-1H11.17l2.682-2.646a.5.5 0 10-.707-.708l-3.5 3.5a.5.5 0 000 .708l3.5 3.5a.5.5 0 00.708 0z"})]}),"Cerrar sesin"]})]})]}),k&&q.jsx("div",{className:`\r
      fixed top-24 right-6\r
      z-[100]\r
      px-6 py-4\r
      rounded-lg shadow-xl\r
      bg-neutral-800 text-white\r
      border border-neutral-600\r
      backdrop-blur-md bg-opacity-90\r
      animate-fade-in-out\r
      max-w-sm text-sm font-medium\r
      transition-transform duration-300\r
    `,children:k}),q.jsxs("main",{className:"flex-1 p-6 overflow-y-auto overflow-x-hidden px-0 sm:px-4 lg:px-6",children:[i&&D.length>0&&q.jsxs(q.Fragment,{children:[M&&q.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400",children:"Buscando libros..."}),j&&q.jsx("p",{className:"text-center text-red-500 mt-4",children:j}),q.jsx("ul",{className:"mt-4 max-w-5xl mx-auto px-4 sm:px-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8",children:D.map((O,te)=>{var fe;const ae=O.volumeInfo,se={id:O.id,title:ae.title,authors:ae.authors||["Autor desconocido"],thumbnail:((fe=ae.imageLinks)==null?void 0:fe.thumbnail)||null};return q.jsxs("li",{className:"flex flex-col justify-between bg-white dark:bg-gray-800 rounded-lg shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition duration-300 overflow-hidden opacity-0 animate-fade-in-up",style:{animationDelay:`${te*.15}s`},children:[se.thumbnail&&q.jsx("div",{className:"h-56 bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:q.jsx("img",{src:se.thumbnail,alt:se.title,className:"max-h-full object-contain"})}),q.jsxs("div",{className:"p-4 flex-grow",children:[q.jsx("h3",{className:"font-semibold text-lg mb-2 text-gray-900 dark:text-gray-100",children:se.title}),q.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:se.authors.join(", ")})]}),q.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 flex gap-3",children:[q.jsx("button",{onClick:()=>$(se,"toRead"),className:`\r
    flex-1 py-2 text-sm font-medium rounded-md\r
    bg-gradient-to-r from-slate-600 to-slate-800\r
    text-white shadow-md hover:from-slate-700 hover:to-slate-900\r
    transform hover:-translate-y-0.5 transition\r
  `,children:"Por leer"}),q.jsx("button",{onClick:()=>$(se,"read"),className:`\r
    flex-1 py-2 text-sm font-medium rounded-md\r
    bg-gradient-to-r from-emerald-600 to-emerald-800\r
    text-white shadow-md hover:from-emerald-700 hover:to-emerald-900\r
    transform hover:-translate-y-0.5 transition\r
  `,children:"Ledos"}),q.jsx("button",{onClick:()=>$(se,"favorites"),className:`\r
    flex-1 py-2 text-sm font-medium rounded-md\r
    bg-gradient-to-r from-indigo-600 to-indigo-800\r
    text-white shadow-md hover:from-indigo-700 hover:to-indigo-900\r
    transform hover:-translate-y-0.5 transition\r
  `,children:"Favoritos"})]})]},O.id)})})]}),m==="home"&&D.length===0&&q.jsxs(q.Fragment,{children:[!A&&v.length>0&&q.jsxs("div",{className:"mb-8",children:[q.jsx("h2",{className:"text-2xl font-bold mb-4 text-center text-gray-800 dark:text-gray-100",children:"Recomendados para ti"}),q.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8 mx-auto max-w-5xl px-4 sm:px-6",children:v.map((O,te)=>q.jsxs("li",{className:"flex flex-col justify-between bg-white dark:bg-gray-800 rounded-lg shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition duration-300 overflow-hidden opacity-0 animate-fade-in-up",style:{animationDelay:`${te*.15}s`},children:[O.thumbnail&&q.jsx("div",{className:"h-56 bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:q.jsx("img",{src:O.thumbnail,alt:O.title,className:"max-h-full object-contain"})}),q.jsxs("div",{className:"p-4 flex-grow",children:[q.jsx("h3",{className:"font-semibold text-lg mb-2 text-gray-900 dark:text-gray-50",children:O.title}),q.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:O.authors.join(", ")})]}),q.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 flex gap-3",children:[q.jsx("button",{onClick:()=>$(O,"toRead"),className:`\r
    flex-1 py-2 text-sm font-medium rounded-md\r
    bg-gradient-to-r from-slate-600 to-slate-800\r
    text-white shadow-md hover:from-slate-700 hover:to-slate-900\r
    transform hover:-translate-y-0.5 transition\r
  `,children:"Por leer"}),q.jsx("button",{onClick:()=>$(O,"read"),className:`\r
    flex-1 py-2 text-sm font-medium rounded-md\r
    bg-gradient-to-r from-emerald-600 to-emerald-800\r
    text-white shadow-md hover:from-emerald-700 hover:to-emerald-900\r
    transform hover:-translate-y-0.5 transition\r
  `,children:"Ledos"}),q.jsx("button",{onClick:()=>$(O,"favorites"),className:`\r
    flex-1 py-2 text-sm font-medium rounded-md\r
    bg-gradient-to-r from-indigo-600 to-indigo-800\r
    text-white shadow-md hover:from-indigo-700 hover:to-indigo-900\r
    transform hover:-translate-y-0.5 transition\r
  `,children:"Favoritos"})]})]},O.id))})]}),!A&&v.length===0&&q.jsx("p",{className:"text-lg text-center text-gray-700 dark:text-gray-300",children:"Bienvenido a tu librera personal. Selecciona una seccin."})]}),["toRead","read","favorites"].includes(m)&&D.length===0&&q.jsx(j3,{activeSection:m,toRead:Z,read:P,favorites:I})]}),q.jsx("style",{children:`
  @keyframes fadeInOut {
    0%   { opacity: 0; }
    10%  { opacity: 1; }
    90%  { opacity: 1; }
    100% { opacity: 0; }
  }

  .animate-fade-in-out {
    animation: fadeInOut 2s forwards;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in-up {
    opacity: 0;
    animation: fadeInUp 0.5s ease forwards;
  }
`})]})]})}function j3({activeSection:n,toRead:e,read:t,favorites:i}){const[a,o]=B.useState(window.innerWidth>=768);B.useEffect(()=>{const f=()=>o(window.innerWidth>=768);return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]);const u=n==="toRead"?e:n==="read"?t:i,h=n==="toRead"?"Libros por leer":n==="read"?"Libros ledos":"Favoritos";return q.jsxs(q.Fragment,{children:[q.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800 dark:text-gray-100",children:h}),q.jsx(q1,{modules:[B3],navigation:a,spaceBetween:24,slidesPerView:1,breakpoints:{768:{slidesPerView:2},1024:{slidesPerView:3}},className:"max-w-6xl mx-auto py-8",children:u.map(f=>q.jsx(G1,{children:q.jsxs("div",{className:`\r
                flex flex-col justify-between\r
                bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900\r
                border border-gray-200 dark:border-gray-700\r
                rounded-xl\r
                shadow-md hover:shadow-xl\r
                transform hover:-translate-y-1 hover:scale-[1.02]\r
                transition-all duration-300\r
                overflow-hidden\r
                h-100\r
                w-[90%] max-w-[300px] mx-auto\r
                sm:w-[80%]\r
                md:w-[70%]\r
                lg:w-full\r
              `,children:[f.thumbnail&&q.jsx("div",{className:"w-full aspect-[3/4] bg-gray-100 dark:bg-gray-700 flex items-center justify-center overflow-hidden",children:q.jsx("img",{src:f.thumbnail,alt:f.title,className:"h-full object-cover"})}),q.jsx("div",{className:"p-4 flex-1 flex flex-col justify-between",children:q.jsxs("div",{children:[q.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-gray-100 mb-1 line-clamp-2",children:f.title}),q.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-1",children:f.authors.join(", ")})]})})]})},f.id))})]})}function F3(){const[n,e]=B.useState([]),[t,i]=B.useState(0),[a,o]=B.useState(!0),[u,h]=B.useState(!1),f=["literature","fiction","adventure"],m=["satan","erotic","adult","sex","demon"];return B.useEffect(()=>{const _=localStorage.getItem("token");h(!!_)},[]),B.useEffect(()=>{const _=async E=>{try{return((await(await fetch(`https://www.googleapis.com/books/v1/volumes?q=subject:${encodeURIComponent(E)}&maxResults=10&key=AIzaSyBpptqQjtR7bmb4LRV7Mi3R-vvRsh9XQaM`)).json()).items||[]).filter(L=>{var H;const M=L.volumeInfo.title.toLowerCase();return((H=L.volumeInfo.imageLinks)==null?void 0:H.thumbnail)&&!m.some(j=>M.includes(j))})}catch{return[]}};(async()=>{const E=await Promise.all(f.map(S=>_(S))),A=[];for(let S=0;S<Math.max(...E.map(D=>D.length));S++)for(const D of E)D[S]&&A.push(D[S]);e(A)})()},[]),B.useEffect(()=>{if(n.length===0)return;const _=setInterval(()=>{o(!1),setTimeout(()=>{i(v=>(v+1)%n.length),o(!0)},500)},5e3);return()=>clearInterval(_)},[n]),u?q.jsx($1,{}):n.length===0?q.jsx("p",{className:"text-center mt-10",children:"Cargando libros..."}):q.jsx(eN,{currentBook:n[t].volumeInfo,fade:a})}function H3(){const[n,e]=B.useState({email:"",password:""}),[t,i]=B.useState(""),a=cl(),o=f=>{e(m=>({...m,[f.target.name]:f.target.value})),i("")},u=async f=>{const m=nl(al,"users",f);try{await hy(m,{lastLogin:new Date().toISOString(),email:n.email},{merge:!0}),console.log("Datos de usuario guardados en Firestore")}catch(_){console.error("Error guardando datos del usuario en Firestore:",_)}},h=async f=>{f.preventDefault();try{const{user:m}=await zD(Zu,n.email,n.password);await u(m.uid);const _=await gC(nl(al,"users",m.uid));_.exists()&&console.log("Datos en Firestore:",_.data()),console.log("Redirigiendo a /homePrivate..."),a("/homePrivate")}catch(m){console.error("Error al iniciar sesin:",m.code);let _="Ocurri un error. Intenta nuevamente.";(m.code==="auth/user-not-found"||m.code==="auth/wrong-password"||m.code==="auth/invalid-credential")&&(_="Correo o contrasea incorrectos. Intenta nuevamente."),i(_)}};return q.jsxs("form",{onSubmit:h,className:`
    bg-white dark:bg-gray-800
    p-4 sm:p-8                /* menos padding en mvil */
    rounded-xl shadow-xl
    w-full max-w-md
    mx-auto                    /* centrar en pantallas grandes */
  `,children:[q.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"Bienvenido de nuevo "}),t&&q.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:t}),q.jsxs("div",{className:"mb-4",children:[q.jsx("label",{htmlFor:"email",className:"block mb-1 text-sm sm:text-base text-gray-700 dark:text-gray-200",children:"Correo"}),q.jsx("input",{id:"email",name:"email",type:"email",value:n.email,onChange:o,required:!0,className:`
        w-full
        px-3 sm:px-4 py-2
        text-sm sm:text-base           /* fuente ms pequea en mvil */
        rounded border
        dark:bg-gray-700 dark:text-white
      `})]}),q.jsxs("div",{className:"mb-6",children:[q.jsx("label",{htmlFor:"password",className:"block mb-1 text-sm sm:text-base text-gray-700 dark:text-gray-200",children:"Contrasea"}),q.jsx("input",{id:"password",name:"password",type:"password",value:n.password,onChange:o,required:!0,className:`
        w-full
        px-3 sm:px-4 py-2
        text-sm sm:text-base
        rounded border
        dark:bg-gray-700 dark:text-white
      `})]}),q.jsx("button",{type:"submit",className:`
      w-full
      bg-yellow-600 hover:bg-yellow-500
      text-white
      py-2 sm:py-3                  /* botn un poco ms alto en desktop */
      text-sm sm:text-base
      rounded
      transition
    `,children:"Iniciar sesin"})]})}const CS="/book-app/assets/login-DvurvPTs.jpg";function q3(){const[n,e]=B.useState(!1);return B.useEffect(()=>{const t=new Image;t.src=CS,t.onload=()=>e(!0)},[]),q.jsx("div",{className:`h-[calc(100vh-7.5rem)] flex items-center justify-center bg-cover bg-center bg-blend-overlay 
      transition-opacity duration-1000 ease-in ${n?"opacity-100":"opacity-0"}`,style:{backgroundImage:`url(${CS})`},children:q.jsx(H3,{})})}function G3(){const[n,e]=B.useState({name:"",email:"",password:""}),[t,i]=B.useState(""),a=cl(),o=h=>{e({...n,[h.target.name]:h.target.value}),i("")},u=async h=>{h.preventDefault();try{const{user:f}=await UD(Zu,n.email,n.password);await jD(f,{displayName:n.name}),await hy(nl(al,"users",f.uid),{name:n.name,email:n.email,favorites:[],toRead:[],read:[],favoriteGenres:[],createdAt:new Date}),a("/seleccionar-generos")}catch(f){f.code==="auth/email-already-in-use"?i("Este correo ya est registrado, intenta con otro."):i("Ocurri un error: "+f.message)}};return q.jsxs("form",{onSubmit:u,className:`
    bg-white dark:bg-gray-800
    p-4 xl:p-8              /* menos padding en mvil, vuelve en tablet+ */
    rounded-xl shadow-xl
    w-full max-w-md
    mx-auto                  /* centrar en pantallas grandes */
  `,children:[q.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"Crea tu cuenta lectora! "}),t&&q.jsx("p",{className:"text-red-500 text-sm mb-4 text-center",children:t}),q.jsx("p",{className:"text-center text-gray-500 dark:text-gray-300 mb-6 text-sm sm:text-base",children:"Guarda tus libros favoritos y sigue tu progreso de lectura"}),q.jsxs("div",{className:"mb-4",children:[q.jsx("label",{htmlFor:"name",className:"block mb-1 text-sm sm:text-base text-gray-700 dark:text-gray-200",children:"Nombre"}),q.jsx("input",{type:"text",name:"name",id:"name",value:n.name,onChange:o,required:!0,className:`
        w-full
        px-3 sm:px-4 py-2
        text-sm sm:text-base    /* fuente ms pequea en mvil */
        rounded border
        dark:bg-gray-700 dark:text-white
      `})]}),q.jsxs("div",{className:"mb-4",children:[q.jsx("label",{htmlFor:"email",className:"block mb-1 text-sm sm:text-base text-gray-700 dark:text-gray-200",children:"Correo"}),q.jsx("input",{type:"email",name:"email",id:"email",value:n.email,onChange:o,required:!0,className:`
        w-full
        px-3 sm:px-4 py-2
        text-sm sm:text-base
        rounded border
        dark:bg-gray-700 dark:text-white
      `})]}),q.jsxs("div",{className:"mb-6",children:[q.jsx("label",{htmlFor:"password",className:"block mb-1 text-sm sm:text-base text-gray-700 dark:text-gray-200",children:"Contrasea"}),q.jsx("input",{type:"password",name:"password",id:"password",value:n.password,onChange:o,required:!0,className:`
        w-full
        px-3 sm:px-4 py-2
        text-sm sm:text-base
        rounded border
        dark:bg-gray-700 dark:text-white
      `})]}),q.jsx("button",{type:"submit",className:`
      w-full
      bg-green-600 hover:bg-green-700
      text-white
      py-2 sm:py-3            /* botn ms alto en tablet+ */
      text-sm sm:text-base
      rounded
      transition
    `,children:"Registrarse gratis"})]})}const RS="/book-app/assets/register-DPcN4oRF.jpg";function $3(){const[n,e]=B.useState(!1);return B.useEffect(()=>{const t=new Image;t.src=RS,t.onload=()=>e(!0)},[]),q.jsx("div",{className:`h-[calc(100vh-7.5rem)] flex items-center justify-center bg-cover bg-center bg-blend-overlay 
      transition-opacity duration-1000 ease-in ${n?"opacity-100":"opacity-0"}`,style:{backgroundImage:`url(${RS})`},children:q.jsx(G3,{})})}const Mi="/book-app/",Y3=[{name:"Romance",image:`${Mi}images/romance.jpg`},{name:"Fantasa",image:`${Mi}images/fantasy.jpg`},{name:"Ciencia ficcin",image:`${Mi}images/scifi.jpg`},{name:"Thriller",image:`${Mi}images/thriller.jpg`},{name:"Terror",image:`${Mi}images/horror.jpg`},{name:"Histrica",image:`${Mi}images/history.jpg`},{name:"Juvenil",image:`${Mi}images/young.jpg`},{name:"Autoayuda",image:`${Mi}images/selfhelp.jpg`},{name:"Biografas",image:`${Mi}images/biography.jpg`},{name:"Contempornea",image:`${Mi}images/contemporary.jpg`}];function K3({onFinish:n}){const[e,t]=B.useState([]),i=o=>t(u=>u.includes(o)?u.filter(h=>h!==o):[...u,o]),a=()=>{console.log("Gneros seleccionados:",e),n==null||n(e)};return q.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 py-12 px-4",children:[q.jsx("h2",{className:"text-3xl font-bold text-center text-gray-800 dark:text-white mb-8",children:"Qu gneros literarios te interesan?"}),q.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 max-w-6xl mx-auto",children:Y3.map(o=>q.jsxs("div",{className:`rounded-xl overflow-hidden shadow-lg transform hover:scale-105 transition duration-300 relative border-4 ${e.includes(o.name)?"border-yellow-500":"border-transparent"}`,children:[q.jsx("img",{src:o.image,alt:o.name,className:"w-full h-48 object-cover"}),q.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800",children:[q.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:o.name}),q.jsx("button",{onClick:()=>i(o.name),className:`w-full py-2 px-4 rounded font-medium transition ${e.includes(o.name)?"bg-yellow-600 text-white hover:bg-yellow-500":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:e.includes(o.name)?"Seleccionado":"Seleccionar"})]})]},o.name))}),q.jsx("div",{className:"mt-10 text-center",children:q.jsx("button",{onClick:a,className:"bg-yellow-600 hover:bg-yellow-500 text-white font-bold py-3 px-6 rounded-lg shadow-md transition",children:"Continuar"})})]})}const Y1=B.createContext({currentUser:null,initializing:!0});function Q3({children:n}){const[e,t]=B.useState(null),[i,a]=B.useState(!0),o=jb();return B.useEffect(()=>Nb(o,h=>{t(h),a(!1)}),[o]),q.jsx(Y1.Provider,{value:{currentUser:e,initializing:i},children:n})}function Ly(){return B.useContext(Y1)}function W3(){const n=cl(),{currentUser:e}=Ly(),t=async i=>{console.log("handleFinish llamado con:",i);try{e?(await _L(nl(al,"users",e.uid),{favoriteGenres:i}),console.log("Gneros guardados. Navegando a /homePrivate"),n("/homePrivate")):console.log("No hay usuario autenticado.")}catch(a){console.error("Error al guardar gneros:",a)}};return console.log("Usuario actual:",e),q.jsx(K3,{onFinish:t})}function mg({children:n}){const{user:e,initializing:t}=Ly();return t?q.jsx("div",{children:"Cargando..."}):e?q.jsx(f_,{to:"/homePrivate",replace:!0}):n}function IS({children:n}){const{currentUser:e,initializing:t}=Ly();return t?q.jsx("div",{children:"Cargando sesin..."}):e?n:q.jsx(f_,{to:"/",replace:!0})}function X3(){const n=Mr(),e=n.pathname==="/homePrivate",[t,i]=B.useState(()=>localStorage.getItem("theme")||"light");B.useEffect(()=>{const o=t==="dark";document.documentElement.classList.toggle("dark",o),localStorage.setItem("theme",t)},[t]);const a=()=>i(o=>o==="light"?"dark":"light");return q.jsxs("div",{className:"min-h-screen bg-gray-100 text-gray-900 dark:bg-neutral-900 dark:text-white transition-colors duration-300",children:[!e&&q.jsx("header",{className:"bg-white dark:bg-neutral-900 shadow p-4 drop-shadow-[8px_8px_6px_rgba(0,0,0,0.25)] overflow-x-hidden w-full box-border",children:q.jsxs("nav",{className:"container mx-auto flex justify-between items-center",children:[q.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:" Book App"}),q.jsxs("div",{className:"flex space-x-8 items-center justify-center",children:[[{to:"/",label:"Inicio"},{to:"/login",label:"Iniciar sesin"},{to:"/register",label:"Registrarse"}].map(({to:o,label:u})=>q.jsxs(of,{to:o,className:"relative group text-gray-700 dark:text-gray-300 font-medium transition-colors duration-300",children:[u,q.jsx("span",{className:"absolute left-0 -bottom-1 w-0 h-0.5 bg-blue-500 transition-all duration-300 group-hover:w-full"})]},o)),q.jsx("button",{onClick:a,className:"px-4 py-2 rounded-lg text-sm font-semibold transition-all duration-300 bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-md hover:from-indigo-600 hover:to-purple-700 dark:from-gray-800 dark:to-gray-900 dark:hover:from-gray-700 dark:hover:to-gray-800",children:t==="light"?" Modo oscuro":" Modo claro"})]})]})}),q.jsx("main",{className:n.pathname==="/"?"":"p-6",children:q.jsxs(vx,{children:[q.jsx(_a,{path:"/",element:q.jsx(mg,{children:q.jsx(F3,{})})}),q.jsx(_a,{path:"/login",element:q.jsx(mg,{children:q.jsx(q3,{})})}),q.jsx(_a,{path:"/register",element:q.jsx(mg,{children:q.jsx($3,{})})}),q.jsx(_a,{path:"/seleccionar-generos",element:q.jsx(IS,{children:q.jsx(W3,{})})}),q.jsx(_a,{path:"/homePrivate",element:q.jsx(IS,{children:q.jsx($1,{})})}),q.jsx(_a,{path:"*",element:q.jsx(f_,{to:"/",replace:!0})})]})})]})}function Z3(){return q.jsx(Hx,{children:q.jsx(Q3,{children:q.jsx(X3,{})})})}II.createRoot(document.getElementById("root")).render(q.jsx(B.StrictMode,{children:q.jsx(Z3,{})}));
